EQEMu Changelog (Started on Sept 24, 2003 15:50)
-------------------------------------------------------
==06/10/2009==
realityincarnate: Added /makeleader command functionality
realityincarnate: Non-leaders can no longer kick members from the group

==06/09/2009==
Trevius: Added rule Combat:ArcheryStationaryPenalty to allow adjustment of the Archery damage penalty for moving or rooted targets.
KLS: Backstab tweak again.
KLS: Added Perl commands: GetItemAt(slot), GetAugmentAt(slot, aug_slot) both returning type ItemInst usable from the Client object.
KLS: Added Perl command: IsType() for use on the ItemInst object.

Optional SQL: \utils\sql\svn\646_archery_penalty_rule.sql

==06/08/2009==
KLS(realityincarnate): Charms: Added charm item scaling with scriping support and initial work on evolving items.
KLS(realityincarnate): Added perl method $client->GetModCharacterFactionLevel(FactionID)
KLS(realityincarnate): Added perl method $group->GetMember(index)
KLS: Added perl method $client->GetLDoNWins()
KLS: Added perl method $client->GetLDoNLosses()
KLS: Added perl method $client->GetLDoNWinsTheme(theme 1-5)
KLS: Added perl method $client->GetLDoNLossesTheme(theme 1-5)
KLS: Added support for item clicklevel and item clicklevel2
Trevius: Increased spellbook from 400 to 480 in the Player Profile for use with SoF (60 page spell book)
Trevius: SoF - Added new functions to SoF.cpp for converting Slot IDs between Titanium and SoF
Trevius: SoF - Corrected the location of the spellbook field in the Player Profile to fix an issue with loading spells
WildcardX: Check in of the start of what will become the new BOTS subsystem/framework. This is far from done so just continue to use the existing EQBOTS code you have been using. 
KLS: Change to dangerous item inst aug creation, hopefully addresses segfault on 64 bit linux.
KLS: Hopefully fix for pets not giving adventure credit to players in ldon instances.

==06/07/2009==
NOTE (WildcardX): This version of the server code is a little dangerous for BOT enabled servers. I do not recommend using this revision for BOT enabled servers. Most of the existing BOT code is going to be re-implemented as a "BOT" object in the server code so until I complete this architecture change the BOT code may become somewhat unstable. I apologize for the inconvience but this is necessary to allow the server code for the BOTs to be more flexible and extensible than it is now.

Derision: Check for duplicate lore items when fishing.
Derision: Fixed a memory leak in fishing/foraging code.
WildcardX: Traded static integer values for the appropriate enumeration that defines group action types.
WildcardX: A Player grouping with one or more BOTS will now correctly be set as the group leader.
WildcardX: You can now target your BOT to disband it from the group just as you would a player. This does not call the logic that #bot group remove does, though. Keep using the BOT command for now.
WildcardX: A group of one Player and a BOT can now request a LDoN Adventure, but doing so will crash the zone.
KLS: Change to BS formula: moved backstab bonus to damage table. Still might be off but I have another change in mind if so.
KLS: Fix for bug in client calcbonuses.

==06/06/2009==
Trevius: SoF - Corrected Char select Primary/Secondary slot display order.
Trevius: SoF - Added gender to the conversion for bodytypes 66 and 67, which should resolve any remaining issues with it.
Derision: New Universal Chat Server combining both mail and chat server functionality.
          Required to support mail, chat and friends/ignore for SoF clients.
          See http://www.eqemulator.net/wiki/wikka.php?wakka=UCS
WildcardX: Corrected the project file for eqlaunch. This should allow eqlaunch to execute correctly for Windows XP and Windows 2003 Server.
WildcardX: Corrected database table definition that created a bug which prevented a BOT from being created.

REQUIRED SQL:

CREATE TABLE `friends` (
  `charid` int(10) unsigned NOT NULL,
  `type` tinyint(1) unsigned NOT NULL default '1' COMMENT '1 = Friend, 0 = Ignore',
  `name` varchar(64) NOT NULL,
  PRIMARY KEY  (`charid`,`type`,`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

634_TrapTemplateDefaultValue.sql

==06/05/2009==
Derision: SoF - Adventure OPCode updates

==06/04/2009==
Trevius: SoF - Added conversion for bodytypes 66 and 67 so they are now untargetable, invisible and have no showing name as they should be.
Congdar: Bots - Implemented raid maintarget, updates to magepet and pvp.  Added Sinister Strikes & Strikethrough AAs and several other updates.
KLS: Pets will no longer gain aggro from their owners before their owners load in. Fixes both a dupe and crash issue.
KLS: Players will no longer take damage or die before they finish loading into the game.
KLS: Fixed a crash in /open.

==06/03/2009==
KLS: Used Cbodmer old ldon trap code as a base for ldon trap implementation. About 50% of the code for this system was his so I figured he deserves credit too.
Derision: Added messages when Leadership Exp is toggled on/off.
Derision: Fixed bug where group retained Leadership AA benefits of previous leader.

Required sql: 621_LDoNTraps.sql
Updated titanium .conf file for ldon opcodes. Will look at other clients later.

==06/02/2009==
Trevius: Updated the new Adventure Opcodes for SoF

==06/02/2009==
KLS: Forgot to update .conf files with the merge. Please update yours if haven't.
KLS: Added settable flavor text to adventure recruiter entries.

Required sql: 619_Adventure_Recruiter_Flavor.sql

==06/01/2009==
KLS: (takatok) Fix for agil being factored twice in to-hit calc.
KLS: (tsowl) Reimplemented corpse reloading timer fix.  Should work with burried corpses now. (Sorry it took so long to get back to).
KLS: Finished implementing Assassinate and Rescue adventure type
KLS: AC in calc will now not cap at 0.  What this means: A level 65 hitting a level 1 will now hit for a majority of attacks at or near maximum damage, it should affect any other situations.
KLS: Spells shouldn't cause interrupts any longer.
KLS: LDoN theme "ALL" items should show up properly now.
KLS: Added sanity check on adventure merchant for both lore items and trying to purchase items of one theme that has a min point requirement while not meeting that requirement.
KLS: Rule Adventure:ItemIDToEnablePorts will now actually cause the door to ignore this rule if it is set to 0.
KLS: Changed the evacuate work around to use zone 1 and zone 2 instead of plane zones that probably have requirements set on them.

==05/31/2009==
realityincarnate: Added EVENT_CAST to player quests
realityincarnate: AA $quest functions: $client->GetAAPoints(), SetAAPoints(value), AddAAPoints(number), RefundAA(), GetSpentAA()
KLS: Procs will now only occur on a player's targeted mob.
realityincarnate: fixed a calculation error with spent AA's
KLS: Merged instance branch to trunk.

==05/30/2009==
KLS: Redid procs a bit, spell procs should work more consistently and ppm formula should be less broken and will also take into account haste now.
Highly suggested you change your Combat:AvgProcsPerMinute rule to 2.0 if you want it to be live like.
Derision: Group Leadership AA

REQUIRED SQL:

ALTER TABLE `group_leaders` ADD `assist` VARCHAR( 64 ) NOT NULL ,
ADD `marknpc` VARCHAR( 64 ) NOT NULL ,
ADD `leadershipaa` TINYBLOB NOT NULL ;

OPTIONAL SQL:

INSERT INTO `rule_values` VALUES (1,'Character:KillsPerRaidLeadershipAA','50','');
INSERT INTO `rule_values` VALUES (1,'Character:KillsPerGroupLeadershipAA','50','');

==05/29/2009==
Derision: Lay Hands/Harm Touch hot buttons now remain depressed across zoning until reuse timer is up.

==05/28/2009==
Congdar: Bots - updates to bot pvp, raidexp and magepet

==05/27/2009==
Trevius: SoF - Added new opcode and structure to support the Respawn Window.  It isn't fully functional yet, but most of the code is there now.
Congdar: Bots - Fixed botraid experience distribution.

==05/26/2009==
WildcardX: Fixed a bug that displayed the name of a target being summoned in an incorrect format.
Angelox: Bots- Weapons that proc'd rune-types were proc'ing for the whole group. 3 fighters with PGTs made you pretty much bullet-proof.

==05/25/2009==
cavedude: (gaeorn) Added a possible fix for some NPCs not always spawning.
Congdar: Bots - Added PvP for bots.
WildcardX: (erde) Added include for limits.h.

==05/24/2009==
KLS: Fixed dodge/parry/riposte, lowered their effectiveness from skill points slightly.
Congdar: Bots - Added new command #bot magepet [earth|water|air|fire|monster] - Select the pet type you want your Mage bot to use.

==05/23/2009==
KLS: Spells with 0 spell mod will now act as if their mod was 100% or normal instead of 0% of normal.
KLS: (Derision) Implemented discipline reuse timer's client side effects
Congdar: New feature to choose if a key should go on the keyring or not.
	required sql 564_nokeyring.sql

==05/21/2009==
Trevius: Added new quest command quest::saylink() to create itemlinks in quest text that can be clicked for a response

Recommended SQL: .\utils\sql\svn\553_saylink_table.sql

==05/20/2009==
Angelox: Bots- Bots can't stack invis-undead, invis-live, or any other invis type spell.
KLS: Fix for NPCs jumping in place when they have the fixpathingZ rules for movement enabled.
KLS: Traps will no longer attempt to clean up their npcs, every time a trap is destroyed so are the NPCs so it's redundant and risky.
Congdar: Bots - Added Magician AA Elemental Durability, Fixed #bot corpse summon, AI Tweak

==05/19/2009==
Trevius: Identified hairstyle, haircolor, beard, and beardcolor in the Titanium Illusion struct so the related commands now work in Titanium.
KLS: PvP info will only be set if the server type is set to 1 (pvp)
KLS: Adjusted chances on dodge/parry/riposte modifiers
KLS: Made experience con scaling into a rule.
KLS: Added Rules: (Character, UseXPConScaling), (Character, LightBlueModifier), (Character, BlueModifier), (Character, WhiteModifier), (Character, YellowModifier), (Character, RedModifier)
Derision: Bandolier bug fix.
Derision: Equipped items that should confer an extra potion belt slot now do so in Titanium and the 6.2 client (was already working in SoF).
Angelox: Bots- (Congdar) fixed Bot illusion / change form spells as to who is affected.
Angelox: Bots- added check to Bot pacify for casting from a distance. 


==05/18/2009==
Trevius: New Commands added: #face, #helm, #hair, #haircolor, #beard, #beardcolor, #heritage, #tattoo, #details
Trevius: Adjusted the #fixmob command to use all features.  The new format is "#fixmob featurename prev/next"
Trevius: Corrected the R524 optional SQL file

==05/16/2009==
Trevius: (Shendare) Added armor tinting functionality for NPCs by setting it in the npc_types table
Trevius: Added base support for illusions to use all facial features, but functionality still needs to be added.
Derision: Reverted (Minimum 3% chance to proc from weapon proc buffs)
KLS: Reduced chance to hit for min damage with AC.
KLS: Added AC scaling by level, will put it in a rule soon.
KLS: Enabled both petition window 'p' and pvp window 'ctrl p' on titanium/sof; neither are functional but they're enabled now and we can work on that later.
Congdar: Bots - fix compile error and update to current combat code
Congdar: Bots - fix pet exploit
KLS: Added backward compatibility to older corpses.

Required SQL: .\utils\sql\svn\527_npc_armor_tint.sql

==05/15/2009==
Trevius: (Trevius/Shendare) Swapped Beardcolor and Beard in the spawn struct for Titanium and Titanium Facial Features should be finalized now.
Trevius: SoF - Drakkin Specific Features (Heritage, Tattoo and Details) should now be fully functional for NPCs and PCs
Derision: Minimum 3% chance to proc from weapon proc buffs (e.g. vampiric embrace, call of sky etc.)
Trevius: Added encode for Illusion packets in Titanium so they see Drakkin as human after clicking off an illusion
Trevius: Optional SQL for adding a notes field to the rule_values table with notes from ruletypes.h

Required SQL: .\utils\sql\svn\518_drakkin_npc_type_features.sql
Optional SQL: .\utils\sql\svn\524_rule_values_notes.sql

==05/14/2009==
Trevius: More work on Facial Features for Characters. Trying to get them functioning properly without hacks before adding SoF Features.
Trevius: SoF - Character Facial Features other than Drakkin specific ones all now work 100% in Character Select and in game.

==05/13/2009==
Trevius: SoF - (Shendare) Corrected the FaceChange Structure and added an encode to make it work
Trevius: SoF - Identified the Drakkin related fields of the Character Select Structure
KLS: Fix for elemental dmg not calculating correctly.

==05/12/2009==
Trevius: SoF - (Shendare) Added a temp commented out test section of code to spawn struct encode
Trevius: SoF - (Shendare) Identified hairstyle, haircolor, flymode, drakkinheritage and drakkintattoo in the spawn struct
Trevius: SoF - (Shendare) Changed facial feature code for getting features slightly
Trevius: SoF - Identified beardcolor, invis, and drakkinspikes in the spawn struct
Trevius: SoF - Updated the OP_CastSpell to convert bag slot from Titanium to SoF for potion use
KLS: Reverted player corpse changes from 5/10 as they caused shadow rest to stop functioning.
KLS: Fixed the /bug structure and updated the table to be more useful.

Required SQL: .\utils\sql\svn\503_bugs.sql

==05/11/2009==
demonstar55: Added a function to allow Perl to check augments within items.
cavedude: Increased bind wound skill up speed some.
KLS: Fix for potentially dangerous typo in spawn conditions code.
KLS: Removed some non-functioning but still taking up database resources database code.
KLS: Change to a spawn2 table query to reduce disk writes.

Suggested SQL: ALTER TABLE `spawn2` DROP INDEX `ZoneGroup`, ADD INDEX `ZoneGroup` (`zone`);

==05/10/2009==
KLS: Fix for a add/remove raid looter across zones error.
KLS: Changed order of split raid exp, ensures amount given to a player is always at least 1.
KLS: (tsowl) Various Fixes

==05/09/2009==
realityincarnate: Modified quest::say to allow npcs to speak in other languages, added $langid quest variable
realityincarnate: Made low language skill/drunkenness a bit less understandable
realityincarnate: Duplicate lore items from foraging/ground spawns are now handled correctly
realityincarnate: Lore items in the shared bank no longer trigger conflicts with items in individual inventories
KLS: Fix for Group:: and Raid:: splitexp bonus calculations happening once for every person in the group / raid, resulting in very high numbers for group and non-positive numbers for raid.
Trevius: SoF - Corrected a minor issues with new mounts where they weren't setting helm texture properly.

==05/08/2009==
Derision: Fixed a bug where a pet set to guard would appear not to stop on returning to it's guard spot after being ordered to attack.
Derision: Fixed a bug where a mob aggroed would sometimes appear to run past it's target.

==05/07/2009==
Trevius: (Erde) The Web Tool now shows the name of the process running each Dynamic zone (example: dynamic_01)

==05/06/2009==
Angelox: Bots: Added command '#bot shrinkme' requires Shaman or Beastlord (defaults to Shaman). 
Derision: Added redux_aa2, redux_rate2 fields to aa_actions.
Derision: Improved Hasty Exit should now reduce the reuse time of Escape.
Derision: The reuse timer in the AA window now shows the reuse time reduced by applicable AAs.
	  (although if you purchase an AA that reduces the reuse time, you must camp before the reduced reuse time will be updated).

REQUIRED SQL:

ALTER TABLE `aa_actions` ADD `redux_aa2` MEDIUMINT( 8 ) UNSIGNED NOT NULL DEFAULT '0',
ADD `redux_rate2` TINYINT( 4 ) NOT NULL DEFAULT '0';
UPDATE `aa_actions` SET `redux_aa2` = '886',
`redux_rate2` = '10' WHERE `aa_actions`.`aaid` =243 AND `aa_actions`.`rank` =0 LIMIT 1 ;

==05/05/2009==
Trevius: SoF - Melee stun/bash no longer causes you to spin
Trevius: SoF - Spell Fizzles and Interrupts no longer cause abnormally long refresh times
realityincarnate: Fixed lore check bug with items in lore group -1
KLS: DoTs should no longer break roots early.
KLS: Added Special Attack hit magical 'm' and special attack hit bane 'b', will allow the mobs affected to hit things that require magical or bane weapons to hit.

==05/04/2009==
KLS: Code block for pets getting sent into attack did not verify that other was not null, causing rare crashes the old way and a pretty common crash with it's new positioning.  This has been corrected.
Derision: Updated spell_type in altadv_vars table to reflect the shared reuse timer ID that it really is.
Derision: AA reuse timers should now display correctly with hotkeys remaining depressed when appropriate.
KLS: Code block for pets getting sent into attack did not verify that other was not null, causing rare crashes the old way and a pretty common crash with it's new positioning.  This has been corrected.
KLS: Added area rampage 'r' npc special attak code.
Congdar: Bots - Added Rogue Triple Backstab AA, Enhanced #bot list, Fixed beneficial weapon procs to not effect the entire group.
realityincarnate: Fix for SoF attunable items
realityincarnate: Added checks for multiple items in the same lore group
Congdar: Bots - Fix Cleric resurrect spell selection, Added zone profiles, Fixed crash with bot follow

REQUIRED SQL: utils/sql/svn/463_altadv_vars.sql

==05/03/2009==
KLS: Some optimizations for the aggro code.  Added a timer for aggro checking will do it twice a second by default: lower AItarget_check_duration in features.h if aggro feels too sluggish for your tastes and recompile.
Derision: Increased reuse_time in AA_DBAction to a uint32 to support reuse timers greater than 18 hours.
Derision: Code support for Chaotic Jester Veteran AA.
Congdar: Bots - Improve Cleric healing ai, fix ae break, update attack code.
Congdar: Bots - Fix sql error for bot table
KLS: (Secrets) min/max damage updated to int32
KLS: Fixed a bug with accuracy tweaks and finished them up.  The system should work fairly well now.
KLS: Removal of several rules associated with the dual accuracy system and the old system for defensive and offensive accuracy bonus.
KLS: Some warning fixes on MSVS.
KLS: Fixed pets not getting sent into battle on attack.
KLS: (theblaz) Pets who were previously guarding after a pet attack command will return to their guard spot; though it appears a stop moving packet is missing on the pet guard spot waypoint.
KLS: Rampage will no longer hit the main tank unless the main tank is the only target in range.
KLS: Swarm pets will once again disappear when their target dies.
KLS: Added zone zone profiling stuff.

==05/02/2009==
realityincarnate: Augment Item Info.
realityincarnate: Show helm option will now save on camping/zoning.
Derision: Corrected a few memory leaks.
Derision: 'Live'/Anniversary patches no longer registered.
Derision: Fix for random client crashes when combining items in world containers (e.g. augmenting items).
BWStripes: Fix for quest::echo.
erde: Added long zone name support to the web interface.
Cripp: Fix for the web interface for those using Perl 5.10.
Congdar: Bots - randomized face/hair etc. so they don't all look the same.  Fixed Bard AE songs.

==4/30/2009==
Congdar: Bots - bots can now use bows, new command '#bot archery'. Added Ranger archery AA's. Reduced chat mana spam. Tweaked spell ai. Fixed memory leak. Updated '#bot corpse summon'. 
Derision: SoF - AAs affecting stats now show the correct stats in the client.
Derision: Tweaked base resists to match the client.
gatorman: Fix for QuickSummoning AA (to include Call of the Hero)
Congdar: Bots - root/snare spell ai fix

==4/29/2009==
Trevius: SoF - Added rule for setting a startzone for SoF Clients separate from where Titanium Clients are set to start.  Set as Zone ID number.

optional sql: utils\sql\svn\447_sof_startzone_rule.sql

==4/27/2009==
Derision: SoF: Reading books/notes/scrolls now works.

==4/25/2009==
Derision: SoF: Ranged attack animations.
Derision: When shooting a bow, there is no longer a superfluous 1HS animation.

==4/23/2009==
Trevius: (realityincarnate) Added new quest command quest::varlink(item_id) for putting item links into variables. 
Derision: Fix for Tradeskill combines where a LORE ingredient is returned.
Derision: Fix for pet names containing spaces losing the space after zoning/camping.
Derision: Fixed bug where Return Home sent players bound in Grobb to Qeynos/Unknown Zone.

==4/22/2009==
Derision: When Tribute is manually deactivated, it should stay deactivated.
Derision: Tribute will not continually try and reactivate when you run out of tribute points.

==4/20/2009==
Derision: Added EVENT_PROXIMITY_SAY

==4/19/2009==
Wolftousen: Player Flurry rate was slightly increased
Wolftousen: Player Flurry messages will now show up as red text, but use the same filter as NPC flurry messages
Wolftousen: Rage Volley no longer requires you to have an thrown weapon in your ranged slot
Wolftousen: Rage Volley now uses the proper damage calculation and is not based on the item you have in the ranged slot
Wolftousen: Rave Volley can no longer be dodged/blocked/parried/reposted.
Wolftousen: Procs from Buffs have been tweaked to go off more often Wolftousen: Players will now receive the "proper" bonus HP for stamina above 255.
Wolftousen: Knight class Tactical Mastery AA was implemented and should now give the strike through message 
renoofturks: Created rule Aggro:StunAggroMod to dial in on aggro of stun based attacks.
cavedude: Reverse DS and some DS will now cause aggro on intial cast.
realityincarnate: Controllable boats should now work. Please see: http://eqemulator.net/forums/showthread.php?p=167892#post167892 for additonal information.
realityincarnate: Safe fall skill up is now checked on failure.

Optional SQL:

INSERT INTO rule_values VALUES(1,'Aggro:StunAggroMod',750);

==4/18/2009==
Derision: Changed Account Session Limiting to kick off the old connection and allow the new one.
drakelord: Rest State HP and MP Bonus
Derision: SoF - Combat/Rest state indicator now works.
Derision: No longer need to zone for /corpse to work.
Derision: Fixed Bazaar bug.

Optional SQL:

INSERT INTO rule_values VALUES(1,'Character:RestRegenPercent',0);
INSERT INTO rule_values VALUES(1,'Character:RestRegenTimeToActivate',30);

==4/13/2009==
Congdar: Bots - Fix release vs. debug compile for focus effects, updated bots to new attack code.

==4/13/2009==
Trevius: SoF - Corrected corpse looting slots so that the correct item is looted when there are multiple on a corpse
Trevius: SoF - Item Links from corpse looting messages now display properly for both client versions
Derision: Personal Tribute should now have an effect serverside, rather than just showing increased stats in the client.
Derision: Deactivating Tribute should no longer crash the client.
Derision: SoF - Personal Tribute should now work.

==4/12/2009==
Trevius: SoF - Commands that return itemlinks will now show the full name instead of cutting off the first 5 characters
Trevius/Derision: SoF - Fix for subitem serialization.
Derision: SoF - Corrected money update opcodes.
Derision: SoF - Bazaar Trader mode.

==4/11/2009==
Trevius: SoF - Stopped the bogus "Deleting Item" messages from being sent to SoF Clients
cavedude: (Congdar): You can now safely delete a key item after its been added to your keyring.
cavedude: (realityincarnate): Added quest::MerchantSetItem and quest::MerchantCountItem to add temp items to a merchantlist. See Wiki for usage.
cavedude: Added rule World:MinGMAntiHackStatus to manage the min status checked against the GM AntiHack list.
Derision: Sof: Added support for regular /who

==4/10/2009==
Derision: Tradeskill recipes involving weapons as an ingredient should no longer dupe the weapon.
Derision: Expendable items with charges are now deleted when the last charge is used.
Derision: Tradeskill skillups now based on unmodified skill level.
Derision: (realityincarnate): Prevent bard skillups for instruments they aren't trained in.
Derision: (realityincarnate): Implemented SE_Hunger (e.g. for Song of Sustenance).
Derision: (realityincarnate): Undying armor by setting RGB to 255 255 255 fixed.
Derision: (realityincarnate): Title suffix quest command, Syntax: $client->SetTitleSuffix(title)
Derision: (erde): cleanipc fix for GCC 4.3.2
Derision: (BWstripes): Beastlord pets are now named SoAndSo's Warder.

==4/09/2009==
Derision: Fix for Alchemy, Poison Making and Tinkering.

==4/08/2009==
Derision: Added $client->GetClientVersion(). Returns: 1 (6.2 Client), 2 (Titanium), 3 (SoF)

==4/07/2009==
Derision: Fixed crash in chatserver.
Derision: Fixed possible crash in QuestManager::attacknpc

==4/06/2009==
Derision: (Image): Check packet length is at least 4 bytes in EQStream::ProcessPacket
Derision: (Image): EQStreamFactory::ReaderLoop - Assure that the incoming buffer contains an opcode to analyze.
Derision: (Image): Sanity checks on OP_SessionResponse/OP_SessionStatRequest size in EQStream::ProcessPacket

==4/05/2009==
Derision: GM Training: SoF - Points now update correctly in the Training Window.
Derision: GM Training: Points now update correctly in the Training Window for languages.
Derision: GM Training: The correct amount of money is deducted from the player profile.
Derision: SoF - Mapped findable field in Spawn struct and OP_FindPersonRequest/Reply.
Derision: SoF - Duelling now works.
KLS: Compile option to ignore login fatal errors in world.

==4/04/2009==
Derision: Tracking: Now works in SoF and as a side effect, Tracking 'sort by distance' works properly in 6.2 and Titanium clients.

==4/03/2009==
Congdar: Bots - Added Healing and Lifetap AA's and Focus Effect support
Derision: SoF - Fix for incorrect animation (NPCs frozen/walking while standing still).

==3/29/2009==
Derision: SoF - OP_PetBuffWindow, OP_Charm, OP_Stun

==3/28/2009==
Derision: SoF - Tasks now work.
Derision: SoF - OP_Sacrifice, OP_Sound, OP_OnLevelMessage, OP_PopupResponse
Derision: Item Links in Task Descriptions are now formatted correctly based on the client version.

==3/25/2009==
Derision: 'Hack' to display Froglok/Drakkin corpses correctly.
Derision: SoF - OP_Translocate & OP_LevelAppearance

==3/23/2009==
Trevius: SoF - Corrected Right Click item effects so they no longer fizzle
Trevius: SoF - Right Clickable item effects with set recast delays now observe that delay properly
Trevius: SoF - Item Effect Charges now get used and updated properly
Trevius: SoF - Food and Drink are now consumed at the proper rates

==3/21/2009==
Derision: Implemented 'Your total time entitled on this account' in /played.

==3/20/2009==
Trevius: SoF - Fixed a fairly major crashed caused when attempting to use the 8 new bank slots, or shared bank
Trevius: SoF - Banking is now fully functional including the 8 new bank slots, shared bank and bag slots in the bank
Trevius: SoF - Bandolier and Potion Belt are now both functional
Trevius: SoF - Filled in multiple missing opcodes

==3/19/2009==
Trevius: SoF - Grouping should now be fully functional
Trevius: SoF - (Xinu) Added many missing opcodes
Angelox: Bots- More mobs for the "#bot track rare" filter.
Derision: Fixed memory leak in Chatserver /announce processing.

==3/15/2009==
Trevius: SoF - Tradeskill Objects/Containers and Augment Pools should now be fully functional
Trevius: SoF - PC to PC/NPC trading should now be fully functional without bugs
Trevius: SoF - Auto-Consume and Right Click consume of food/drink is functional
Trevius: SoF - Right Click Effects on Items now works in most cases, but needs coding to clean it up a bit
Trevius: SoF - Spell Interrupts are now functioning properly

==3/15/2009==
cavedude: (realityincarnate) Languages can now be taught to other players. Also implemented drunk speak.
cavedude: (realityincarnate) Bonuses will now properly apply when switching items with bandolier.
cavedude: (realityincarnate) Corrected some instances of Bard songs that were incorrectly requiring an instrument.
cavedude: (Wolftousen) Fixes for Rage Volley, Blur of Axes, and Dead Aim.
Derision: Spells that damage the caster will now do full damage.
Congdar: Spells that summon items with charges will now summon said item fully charged.
Angelox: Bots:Added a few more mobs to the "#bot track rare" filter.
Congdar: Bots - Added commands #bot saveraid, #bot spawnraid, #bot groupraid
	required sql: utils\sql\svn\386_bot_save_raid.sql

==3/14/2009==
Trevius: SoF - Tradeskill/Augment Combines in tradeskill containers/objects now works, but currently bugs players when they close the window.
Derision: Fixed bug when activating a bandolier set without a required item in your inventory.
Trevius: SoF - Identified more fields in the Spawn Struct; Face, LFG, Beard, ShowHelm and more

==3/13/2009==
Trevius: SoF - Added a few more encodes/decodes to resolve more slot change issues related to the addition of the Power Source Slot
Trevius: SoF - Ammo now depletes properly when used.  Probably some other minor issues resolved by this change as well.

==3/12/2009==
Trevius: SoF - AAs can now be trained and will update without needing to zone. Point Spent is still wrong.
Trevius: SoF - Char Select now shows Primary and Secondary items properly.

==3/10/2009==
Trevius: SoF - PC to PC/NPC Trading now works, though canceling a trade will bug the character and require them to zone or relog
Trevius: SoF - Players can now sell to merchants
Trevius: SoF - Corrected a bug introduced in Revision 376 that was causing single stackable items to not be stackable

==3/09/2009==
Trevius: SoF - Buffs and debuffs now last for the correct duration.

==3/08/2009==
Trevius: SoF - Corrected Item Struct to fix the issue with non-stackable items showing up as being stackable
Trevius: SoF - Identified an unknown field in Item Serialization as being item charges and set it accordingly so that items should now show accurate current charges.
Trevius/Xinu: SoF - Adjusted a few opcodes for more accuracy - No visible change yet

==3/07/2009==
Trevius: SoF - AAs now show up in the AA window, but do not give bonuses yet.
Trevius: SoF - Spent AA points are partially showing up, but still need work.
Trevius: SoF - Updated some grouping structs, but grouping still isn't working just yet
Trevius: SoF - Buffs can now be clicked off, but the duration still isn't working for them
cavedude: Added new AA, group, and raid EXP multiplier rules. Removed the associated variables.
cavedude: Removed the USE_RACE_CLASS_XP_MODS define as it was outdated and horribly broken.
cavedude: Added group XP bonus. The larger the group, the higher the XP gain.
cavedude: Added XP bonus for Warrior, Rogue, and Halfling.
cavedude: Corrected ZEM for AAs.
cavedude: (Thanks to demonstar55) Pet Affinity will no longer effect charmed pets.
cavedude: (realityincarnate) Bard songs that require instruments will now require them.

Please note: XP gain has pretty much been overhauled. You may need tweak the multiplier rules for your server. 

Optional SQL:

REPLACE INTO `rule_values` VALUES ('1', 'Character:ExpMultiplier', '0.5');
INSERT INTO `rule_values` VALUES ('1', 'Character:AAExpMultiplier', '0.5');
INSERT INTO `rule_values` VALUES ('1', 'Character:GroupExpMultiplier', '0.5');
INSERT INTO `rule_values` VALUES ('1', 'Character:RaidExpMultiplier', '0.2');

==3/03/2009==
Angelox: Fixed most (if not all) npc pet ghosting at zone safepoints.

==3/02/2009==
cavedude: (realityincarnate) Implemented Bard song Magical Monologue
cavedude: (Theeper) Attuneable items will now save over zoning/camping and will no longer auto-loot from corpses.
cavedude: Implemented quest::buryplayercorpse, similar syntax as quest::getplayerburriedcorpsecount. This will bury and depop the oldest of a specified player's unburried coprses. It will bury all corpses, but it only depops corpses in the same zone, or in zones that aren't currently open. Hopefully, somebody else out there can finish this one up so corpse summoners can be implemented.

==2/28/2009==
WildcardX: Begun work on LDoN expansion. Adventure Recruiter window is now operational.

==2/27/2009==
Trevius: SoF - Corrected the NewZone struct a bit, which fixed Fall Damage and Environment Damage
WildcardX: Implemented the rogue skill, Apply Poison. Includes support for the 6.0 client, Titanium and SoF.

==2/26/2009==
Trevius: Added #define options in /zone/attack.cpp to allow an easy switch to use the old hit change code until the new code is finalized.
Trevius: Added new rule MinRangedAttackDist for setting the Minimum Ranged Attack Distance
Trevius: SoF - Updated the SoF opcodes, one of which corrects a false Hacker message and log entry

Optional SQL:
364_ranged_dist_rule.sql

==2/25/2009==
KLS: Fix for backwards rule in anti-spam.

==2/24/2009==
KLS: Added initial anti-spam features to global chat operations at popular request.
KLS: Added option to turn off IP verification in chat and mail servers (for people who use internal networks and find it troublesome).
cavedude: Added peqzone column to zone to allow or deny access to zones using #peqzone.
cavedude: #peqzone will give you the approximate time remaining before reusing.
cavedude: Altered merchant price structure to better match Live. Created rules to govern its behaviour. See ruletypes.h for basic explanations!
cavedude: Added command #givemoney.
Trevius: SoF - Corrected WearChange Struct so primary and secondary items now show properly after zoning and #wc works as well.

Required SQL:
ALTER TABLE `account` ADD `karma` INT(5) UNSIGNED DEFAULT '0' NOT NULL AFTER `revoked`;
ALTER table zone ADD column `peqzone` tinyint(4) NOT NULL default '1';

Optional SQL: 360_peqzone.sql

==2/23/2009==
Trevius: (Xinu) SoF - Many more Opcodes filled in from the client
Trevius: SoF - Doors are now able to open and clickable portals now function as well
Trevius: SoF - Armor tint from dyes is now showing properly
Congdar: Bots: '#bot group remove' now removes any of your spawned bots, if it's a group leader then that whole group

KLS: Changes to combat:
-AC has a slightly higher chance to mitigate into a miss than before
-AC is no more effective per point but the bonus ac every character and npc gets in the calculation has been effectively increased.
-The accuracy falloff from level is now more variable based on defender's level, this should address the issue where at higher levels you can grind npcs that are still blue or light blue at little risk.
-The base chance to hit has been increased.
-Added both hit and avoidance mods for class types that are adjustable by rules.
-Archery now has an accuracy penalty that is rule adjustable, with ranger buffs the penalty should make it so archery is slightly more accurate than melee at default.
-Skill is now a flat 0.33% chance to miss for every point under your max skill you are.
-The benefit from agility to avoidance has been decreased by roughly 33%.
-Maximum chance to hit is now 95%, down from 99%.
KLS: Bug fix in skill up with the skill up mod rule.

Recommended SQL and Optional SQL:
356_combat.sql

==2/21/2009==
cavedude00: Removed Combat:ChanceToHitDivideBy rule. Default value is now Live Like.
	Required SQL: delete from rule_values where rule_name = 'Combat:ChanceToHitDivideBy';
Congdar: Bots: Revert svn328
	Required SQl:	delete from rule_values where rule_name = 'EQOffline:SpawnBotCount';
			delete from rule_values where rule_name = 'EQOffline:CreateBotCount';
			delete from rule_values where rule_name = 'EQOffline:BotQuest';
Congdar: Bots: UN-Revert svn328 + bug fixes
	(if you updated to svn354)
	Required SQl:	328_bot_management.sql
	Optional SQL:	328_optional_bot_management.sql

==02/19/2009==
Trevius: (Xinu) SoF - Many Opcodes filled in from the client
Trevius: SoF - Aligned the Player Profile a bit more.  Should be pretty accurate now
Trevius: SoF - Added Drakkin race again for use of equipment.  Should work correctly this time.

==02/19/2009==
KLS: SoF - Fix for ammo
Angelox: Bots: Fixed '#bot track' command
Angelox: Bots: Fixed broken entry in BotAI.cpp for '#bot track rare' command
Angelox: Bots: 'Fixed #bot gate airplane' typo
Congdar: Fix for Flash of Steel AA

==02/18/2009==
Trevius: SoF - Combat Damage message now show up in the chat window
Trevius: SoF - GM Skill Trainers will now actually train skills
Angelox: Bots: Added emerald, skyfire, hateplane, skyplane to command #bot gate.
Trevius: SoF - Backed out item stat fix for SoF due to it causing the problem to happen in Titanium

==02/17/2009==
Trevius: SoF - Added Drakkin race to the source so $race and probably other race related stuff can use it.
Trevius: SoF - Added multiple opcodes
Trevius: SoF - Cleaned up the patch_SoF.conf file some
Derision: SoF - Enter Tutorial/Return Home buttons work - Enter Tutorial directly on char creation does not.
Derision: SoF - OP_ZonePlayerToBind (no more disconnection on death).
Derision: SoF - Target nearest NPC (F8) now works.
Derision: SoF - /who all now works.
cavedude00: SellRate column in items will now help determine an item's sell price.
cybernine186: Optional system to ensure GMs are logging on from a known IP.
Trevious: SoF - Drakkin now gain stats from items and weapons now work for combat
Trevious: SoF - Drakkin now start with Common Tongue, Dragon and Elder Dragon Languages maxed

Required SQL: utils/sql/svn/340_gm_ips.sql 

==02/16/2009==
Trevius: SoF - The Item Struct should be aligned almost perfectly now.
Trevius: SoF - Merchant Lists, Buying and Selling are now all functional
Trevius: SoF - Looting Items and Currency from Corpses is now functional
Trevius: SoF - Item Links are now functional
Trevius: SoF - Combat animation is now functional
Trevius: SoF - More opcodes added/updated
Trevius: SoF - Titanium users will now see Drakkins (and any race over 473) as a normal Human race

==02/15/2009==
KLS: SoF - Item movement and bag support.
AndMetal: Augments are now visible when linking items.
Trevius: SoF - Adjusted the new Item Structure to align more fields
Trevius: SoF - Added OP_Consume and OP_LootRequest opcodes
cavedude00: (AndMetal) AAs now use skill_id instead of index for prereqs.
cavedude00: (demonstar55) Implemented Improved Instrument Mastery, Improved Singing Mastery, and Echo of Taelosia AAs.
cavedude00: Created Combat:ChanceToHitDivideBy rule and increased default value to 1250.
	Required and Optional SQL: utils/sql/svn/326_aas.sql
KLS: SoF - Fix for item slots in bags.
KLS: SoF - Added work around for client inventory, it should no longer crash and items shouldn't fail to load. *fingers crossed*
KLS: SoF - Implemented summon item packet.
Congdar: Bots - Expaneded BotCount Management
	required sql: utils/sql/svn/328_bot_management.sql
	optional sql: utils/sql/svn/328_optional_bot_management.sql


==02/14/2009==
Derision: SoF - New struct for OP_ExpansionInfo
Derision: SoF - Character Creation now works.
Derision: SoF - support now compiled in by default.
Derision: Small changes to compile SoF under Windows
KLS: SoF - initial inventory load.
KLS: Change to streams, streams will now initialize to an unestablished state instead of closed.  Prevents a race condition that would cause the client to hang on identification.
Trevius: SoF - Identified most or all needed fields in the illusion struct for future use.
WildcardX: Made Perl v5.10 the default for WIN32 compiles.
WildcardX: (Angelox) Added many header declarations to make gcc v4.3 happy.

==02/13/2009==
WildcardX: Compatibility for Perl 5.10. WIN32 compiles will still need to rename perl58.lib to perl510.lib.

==02/12/2009==
Trevius: Identified the Size, Eye Color and Texture fields in the SoF spawn structure.
Trevius: Added multiple Opcodes for SoF

==02/12/2009==
cavedude00: Added #findzone (#fz) command to aid in getting a zone's short_name or id.
cavedude00: #peqzone now accepts both short_name and zoneidnumber.

==02/09/2009==
Angelox: Bots:Added command '#bot corpse summon' for Necromancer.

==02/08/2009==
Trevius: Corrected Z Coordinate on clientupdates in SoF.  All Client and NPC positition structures should now be accurate
Trevius: Corrected the Object structure in SoF.  Objects should now all load in the correct location and size.
Trevius: Added a few new Opcodes for SoF.
Trevius: Corrected the Opcode for OP_RequestClientZoneChange - Zoning is now fully functional including zone commands

==02/07/2009==
cavedude00: Added faction modifiers for Berserker and Froglok.
Derision: Fixed item load failure when using MySQL 5.1.

Required SQL:
ALTER TABLE `faction_list` ADD COLUMN `mod_c16` smallint(6) NOT NULL default '0' AFTER `mod_c15`;
ALTER TABLE `faction_list` ADD COLUMN `mod_r330` smallint(6) NOT NULL default '0' AFTER `mod_r161`;

==02/05/2009==
Trevius: NPC coning is now working in SoF.
Trevuis: NPCs and Players can now be targeted in SoF.
Trevius: Corrected the illusion packet structure in SoF so helm change will work with the #fixmob command
Trevius: Adjusted the #fixmob and #race commands to allow up to 586 races (the max for SoF)
Trevius: Client Self position updates now report correct X, Y, and Heading in SoF, but still need Z corrected.
Trevius: All other position updates (NPC or other clients) now seems to be accurate.
Trevius: Names are now viewable over NPC and Player's heads
Angelox: Bots: charm level problem fixed.

==02/04/2009==
Derision: Fixed ammo consumption.

==02/02/2009==
Derision: Fix for temp merchantlists where a merchant has a single item with slotid=1

==02/01/2009==
Angelox: Bots:(leslamarch) corrected the'#bot gate [combines]' typo.
Angelox: Bots: Added '#bot dire charm'.
Angelox: Bots: Both 'charm' and 'dire charm' will now choose from three charmer classes.
Angelox: Bots: Added '#bot pet remove' (can't charm a mob while sporting a pet).
Angelox: Bots: Fixed exploit where player could remove charmed mobs at will.
Derision: Merchant lists with gaps should now not cause problems wih temporary merchant lists.
Derision: Logging to the eventlog table for trades with NPCs is now controlled by two rules rather than the loglevel variable.

Required SQL:
ALTER TABLE `eventlog` ADD `event_nid` INT NOT NULL DEFAULT '0';

Optional SQL:
INSERT INTO `rule_values` VALUES (0, 'EventLog:RecordSellToMerchant', 'false');
INSERT INTO `rule_values` VALUES (0, 'EventLog:RecordBuyFromMerchant', 'false');

==01/31/2009==
Trevius: Adjusted the NewZone Structure for SoF - Players can now move and spawns appear in place
Trevius: Adjusted the WearChange Structure for SoF - Armor shows, but need Tint to work still
Trevius: Adjusted the Object Structure for SoF - Objects now load, but need more work
Trevius: Added many new opcodes for SoF
Trevius: Adjusted when SendExpZonein is sent for SoF only
Trevius: Added new Opcode List file for SoF development purposes only

Note: You must move the patch_SoF.conf file from /utils into your server directory for the opcode updates

==01/31/2009==
Derision: Tweaks to temp merchant list window updates.
cavedude00: Renamed the AugSlotUnk items columns to AugSlotVisible.   

Required SQL: utils/sql/svn/292_augslots.sql 

==01/29/2009==
KLS: VC71 solution files.

==01/28/2009==
Angelox: Bots: Added a directory with the BOT Makefiles for Windows and Linux.

==01/27/2009==
Derision: Bazaar bug fix.
Angelox: Bots: Added command '#bot runeme' (Enchanter Rune spells) 

Optional SQL: utils/sql/svn/285_optional_bot_spell_update.sql (removes auto-runes)

==01/24/2009==
Trevius: Initial Addition of Secrets of Faydwer Patch files.  Must uncomment the #define in common/patches/patches.cpp to use SoF for now.

==01/22/2009==
Derision: Fixed a buffer overflow problem.

==01/19/2009==
cavedude00: Increased itemid limit to 120,000.
cavedude00: Meditate will now skill up at a more Live Like speed. 

==01/18/2009==
Derision: Fixed a cause of zone crashes.
Congdar: Worn items with charges will no longer delete when the charges are used up.

==01/17/2009==
Derision: Fixed several cases of integer overflow relating to moving large amounts of money around.
Angelox: Bots: Added command '#bot gate', for Druid Circles or Wizard Portals (Druid Primary).
Angelox: Bots: Changed BotCount to RULE_INT.

==01/16/2009==
Derision: Implemented voice macros (CTRL-V). Update your opcodes.
Derision: Food and drink should no longer be auto-consumed in the Bazaar
Derision: Added rule Spells:TranslocateTimeLimit. If >0, translocate must be accepted within this number of seconds.

Optional SQL: (Required to enable voice macro use on your server

REPLACE INTO `rule_values` VALUES (0, 'Chat:EnableVoiceMacros', 'true');

==01/14/2009==
Derision: Fixed makefile references for rulesys.o
Derision: Mapped field in LogServer_Struct to allow voice macro window to be opened (needs work on Opcodes to make it functional).

==01/12/2009==
Derision: Removed code that stole all your money if you logged on with more than 1 million of any denomination of coin on your person.

==01/11/2009==
Angelox: Bots: Added rule 'EQOffline:BotCount' defaults to 5, for desired amount of bots in the group - values are 0-5 (0 means bots are disabled, max limit is 5). 
Derision: Mail/Chatchannels: Added sanity check on packet size in EQPacket::ChatDecode.
Derision: Mail/Chatchannels: Increased stream timeout from 45 to 135 seconds.
Derision: Mail: Use correct opcodes for sending Headers.  **utils/mail_opcodes.conf updated**
Derision: Chatchannels: Recognise and ignore AFK command.
Derision: Chatchannels: Added uptime command (usage ;uptime or /chat uptime).
Congdar: Bots: Added Lore item check to command #bot inventory remove

==01/08/2009==
Congdar: Bots: Fix compile issue under linux for Visible Gear update.

Angelox: Bots: Updated required SQL, utils/sql/svn/250_bot_spell_update.sql (some spells were still being auto-casted)
Derision: Chatserver: Fix for crash when multiple connections are made in quick succession.

==01/07/2009==
Angelox: Bots: Added command '#bot charm' (requires enchanter in group). Charm does not work while Chanter has pet so I added the grouped Chanters pet to '#bot group remove' (remove the pet before #bot charm).
Angelox: Bots: '#bot sow wolf' should not affect pets anymore.
Derision: Chatserver: Added some extra syntax error checking to prevent crashes.
Angelox: Bots: Added Wizard class and level check to the '#bot evac' command
Angelox: Bots: Added '#bot invis see' for see invisible
Required SQL: 
DELETE FROM npc_spells_entries where (npc_spells_id >=701 and npc_spells_id <=712) AND spellid=80;
Congdar: Fix NPC::RemoveItem(uint16 item_id) to uint32 to work with items that have id's larger than 65535. '#npcloot remove [itemid]' will now successfully remove items with larger id's from npc loot.
Congdar: Bots: Visible gear will now show correctly when trading/equipping bots.

==01/05/2009
Angelox: Bots: Re-did command '#bot cure'- one of three Curer class (Cleric is primary), will ask what you want if you use '#bot cure' alone.

==01/04/2009==
Angelox: Bots: Added command '#bot endureb' (enduring breath).
Angelox: Bots: Hopefully fixed bug where other sowers replaced primary sower (Druid).

==01/03/2009==
Angelox: Bots: remade/improved commands '#bot levitate'and '#bot invis'

==01/02/2009==
Congdar: Bots: update command #bot inventory list   Now shows gear as item links.  Removed (Bot) as last name during bot creation.
Optional SQL: update npc_types set lastname='' where isbot=1;

==01/01/2009==
Angelox: Bots: Added command '#bot sow' (Druid has options) 
Angelox: Bots: Added command '#bot levitate'.
Angelox: Bots: Added command '#bot invis' - (has options).

Required SQL: utils/sql/svn/250_bot_spell_update.sql

Angelox: Bots: Added command '#bot resist' (has options, don't use optional sql if you don't want).

Optional SQL: utils/sql/svn/250_optional_bot_spell_update.sql

Derision: Added chatserver for Chat Channel support. mail_opcodes.conf updated in utils.
Derision: See: http://www.eqemulator.net/wiki/wikka.php?wakka=ChatChannels

REQUIRED SQL:

CREATE TABLE `chatchannels` (
  `name` varchar(64) NOT NULL,
  `owner` varchar(64) NOT NULL,
  `password` varchar(64) NOT NULL,
  `minstatus` int(5) NOT NULL default '0',
  PRIMARY KEY  (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

also see utils/sql/svn/249_chatchannels.sql for suggested system channels.

==12/31/2008==
Congdar: Bots: Added rule EQOffline:BotManaRegen default 1.0 is fastest. 3.0 is closer to player regen rates
Congdar: Bots: Added rule EQOffline:BotFinishBuffing default true. Allows out of combat buffing to complete even if the bot is out of mana.
Congdar: Bots: Fixed bug where bot ownership could change to somebody else.
Congdar: Bots: Added caster AA's for critical damage

==12/27/2008==
Trevius: Changed QueryLoot so that commands that use it (#npcstats & #npcloot show) will now show Item Links instead of just Item Names.
Trevius: Added Item Links to #peekinv
Trevius: Added new console command "LSReconnect" to allow manually restarting the auto Login Server connect loops if they stopped for any reason
Trevius: Added a Reconnect option in the Web Tool to allow auto Login Server connect to restart if it has stopped and is not connected already.
Derision: New program, mailserver, to implement in-game mail. See: http://www.eqemulator.net/wiki/wikka.php?wakka=MailServer,
	  or mailserver/readme.txt

Required SQL:

CREATE TABLE `mail` (
  `msgid` int(10) unsigned NOT NULL auto_increment,
  `charid` int(10) unsigned NOT NULL,
  `timestamp` int(11) NOT NULL default '0',
  `from` varchar(100) NOT NULL,
  `subject` varchar(200) NOT NULL,
  `body` text NOT NULL,
  `to` text NOT NULL,
  `status` tinyint(4) NOT NULL,
  PRIMARY KEY  (`msgid`),
  KEY `charid` (`charid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

ALTER TABLE `character_` ADD `mailkey` CHAR( 16 ) NOT NULL ;

==12/22/2008==
Trevius:(Denivia) Pets that are on Hold will now follow their master
Trevius:(Denivia) Pets will no longer try to attack corpses

==12/20/2008==
KLS: Removed old unused Guildwars, RaidAddicts and GroupLinking code.

==12/19/2008==
KLS: Updated how spawn timers work, spawn timers will now be based off absolute time like regular timers which will allow them to tic down even when the server is offline.
KLS: Quest::clearspawntimers() has been disabled for now, will be reactivated in next update on spawn timers.
KLS: Likewise #repop force has been temp. disabled as well pending updated code.
=Update=
KLS: Enabled Quest::clearspawntimers() and #repop force once again.
KLS: Added quest::updatespawntimer(id, duration) to update the respawn time of a dead mob, this only applies if the mob is dead and will only apply once: ie. once the mob repops and dies again it will use it's normal respawn time unless this is called again. Not completely tested.
KLS: creategroundobject constructor should create objects with max charges now. Untested.

Required SQL:
DROP TABLE IF EXISTS `respawn_times`;
CREATE TABLE `respawn_times` (
  `id` int(11) NOT NULL default '0',
  `start` int(11) NOT NULL default '0',
  `duration` int(11) NOT NULL default '0',
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

ALTER TABLE `spawn2` DROP `timeleft`;

==12/15/2008==
KLS: Added 2nd pass to heal aggro to correctly divide aggro between those recieved not just give all recieved full aggro.

==12/13/2008==
Derision: Fixed a couple of causes of combat related zone crashes.

==12/12/2008==
Derision: Name of the seller now reported correctly in the /buyer window.

==12/09/2008==
AndMetal: Added Client::MakeItemLink function, which allows for augments in Item Links. Can be used for Chat & Task windows. See zone/inventory.cpp for detailed notes on usage in the source.
AndMetal: Updated quest::itemlink & loot drops to use MakeItemLink.
AndMetal: (trevius) Fixed a small typo in utils/export_spells.pl.

==12/08/2008==
Trevius: Changed #itemsearch output to now place itemlinks for all items it outputs from the search
Trevius: Increased the max results of #itemsearch from 20 up to 50
Trevius: Added alias #fi as an abbreviation of #finditem, to shorten the command
Trevius: Changed the default required status for accounts to access item search commands to min status of 10 (previously 0)

==12/01/2008==
Trevius: Moved mounts (Horses/Drogmors) into their own table instead of them being hard coded in the source.

Required SQL: utils/sql/svn/235_horses_table.sql

==11/26/2008==
cavedude00: Traps will no longer be trackable.

==11/24/2008==
AndMetal: Spells can now be loaded from the database, and is now enabled by default. Use utils/import_spells.pl to import, utils/export_spells.pl to export. Use -h on either for usage.
Trevius: Food and Drink will now actually give stats.

Required SQL: utils/sql/svn/229_spells_table.sql

==11/22/2008
Trevius/AndMetal: Corrected the output of #showstats to provide accurate Attack Rating calculations.
Derision: Initialise animation to zero in the Mob constructor to prevent players sometimes appearing to run off when they first spawn.
Derision: /buyer /barter fix.
Trevius: Added Account Limiting to allow limiting how many characters can be logged in per account at once - See Optional SQL.

==11/20/2008
Derision: Implemented /buyer (cash compensation only) and /barter. Update your patch_Titanium.conf from the utils directory.

REQUIRED SQL:

DROP TABLE IF EXISTS `buyer`;
CREATE TABLE `buyer` (
  `charid` int(11) NOT NULL,
  `buyslot` int(11) NOT NULL,
  `itemid` int(11) NOT NULL,
  `itemname` varchar(65) NOT NULL,
  `quantity` int(11) NOT NULL,
  `price` int(11) NOT NULL,
  PRIMARY KEY  (`charid`,`buyslot`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

ALTER TABLE `trader_audit` ADD `trantype` TINYINT NOT NULL DEFAULT '0';


==11/20/2008
cavedude00: (aza77) Added quest::collectitems.
cavedude00: (Rocker8956) Zones with IDs higher than 255 can now be instanced.

==11/19/2008
seveianrex: (Varkalas) WAR Sturdiness AA Fix
AndMetal: zone-*.log files on Linux will allow read access to group members. You may need to erase any existing logs to see the change.
AndMetal: Added some logging for spell crits (SPELLS__CRITS)

==11/18/2008
Derision: Bazaar: Added support for changing prices without ending Trader mode.

==11/16/2008
Derision: Added command 'undyeme' to restore all a player's armor slots to their natural undyed state.
Trevius: (Denivia) Changed Expansive Mind AA so that it raises the Worn Mana Regen Cap (as it should) instead of just increasing mana regen.
Derision: Bazaar bug fix relating to items with -1 max charges.

Optional SQL:

INSERT INTO commands (command, access, description) VALUES ('undyeme', 0, 'Remove dye from all of your armor slots');

==11/15/2008
seveianrex: Implemented AA use of SE_Accuracy (Ranger GoD AA "Precision of the Pathfinder" will have an effect now)
seveianrex: Implemented Enchanter GoD AA "Mesmerization Mastery"
seveianrex: Adjusted Monk Kick Mastery damage modifiers slightly.
Derision: Using Find Trader in the Bazaar will teleport you to the Trader.
Derision: Added Rule Bazaar:EnableWarpToTrader, default true.
Derision: Added Rule World:TutorialZoneID, default 189 (tutorialb).
Derision: MinPrice/MaxPrice in the Bazaar search window are now interpreted correctly as values in Platinum.
Derision: Bazaar bug fix.

==11/14/2008
seveianrex: Adjusted Coat of Thistles AA modifier.
seveianrex: Implemented Pet Crits for NEC/MAG/BST (Deaths Fury, Elemental Fury, Warders Fury GoD era AAs)
Derision: Bazaar Trader mode (not Barter). Please test it well.
Derision: Updated OP_ShopDelItem for Titanium.

REQUIRED SQL:

DROP TABLE IF EXISTS `trader`;
CREATE TABLE `trader` (
  `char_id` int(10) unsigned NOT NULL default '0',
  `item_id` int(10) unsigned NOT NULL default '0',
  `serialnumber` int(10) unsigned NOT NULL default '0',
  `charges` int(11) NOT NULL default '0',
  `item_cost` int(10) unsigned NOT NULL default '0',
  `slot_id` tinyint(3) unsigned NOT NULL default '0',
  PRIMARY KEY  (`char_id`,`slot_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `trader_audit`;
CREATE TABLE `trader_audit` (
  `time` datetime NOT NULL,
  `seller` varchar(64) NOT NULL,
  `buyer` varchar(64) NOT NULL,
  `itemname` varchar(64) NOT NULL,
  `quantity` int(11) NOT NULL,
  `totalcost` int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

UPDATE doors set opentype=155 where opentype=154 and zone='bazaar';

==11/12/2008
Congdar: Bots: add command #bot lore - Casts Identify on the item on your mouse pointer
seveianrex: Tweaked the Slay Undead damage to once again. Damage should be in-line with live numbers now.
Angelox: (Kobaz): Fix for 'PIC register bx clobbered in asm' error
Angelox: Improved filtering on [bot track rare] option for Ranger
Angelox: Added option [bot track near] for Ranger

==11/11/2008
Congdar: Bots: fix ghosting when runnning up to targets

==11/10/2008
Trevius/Derision: Fix for GM Training Point exploit when de-leveling and leveling up again

==11/10/2008
Derision: Implemented Looking For Group/Looking For Players Window. patch_Titanium_conf has been updated.
Derision: Visual Studio users should add world/lfplist.h and world/lfplist.cpp to their project.

REQUIRED SQL:

ALTER TABLE `character_` ADD `lfp` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT '0';
ALTER TABLE `character_` ADD `lfg` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT '0';

==11/08/2008
Congdar: Bots: add command #bot resurrectme
Congdar: Bots: modify heal ai, more mana calcs
Congdar: Added Rule to allow melee to bind anywhere casters can bind, default is false
optional sql:
	insert into rule_values values (1, 'Character:BindAnywhere', true);
seveianrex: Figured out what was crashing ranged procs. Is fixed and fully implemented now. Rangers rejoice..
seveianrex: Modified the way #melody works to improve the delay between songs being casted. Bards rejoice..

==11/07/2008
seveianrex: GoD Rogue AA's: Seized Opportunity, Triple Backstab implemented
seveianrex: (LeftRoad) Provide a damage message to client when mob is killed by a spell
Congdar: Bots: reduce spam, fix crash when fighting Dain, change mana/hp from npc to client like calcs
Congdar: make heading calculation more efficient, change sint8 to float for float calculations and heading variable
seveianrex: Added #melody as a supplement for /melody until the OPcode can be located. Don't forget to:

INSERT INTO commands (command, access, description) VALUES ('melody', 0, 'A supplement for /melody until the OP code is found.')

seveianrex: Added support for defensive and ranged spell-effect based procs. Having some zone-crash issues with the ranged proc code for some reason, so it's commented out until I can fix it.

==11/05/2008
Derision: Dyed armor color should now show up correctly to other players.
Derision: Implemented the Potion Belt.

==11/03/2008
seveianrex: Added some scaling to the way NPC hitboxes are calculated. This corrects some of the issues with mobs like Wurms/Dragons who you could hit from miles away.
seveianrex: NPCs who are 5% HP or lower, are fleeing, and have a decent snare on will no longer cover so much distance.
seveianrex: Implemented Mob::GetSnaredAmount() function, utilized in the above. Returns the ABS() value of the snare.

==11/01/2008
seveianrex: GoD AA Implementations: [CLR] Touch of the Divine, [BRD] Internal Metronome, [SHD] Improved Consumption of the Soul
Derision: Allow backtick through the CleanName filter.
Derision: Pickpocket should no longer occasionally bug the UI.
Derision: Pickpocketing money should no longer show twice the amount taken in the client.
Derision: Looting stackable PVPItem now works.
Derision: Client now updates correctly when a charge on an item with a right click effect is used. Update your patch_Titanium.conf

==10/31/2008
seveianrex: Monk updates: Strikethrough AA, Mend Worsen Frequency Tweak, Kick Mastery AA Fix
seveianrex: Implemented Pet Flurries for MAG/BST/NEC
Derision: Extended quest::popup to take optional PopupID and buttontype (OK or YES/NO) fields.

==10/30/2008
KLS: Spell crits should work reasonably well once again.
Derision: Fixed inability to jump introduced in Rev161.

==10/29/2008
Derision: Mobs in water should no longer sink to the bottom.
cavedude00: Added rule to enable DeathExpLossMultiplier, or to use server code default.

Optional SQL:
Insert into rule_values values (0, 'Character:UseDeathExpLossMult', 'true');

==10/27/2008
seveianrex: Added server-side code for WAR sturdiness AA
Angelox: (Cbodmer) Experience loss based on cbodmers formula with added rule to regulate loss amount
Trevius: (Denivia) Added Critical Spell Damage for Lifetaps with the proper AAs

Optional SQL (options are 0-10, defaults to 3):
Insert into rule_values values (0, 'Character:DeathExpLossMultiplier', 3);

==10/26/2008
Derision: Implemented Bandolier. Test thoroughly before trusting it with your Epic.
Derision: Minor change to enable the spell Tiny Companion to work.

==10/25/2008
seveianrex: Slay Undead tweak + message gender fix, Tradeskill message gender fix
Trevius: Updated SQL file for R142 to correct some altadv_vars AA table issues with AA requirements

==10/24/2008
seveianrex: Implemented various GoD AAs: Coat of Thistles, Rapid Strikes, Elemental Durability, Subtlety2, Strengthened Strike, Vicious Smash
seveianrex: Implemented GoD Monk AA "Kick Mastery"
Trevius: Adjusted the new Frenzy AAs code to fix a crash
Trevius: Removed the Shield Block for Paladin/SK AA until code is revised and working
Trevius: (Denivia) Added Advanced Theft of Life and Soul Thief for Necros and SKs
Trevius: (Denivia) Added Death Peace AA
Trevius: (Denivia) Added Blur of Axes and Vicious Strike AAs for Berserkers
Trevius: (Denivia) Added Shield Block AA for Paladin/SK
Derision: 'Killing' LDoN chest type objects(e.g. Vermin Nests) will now update kill activities.
KLS: Revert Lag fixes that were causing movement and facing abnormalities.
KLS: Fix to a few problems with quest::creategroundobject that was causing it to not work in some situations.

==10/23/2008
Congdar: Clone NoDrop removal code to NoRent, Lore, NoTrade.  Optionally enabled in the db Variables table DisasbleNoDrop=1 DisableNoRent=true DisableLore=1 DisableNoTrade=1
Congdar: Bot code cleanup, method call reduction
Congdar: Bot DoubleAttack method is more like clients
Congdar: Remove AFK leveling with bots
Angelox: Added command '#Bot evac' for Druid bots 
Angelox: Added command '#Bot target calm' for Enchanter or Cleric bots 
Trevius: Removed the * 10 multiplier from the SE_ProcChance since it isn't needed
KLS: Zone appearance should update for players zoning.
KLS: Added command #modifynpcstat
KLS: Added quest::modifynpcstat(identifier, value)
KLS: Fix potential crash in MobProcess
KLS: Added decay option to CreateGroundObject
KLS: Added spelltype mez(2048) and spelltype in combat buff(1024).
KLS: Setting level for npcs will now update their spawn level too.
KLS: Fix potential memory leak in item link code.
KLS: Changed resists a bit.
KLS: Added rule: Spells:ResistPerLevelDiff(85) 8.5 resist points per level diff
KLS: Added rule: Combat:BaseHitChance(54.0)
KLS: Added rule: Combat:HitPerLevelDiff(145) 45% per level diff
KLS: Added rule: Combat:AgiHitFactor(0.015)
Derision: Added 'Repeatable' column to to tasks table. Default 1 (true).

Required SQL:

ALTER TABLE `tasks` ADD `repeatable` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT '1';

==10/22/2008
AndMetal: Fix for item links to prevent occasional zone crashes
AndMetal: Critical DOTs should now work correctly
AndMetal: Fixed sql/svn/125_aggrozone.sql to work with current command table schema
AndMetal: (Theeper) Shared Bank platinum. Added rule Character:SharedBankPlat(false) to enable since it is possible to dupe plat with multiple characters logged in on the same account at the same time
AndMetal: Fixed a few random compile warnings
Angelox: Bot Tracking improves as levels increase.
Angelox: Druid Bot is now next best tracker
AndMetal: Support for +Stat Cap (Wunshi's Focusing, etc)
AndMetal: New rules for tweaking spell crits: Spells:BaseCritChance(0), Spells:BaseCritRatio(0), Spells:WizCritLevel(12), Spells:WizCritChance(7), Spells:WizCritRatio(15)
AndMetal: Loot messages will now have item links instead of just the item name

==10/21/2008
KLS: Some changes to make compiling with profiler enabled more error free.
KLS: Added player quest event EVENT_TASK_STAGE_COMPLETE exports $task_id and $activity_id.
KLS: Added player quest event EVENT_PICK_UP exports $picked_up_id for when a player picks up a ground spawn or dropped item.
KLS: Added quest::CreateGroundObject(itemid, x, y, z, heading) which lets the quest script create ground objects in the zone like if they had been dropped.
KLS: Objects should decay after they're loaded back into the world. Might want to backup your objects table till I can confirm this works 100%.
KLS: Lowered ground object decay time from 30 min to 5 min.

==10/20/2008
AndMetal: (erde) Moved SVN SQL updates to utils/sql/svn. File name will start with the revision they were introduced & optional updates have optional somewhere at the beginning of the name
Derision/Trevius: Implemented sub EVENT_AGGRO_SAY
AndMetal: Implemented Reverse Damage Shield
AndMetal: Fixed +Damage Shield on items so that it doesn't work without having a Damage Shield spell first
AndMetal: (seveianrex) Hate w[h]iped on CoH
AndMetal: (via Yeahlight) New command: #aggrozone. Requires 100 status by default

==10/19/2008
Angelox: Added a start to Bot tracking - Thanks Derision for all the help and know-how. 
Derision: Altered damage shield message processing to be more like (the same?) as live.
Derision: If it exists, damage shield types are read from a new table (damageshieldtypes)
Derision: If no entry exists in the table, a default based on resist type is used.

Optional SQL: See utils/sql/damageshieldtypes.sql

==10/18/2008
KLS: Reworked classic style traps.
KLS: Debuff style traps should function perfectly, the level field in the DB gives what level the caster is for resists in this case.
KLS: Added respawn and respawn variance to traps.
KLS: Increased range on sense traps.
KLS: Sense trap will now point the player in the direction of the trap they are sensing.
KLS: Disarm trap will no longer use sense trap's timer.
KLS: Disarm trap will no longer fail to disarm traps on success.
KLS: Increased range on disarm trap slightly.
KLS: Change to MakeRandomInt() and MakeRandomFloat()
KLS: Int generation be nearly 100% or more faster in most cases and float generation should be slightly faster in most cases
cavedude00: (seveianrex) Slay Undead Fix 
cavedude00: (seveianrex) Levitate effect will no longer be removed in cases where you have two stacked lev spells and the first wears off. 
cavedude00: (seveianrex) Hate list will now be cleared following CoH
cavedude00: (seveianrex) Group members will now see tradeskill emotes. 

Required SQL:
ALTER TABLE `traps` DROP `spawnchance`;
ALTER TABLE `traps` ADD `respawn_time` INT(11) UNSIGNED DEFAULT '60' NOT NULL AFTER `skill`;
ALTER TABLE `traps` ADD `level` MEDIUMINT(4) UNSIGNED DEFAULT '1' NOT NULL AFTER `skill`;
ALTER TABLE `traps` ADD `respawn_var` INT(11) UNSIGNED DEFAULT '0' NOT NULL AFTER `respawn_time`;

==10/17/2008
KLS: Tweaks to /pet attack
KLS: Renamed WhipeHateList to WipeHateList so I never have to view that spelling monster ever again.
cavedude00: (Rocker8956) Added shutdowndelay to zone query.

==10/16/2008
Derision: Cosmetic change to foraging to correctly identify food/drink items.
cavedude00: Added rules to determine if /ooc and /auction should be server wide (true) or zone wide (false - Live Like).
cavedude00: #peqzone can no longer be used if invulnerable.
KLS: More changes to proc code.  Added an option of calc. proc rate based on speed of the weapon
KLS: Added Rules: Combat:AdjustProcPerMinute(true), Combat:AvgProcsPerMinute(18.0), Combat:ProcPerMinDexContrib(0.075), Combat:BaseProcChance(0.035), Combat:ProcDexDivideBy(11000)
KLS: Tweak to monster AI to hopefully save computation.

Optional SQL:
insert into rule_values values (0, 'Chat:ServerWideOOC', 'true');
insert into rule_values values (0, 'Chat:ServerWideAuction', 'true');

==10/15/2008
Derision: Added OP_LevelAppearance to utils/patch_Titanium.conf and it is now sent to nearby clients (eye candy when you level)
Derision: (seveianrex) Alcohol Drinking / Skillup Fix
KLS: Change to proc code to correct some oddities with % chance to proc.
KLS: Changed how avoidance bonuses are calculated to be like other melee bonuses.
KLS: (seveianrex) Basic Pet Focus Implementation.

==10/14/2008
Trevius: Charm Spells set to max level of 0 now have unlimited max level as they should
Derision: Player pets should no longer be fearable if npcspecialattks contains 'D'.
cavedude00: (Rocker8956) Changes to quest::getlevel and quest::setinstflag/setinstflagmanually to reduce DB access
cavedude00: (Rocker8956) Added quest::getinstflag
KLS: Fixed crash in shutdown delay, please test things for crashes before adding them, this was pretty obvious.
Derision: Removed requirement to be grouped for Translocate spells.

==10/13/2008
Derision: Looting your corpse while liched/wolf form etc should now auto-equip items

==10/12/2008
Derision: No more binding wounds while feigning death.
Derision: (Rocker8956) Movegrp quest command fix.
Derision: (LeftRoad) TEMPORARY(NORENT) items in a character inventory will be retained if you log back into that character within 30 minutes.
KLS: Implemented Raid::TeleportGroup() and Raid::TeleportRaid(), untested but should work.
KLS: (seveianrex) Critical DoT and Sinister Strikes AA.

==10/11/2008
Derision: Resurrection fix.
KLS: Rebalanced skill ups.

==10/10/2008
AndMetal: Added functions to calculate AA bonuses just like item & spell bonuses (not turned on yet)
Condgar: Fix for Bots wont Attack
Congdar: Fix low level bots hitting too hard
Derision: Prevent two instances of possible zone crashes due to null pointers.
Trevius: (Striat) Added quest commands for zone and world emotes - quest::ze() & quest::we()
Derision: Recalculate Pet bonuses on zoning before setting current HP/Mana.

==10/09/2008
Congdar: Replace Client IsEngaged() checks in Bot Source with bot aggro check
Trevius: (AndMetal) Added quest Object SetOOCRegen() to adjust NPC Out of Combat Regen on the fly.
Trevius: Relocated the Empty Corpse check code so that the Decay Time rule for it will now work.
Trevius: Removed the Level 70 cap on the #traindisc <level> command.
Trevius: Added optional rule to allow Max Level Attainable via experience to be set independant of other Max Level rule checks.
Derision: Reworked code to stop mobs fleeing if they have buddies to account for recent hate_list changes.

Optional SQL:
Insert into rule_values values (0, 'Character:MaxExpLevel', 0);

==10/08/2008
Congdar: Fix orphaned bots when camping/zoning
Congdar: Link bot assist with client auto attack
Derision: Added #titlesuffix command to add a title after a player's name.

==10/07/2008
Congdar: Allow bot pets to be the main tank in a bot raid
Congdar: Remove old Sense Heading skill check
AndMetal: Web interface will now list open petitions.
Derision: #title should now prefix the target player's name, e.g. #title Lord_Protector (underscores are replaced with spaces, max 31 chars)

==10/06/2008
Angelox: Fix Bot names in group window (now is 'Mybot' instead of 'Mybot000')
cavedude00: (erde) Fix for world and zone crashing when compiled on VS 2008 in release mode.
cavedude00: (Rocker8956) Zone shutdown timer rule.
cavedude00: Added cleanipc to makefile.

Required SQL:
ALTER TABLE `zone` ADD column `shutdowndelay` bigint (16) unsigned NOT NULL default '5000';
INSERT INTO rule_values VALUES (1,'Zone:AutoShutdownDelay', 5000);

==10/05/2008
Derision: Total time playing <character> in /played now maintained across sessions.
Derision: Corrected OP_DuelResponse/OP_DuelResponse2/OP_Shielding opcodes in utils/patch_Titanium.conf

==10/04/2008
Congdar: Double Attack redo, tested working
Congdar: Fix Bot follow bug when a bot gets killed
Derision: Added minlevel and maxlevel fields to tasks table and new quest function istaskappropriate(task).
Derision: All tasks in a TaskSet with a taskid of 0 as one of it's entries are now available to a player, subject to level restrictions.
Derision: (Spoon/Andmetal) Rez spells with effectdescnum != 82 or 39067 (6.2 spells_us) will give 100% Mana/HP restoration and no rez effects.
Derision: Corrected message when interrupting a spell with Shift-S.
Derision: Fix to display Frogloks correctly in /who all and /who all froglok (half of the change came from a post by Theeper on the forums).

Required SQL: 
ALTER TABLE `tasks` ADD `minlevel` TINYINT UNSIGNED NOT NULL DEFAULT '0',
ADD `maxlevel` TINYINT UNSIGNED NOT NULL DEFAULT '0';

==10/03/2008
Congdar: Add EQOffline Bot Source
Derision: Removed 'stepped' column from task table. See http://eqemulator.net/forums/showthread.php?p=157613
Derision: Added display of Task Description to #task show to aid in debugging a reported problem.
Derision: Lowered default required status for #task command from 250 to 150 for debugging purposes.
KLS: Removed some lingering printf from the raid stuff.
KLS: Auto attack code changed to not use target, instead we save the first target and now always use that.
KLS: Hate list will no longer work for non ai controlloed player characters.
KLS: Fix to crash in monk special attack function.

Required SQL: ALTER TABLE `tasks` DROP `stepped` ;

==10/02/2008
KLS: (Congdar) Update to Tech. of Master Wu AA.
KLS: Revert of double attack change, people reporting non warriors were no longer double attacking properly.
KLS: Compile Warning in Database::GetZoneName()
KLS: Change to IsPlayerIllusionSpell() to make it more consistant, illusion spells can be more than 49 so we work off behavior and effect now.
KLS: Added AA__Message logs to project illusion code to try to track down an error.

==10/01/2008
Derision: (erde) VS2008 Compile Fix (#if (_MSC_VER < 1500) #define vsnprintf _vsnprintf #endif
Derision: Fix to stop zone crashing when looting PVPItem and PVPReward is set to 3.
cavedude00: Group members will no longer recieve a split when a player corpse is looted.

==9/30/2008
Derision: Task activities with an activitytype of <= 0 in the activities table will be sent with an activitytype of 9 to the client.
Derision: The reward field in the task table will now be displayed even if rewardid=0
cavedude00: (Rocker8956) Added quest function to get average group/raid level.
cavedude00: (Rocker8956) Changes to setinstflagmanually to allow deletion of instance flags and to allow manual flagging of raids, groups, and individuals.

==9/29/2008
cavedude00: Added rule World:ClearTempMerchantlist to control whether world clears temp merchant items when started or not.
AndMetal: (Congdar) New Double Attack logic
Angelox: Keyring code fix, so clicky portals that require keys will work too.
AndMetal: Added AAs: Discordant Defiance, Blacksmithing Mastery, Baking Mastery, Brewing Mastery, Fletching Mastery, Pottery Mastery, Tailoring Mastery, Packrat, Expansive Mind, Veteran's Wrath, Advanced Fury of Magic Mastery, Destructive Fury
AndMetal: Ayonae's Tutelage should now calculate bonus for Singing

Optional SQL:
insert into rule_values values (0,'World:ClearTempMerchantlist','true');

==9/28/2008
AndMetal: Fixed exploit for pets ignoring Fear by using /pet commands
AndMetal: #wp add will now use the highest value in the grid_entries table + 1 if you don't use a Waypoint # or use 0

==09/26/2008
cavedude00: (AndMetal) Deathblow AA
cavedude00: (AndMetal) Swift Journey AA
cavedude00: (AndMetal) Convalescence and Healthy Aura AAs
cavedude00: (AndMetal) Slippery Attacks AA
cavedude00: (trevius/Derision) Additional IP limiting rules
cavedude00: (Congdar) Further PC main and second hand attack fixes
cavedude00: (Derision) Fix for percent heals
cavedude00: (Theeper) Fix for quest:itemlink() 
cavedude00: (Rocker8956) More work on zone instancing

Optional SQL:
Insert into rule_values values (0, 'World:AddMaxClientsPerIP', -1 );
Insert into rule_values values (0, 'World:AddMaxClientsStatus', -1 );

==09/25/2008
cavedude00: (trevius) IP Limiting Minor Fix
cavedude00: (trevius) New Quest Command quest::clearspawntimers()
cavedude00: (trevius) New Quest Command quest::traindiscs()
cavedude00: (trevius) Enraged, Flurry and Rampage Spamming Fix
cavedude00: (seveianrex) Implemented Project Illusion AA
cavedude00: (seveianrex) Corrected AA ding message
cavedude00: (Congdar) PC main and second hand attack fixes
cavedude00: (Cantus) 2H weapon damage bonus
cavedude00: (Derision) /who all friend
cavedude00: (Derision) All merchants will now show player sold items correctly
cavedude00: (Derision) Enter tutorial and Return Home buttons during char creation/select
cavedude00: (Derision) Implemented Task system
cavedude00: (Derision) Implemented Translocate and Sacrifice Confirmation Boxes
cavedude00: (Derision) Client popup window
cavedude00: (James76) Implemented keyring
cavedude00: (AndMetal) Corrected Technique of Master Wu AA
cavedude00: (AndMetal) Corrected some proc spells not working after zoning
cavedude00: (Hugghiebear) Charm will now fade if invis is cast
cavedude00: (AiliaMorisato) New command #advnpcspawn and related functions
cavedude00: (Rocker8956) Preliminary zone instancing
cavedude00: (KLS) Implemented raid system
cavedude00: Fixed autosplit (Thanks WildcardX!)
cavedude00: New command #peqzone
cavedude00: Several minor forage/fishing fixes

Required SQL is in utils/sql/09252008.sql
Make sure you update your .conf files, also found in utils!

==09/01/2008
KLS: (derision) Crash Fix.
KLS: (haecz) Non-Melee damage filter.
KLS: (LordKahel) Lore Slotted Augment.
KLS: (Spider 661 via trevius) Chaotic Potential AA
KLS: (Derision) OP_Sound update for titanium.
KLS: (ndnet via trevius) MQ Illegal Item Equip Detection
KLS: Modified faction modifiers for buying/selling.
KLS: (AndMetal) Spell blocking implementation
KLS: (Derision) Resurrection confirmation
KLS: (Cripp) Delete stale corpse backup typos
KLS: (AndMetal) CHA stacking buff bug resolved.

Required SQL:
CREATE TABLE `blocked_spells` (
  `id` int(11) NOT NULL auto_increment,
  `spellid` mediumint(8) unsigned NOT NULL default '0',
  `type` tinyint(4) NOT NULL default '0',
  `zoneid` int(4) NOT NULL default '0',
  `x` float NOT NULL default '0',
  `y` float NOT NULL default '0',
  `z` float NOT NULL default '0',
  `x_diff` float NOT NULL default '0',
  `y_diff` float NOT NULL default '0',
  `z_diff` float NOT NULL default '0',
  `message` varchar(255) NOT NULL default 'You cannot cast that spell here',
  `description` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
)

==08/15/2008
KLS: Fix for groups clearing on new group create.
KLS: Fix for null row access in Database::GetLeaderName()
KLS: CountDispellableBuffs now will validate buffs spells.

==08/14/2008
KLS: Very basic work on raids.
KLS: Moved group id calls to their own database as to not be blocked by long character_ selects and such.

Required SQL (Your groups will break completely without this):
CREATE TABLE `group_id` (
  `groupid` int(4) NOT NULL,
  `charid` int(4) NOT NULL,
  `name` varchar(64) NOT NULL,
  PRIMARY KEY (`groupid`, `charid`)
)
ENGINE = InnoDB;

==08/13/2008
KLS: Added dispel field for npc spells as 512.
KLS: NPCs should be smarter about when they choose to cast certain spells; namely dots, lifetaps and dispels.
KLS: NPCs should continue to cast nuke spells for a longer period of time.
KLS: NPCs will no longer have a 2-3 sec forced delay between spell casts; it is now whatever the recovery time of the spell is just like players, beware.
KLS: (trevius) Change to npcAI recast delay cap 1000->10000 seconds.
KLS: Increased amount of mana npcs gain from int and wis.
KLS: New rule: NPC:CorpseUnlockTimer (150000) 2.5 min default on corpses being unlocked after loot instead of decay time / 2
KLS: New rule: NPC:EmptyNPCCorpseDecayTimeMS (0) empty npc corpses will decay after this long + 1000MS on the ground.
KLS: More changes to groups: text should now be correct in *almost* all situations.
KLS: Groups should stay synced in almost all situations and leader disbanding should be smoother.
KLS: Groups will clear their info on the aquisition of a reused id.
KLS: .conf file from earlier /rewind change should be correct now make sure to update it if you want it to function.

Optional SQL:
UPDATE npc_spells_entries SET type='512' WHERE spellid='48';
UPDATE npc_spells_entries SET type='512' WHERE spellid='49';
UPDATE npc_spells_entries SET type='512' WHERE spellid='1526';
UPDATE npc_spells_entries SET type='512' WHERE spellid='1697';

==08/11/2008
KLS: Group leader info should transfer to a new zone when the leader transfers to that zone.
KLS: Will now force a group update to players not in zone, text not correct.
KLS: Added #refreshgroup command - will refresh group visually from DB
KLS: Deleting stale corpses will now bury corpses instead of make them decay if shadowrest is enabled.
KLS: Small change to temp merchant lists with regards to charges.
KLS: Initial implementation of Technique of Master Wu
KLS: Spell's fizzles will now base their mana cost on the correct amount.
KLS: Tweak to spell casting expertise and mastery of the past
KLS: Hopefully fix to AEUndead spells hitting more than undead

Required SQL (Your groups will probably break completely without this):
CREATE TABLE `group_leaders` (
  `gid` int(4) NOT NULL,
  `leadername` varchar(64) NOT NULL,
  PRIMARY KEY (`gid`)
)
ENGINE = InnoDB;

==08/09/2008
KLS: Minor tweaks to heal aggro.

==08/07/2008
KLS: Bald char fix revert, will try something else.
KLS: Wake The Dead initial implementation.
KLS: Hopefully better bald character fix base on kraeger's findings.

==08/04/2008
KLS: (Derision) Pet Buff Window Implemented.
KLS: Charmed pets should now function with the pet window, as well as appear correctly in group.
KLS: Added rule Character:SkillUpModifier (100) to govern how fasts skill ups happen on a server.  100% = normal chance, 200% = double normal chance.
KLS: (Derision) Implemented quest journal npc say.
KLS: (Derision) Fix for npc not always facing attacker.
KLS: (Derision) Stop Pets Fleeing
KLS: (CodeMephit) Hunger and thirst for new characters.
KLS: Upped food/water eat/drink gains by a lot.
KLS: (greggg230) Aggro LOS fix.
KLS: Fix for bald characters hopefully.
KLS: (kraeger) RNG name fix.
KLS: Big bug fixes with healing aggro.
KLS: Charm spells will stop making a cha check after a certain resist adj threshold
KLS: Adjusted melee hit chances to be more forgiving.
KLS: Changed how +hit mods are applied
KLS: Roughly implemented Skill Attack spell effect.

Required:
patch_6.2.conf and patch_Titanium.conf files have changed be sure to update them.

==07/21/2008
KLS: (irv0) Fix for out of order ack not being sent in some situations.
KLS: (Derision) Pet bar OOC update fix.
KLS: Should have made client pets unable to give experience, untested but should work.
KLS: Healing aggro should function better for people not on the hate list.
KLS: Some work on public tradeskill objects saving their content between uses. 

==06/22/2008
KLS: Changed world/clientlist.cpp's line endings back to unix style line endings
KLS: Fixed up ipban based on updated code from TheLieka.

==06/21/2008
KLS: Belated updates to azone including (derision)EQG fixes and some changes to make it easier to compile under windows.
KLS: Fixed inconsistant line endings in ruletypes.h; there are probably more line ending changes I didn't catch, please try to keep your line endings consistant with what's in the repo.

==06/19/2008
Scorpious2k (Knightly): Correction of divine intervention text
Scorpious2k (LordKahel): Support for defensive Instinct and Reflexive Mastery AA

==06/18/2008
Scorpious2k (Derision): Fix for flee runspeed - linear flee speed reduction as HP drops
Scorpious2k (Derision): Rule to prevent mobs from fleeing if they are being helped by other NPCs
Scorpious2k (haecz): Distance check for corpse dragging
Scorpious2k (haecz): Distance check for taunt
Scorpious2k (greggg230): Merchant price faction/charisma fix
Scorpious2k (greggg230): Faction will now show on /con for agnostic players
Scorpious2k (BatCountry): Correction of a zone crash caused by reloading rules
Scorpious2k (Congdar): Eliminated array index error/zone crash in spells

==06/17/2008
Scorpious2k (TheLieka): Ban by IP
Scorpious2k (cavedude/TheLieka): Ability to limit melee guys from being bound in certain zones. This changes the canbind
            column of the zone table. Value 0 means noone can bind, value 1 means only casters can bind, value 2 means
            anyone can bind in the zone (ie cities).

Required SQL:
CREATE TABLE `Banned_IPs` (
  `ip_address` VARCHAR(32) NOT NULL,
  PRIMARY KEY (`ip_address`)
)
ENGINE = InnoDB;

Optional SQL:
Insert into rule_values values (0, 'World:UseBannedIPsTable', 0);
Update zone set canbind = 2 where zoneidnumber in (1,2,3,8,9,10,19,23,24,29,40,41,42,45,49,52,54,55,60,61,62,67,75,82,83,106,155);

==06/14/2008
Scorpious2k(Trevius): Door names can now go beyond the 16 char limit to allow doors and other objects from later expansions
                       to be used. The new max is 32 characters.
Scorpious2k(Derision): New fear adjustment to cause mobs to flee at the correct rates instead of running very fast at certain
                        percentages of health.
Scorpious2k(TheLieka): Limit the number of connections for an IP address There are 2 new rule values.
                World:MaxClientsPerIP = Maximum number of simultaneous EQ Client connections allowed per IP address.
                  Set the rule value to -1 to disable this feature.
                World:ExemptMaxClientsStatus = Minimum Account status to exempt the MaxClientsPerIP rule. This is
                  helpful for the inevitable random family of 16 that live together, and all want to play on your server,
                  as well as GMs, Devs, and QA staff. Again, set the rule value to -1 to disable this feature.
Scorpious2k(TheLieka): Added /rewind command
Scorpious2k(Striat): Quest Commands for Temp Race, Texture, Size and Gender Changes

Required sql:
ALTER TABLE `doors` MODIFY COLUMN `name` VARCHAR(32) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL;

==05/30/2008
Scorpious2k: (Derision/Wiz) Added code to implement fear.
KLS: (Leika) Implemented detection of various MQ activities.
KLS: EVENT_CAST_ON should now export $spell_id properly.
KLS: Further expanded on fear implementation including addition of rules to govern it's behavior.
KLS: Fear on clients still uses stun but the stun should match up with the buff duration in a more accurate manner.

Hackers SQL table:
DROP TABLE IF EXISTS `hackers`;
CREATE TABLE `hackers` (
  `id` int(4) NOT NULL auto_increment,
  `account` text NOT NULL,
  `name` text NOT NULL,
  `hacked` text NOT NULL,
  `zone` text,
  `date` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`)
) AUTO_INCREMENT=8; 

==04/26/2008
KLS: Should have fixed discipline and combat ability timer overlap.
KLS: Added a rule for partial hits on fear, seperate from normal resist partial hits.
KLS: Fixed some quirks in the aggro system.
KLS: (Bulle)Added quest event EVENT_KILLED_MERIT will trigger if you got credit for doing the most damage to a lootable npc.
KLS: (Bulle)Added quest event EVENT_CAST_ON will trigger if a player casts on a npc.
KLS: Fixed crash in server-side check for removing detrimental effects.
KLS: (Magoth78), (Angelox)Added zone checks for levitating and being outdoors.
KLS: (haecz) Fix to dupe corpse money on a zone crash.
KLS: Changed root to resist per tic instead of partial hit.

Required SQL:
alter table `zone` add column `canlevitate` tinyint (4) DEFAULT '1' NOT NULL  after `cancombat`
alter table `zone` add column `castoutdoor` tinyint (4) DEFAULT '1' NOT NULL  after `canlevitate`;

==04/22/2008
Rogean: Server-side check for removing detrimental spells.

==04/13/2008
Rogean: Fixed a hack to sell no-drop items to merchants. (Reported by KingMort)
Rogean: Fixed #hideme, it won't show you zone in and then disappear anymore. (Reported by KingMort)
Rogean: Fixed /summon.
Rogean: Changes to /who all and GM's:
	* GM * Tags will no longer show up unless your #gm on
	You will not show up to players of lower status if your /anon and #gm on, if your #gm off and /anon you will show up as 
	a normal player, regardless of statuses.

==04/09/2008
KLS: (AiliaMorisato)Fixed death packet bindzoneid and attack_skill fields being switched.
KLS: Added rule based caps for all PoP item abilities.
KLS: Agility will now affect a defenders chance to be missed slightly.
KLS: Added accuracy rating (10 AR. = 1% chance to hit) and (LordKahel)ATK to npcs.
KLS: Changed how mitigation is calculated slightly.
KLS: Enc animations will now respond to /pet get lost no matter what level of the animation empathy aa they have.
KLS: Hopefully fixed soul abrasion and consumption of the soul aas... again.
KLS: Added quest::forcedooropen(doorid), quest::forcedoorclose(doorid), and quest::isdooropen(doorid).
KLS: Changed archery calculations to be more similar to normal weapon damage calculations.
KLS: Taunt will now always add hate if the user is already on the top of the hate list.
KLS: Fixed EVENT_ZONE player event.

Character:ItemDamageShieldCap (30)
Character:ItemAccuracyCap (150)
Character:ItemAvoidanceCap (100)
Character:ItemCombatEffectsCap (100)
Character:ItemShieldingCap (35)
Character:ItemSpellShieldingCap (35)
Character:ItemDoTShieldingCap (35)
Character:ItemStunResistCap (35)
Character:ItemStrikethroughCap (35)

Required SQL:
ALTER TABLE npc_types ADD ATK MEDIUMINT NOT NULL DEFAULT '0';
ALTER TABLE npc_types ADD Accuracy MEDIUMINT NOT NULL DEFAULT '0';

==04/01/2008
Rogean: Fixed a merchant purchase packet exploit.

==02/28/2008
WildcardX: Tweaked the code for the Divine Intervention spell line code and the Unfailing Divinity AA ability.

==02/27/2008
WildcardX: Implemented HeadShot AA Ability.
WildcardX: Archery and throwing attacks will not cause you to suffer injury from your target's damage shield.
WildcardX: Implemented Spell: Death Pact.
WildcardX: Implemented Spell: Divine Intervention.
WildcardX: Implemented Unfailing Divinity AA Ability.

==02/25/2008
WildcardX: Enchanters can now control their pets if they purchased the Animation Empathy AA.
WildcardX: Mobs now have a chance to resist fear spell line each tic.
WildcardX: Mobs now have a chance to resist charm spell line each tic.
WildcardX: Implemented Total Domination AA.
WildcardX: Reworked new charisma test. This test now evaluates factors like MR, CHA, mob and caster levels. It yields better live-like results.
WildcardX: Enchanter pets now get the /pet report and /pet health commands by default.

==02/23/2008
WildcardX: Only characters with Pet Affinity AA can have group buffs casted on their pets.
WildcardX: Fixed a bug that would not allow a rune buff to be used in some situations.

==02/22/2008
WildcardX: Characters can now have only one caster specialization skill above 50. If more than one specialization skill is detected above 50, then all specialization skills are reset to 1.
WildcardX: Reworked mana reduction calculations.
WildcardX: Implemented spell casting specilization checks.

==02/21/2008
WildcardX: Removed the possible fix for the Call of Hero spell as it didnt actually fix the issue after extensive testing.
WildcardX: Added new command #scribespell. This will scribe a specified spell into the target's spell book.
WildcardX: Added new command #unscribespell. This will unscribe a specified spell from the target's spell book.

==02/20/2008
KLS: Zone crash fix caused by calling the TryWeaponProc() method when dead.
WildcardX: Changed the quest function depopzone() to accept a parameter to specify if the spawn timers should resume or become disabled. 0 = Disable, 1 = Enable.
WildcardX: Added the quest function repopzone(). This function will cause a zone to repop it's spawns normally.
WildcardX: Possible fix for a zoning bug caused by the Call Of Hero spell.
WildcardX: Harmony/Pacify line of spells will now cause aggro when resisted.
WildcardX: Added a check against CHA to avoid aggro from a resisted Harmony/Pacify spell.

==02/19/2008
WildcardX: Found a small efficiency for the code that determines if an item is equipable.
WildcardX: Re-worked the rune spell buff code to make it more efficient and reduce CPU utilization.
WildcardX: Added the quest function depopall(int npctype_id). This will remove all mobs from the zone with the specified npctype_id.
WildcardX: Added the quest function depopzone(). This will remove all mobs from the zone and NOT cause a repop.

==02/10/2008
WildcardX: Mesmerize line of spells will now cause aggro when casted on a mesmerize immune mob.
WildcardX: Fixed enchanter spell Theft of Thought. This spell will now work as described.
WildcardX: The pacify/harmony line of spells will no longer require a line of sight check to complete a cast.

==01/28/2008
WildcardX: Regenerated perl_mob.cpp due to deprecating the following methods: GetFamiliar(), SetFamiliar(), GetRune(), SetRune(), GetMagicRune(), SetMagicRune().
WildcardX: Enchanters, this is your patch! Characters will now benefit from all rune and spell rune spell effects all spell buffs will provide, consistent with spell rules.
WildcardX: Rune and spell rune spell buffs will now persist zoning and camping.
WildcardX: Fixed a zone crash caused by TryWeaponProc() method.

==01/27/2008
WildcardX: Subtle changes to zoning code to allow both the 6.2 and Titanium client to perform all zoning operations similiar to live.
WildcardX: Fixed #zone and #goto commands for both the 6.2 and Titanium client.

==01/25/2008
WildcardX: Regenerated perl_client.cpp and perl_groups.cpp due to parameter changes for Group::TeleportGroup and Client::MovePC methods. Changes to some quest files may be necessary.
WildcardX: void	MovePC(int32 zoneID, float x, float y, float z, float heading)
WildcardX: void	TeleportGroup(Mob* sender, int32 zoneID, float x, float y, float z, float heading)
WildcardX: Pets will now report their buff list along with their health.
WildcardX: Fixed a bug that resulted in a zone crash if spell error logging is turned on.
WildcardX: (cavedude) Corrected an item id and some small typos in fishing.
KLS: Fixed a potential crash in Mob::CheckWillAggro()
KLS: Tweaked melee accuracy.
KLS: Ironed out some quirks between min hit and the AC code that was keeping it from mitigating some hits into misses.
KLS: (Knightly)#time should no longer be off by an hour, $zonehour, $zonemin and $zonetime are now exported to perl
KLS: Added player quests, player quests are quests designed to be attached to player processes such as zoning and clicking objects.
KLS: Player quests are loaded as either 'quests/zonename/player.pl' or as a template in 'quests/template/player.pl'
KLS: Player quests will export qglobals the client should be able to see and the following events are available for player quests: 
EVENT_TIMER with var $timer
EVENT_CLICKDOOR with var $doorid
EVENT_LOOT with vars $looted_id and $looted_charges
EVENT_ZONE with var $target_zone_id
EVENT_ENTERZONE with no special var
EVENT_LEVEL_UP with no special var


==01/24/2008
WildcardX: Removed a 64 character cap length on merchant names sent during a merchant greeting.
WildcardX: Fixed a bug that allowed players looting their corpse at just the right time, to duplicate their items.
WildcardX: Fixed a bug I caused in group portals when I corrected the Succor/Evac line.
WildcardX: Druids and Wizards rejoice! Succor/Evac will now perform a real zone and clear your aggro!
WildcardX: GM's can now summon players from one zone to another.
WildcardX: Cleaned up some of the code that handles zoning.
WildcardX: (cavedude) Reworked LeaveCorpses and LeaveNakedCorpses rules to allow for more options.
WildcardX: (cavedude) Created Character:DeathItemLossLevel rule to define when a player will leave items on a corpse.

Required SQL:
insert into rule_values values(0, 'Character:DeathItemLossLevel', 10);

==01/22/2008
KLS: Clients will be immune to proximity aggro until they are finished loading now.
KLS: Slightly reduced the melee accuracy of clients.
KLS: Melee mitigation should now properly enforce minimum damage.
KLS: Increased the level based damage bonus for high level characters in melee combat.
KLS: Removed tic by tic healing aggro.
KLS: Fixed several potential crashes in various parts of the code.
KLS: (Knightly)Merchants will now use their clean names when conversing with players.
KLS: Fixed some improper casting in the GMSummon code.
KLS: Figured in a work around for corpses between the server and client becoming unsynced for /corpse
KLS: AA Consumption of the soul should now function correctly.
KLS: AA Soul Abrasion should now function correctly

==01/19/2008
KLS: Slightly reduced the effectivness of the Flurry AA
KLS: Speed of the Knight AA implemented
KLS: Evade will now reduce hate by a static amount, the static amount of hate increased slightly.
KLS: Healing aggro should now not aggro pets instead of their owners,
KLS: Removed the clause that made it so healing aggro was only effective if the healer had 100 hate or more on the target, effectivly making healers below level 30 immune to healer aggro.
KLS: HideReuseTime on the server reduced by 1 second, should reduce the number of times a player sees the 'Reuse time not met' error message.
KLS: Pets should now default to taunt ON instead of taunt OFF
KLS: Fixed a typo in ZoneDatabase::UpdateSpawn2TimeLeft()

KLS: LDoN treasure should now really check only class and not body type.
KLS: Added new rule NPC:BuffFriends, if false npcs will only heal and not buff their friends, defaults to false.
KLS: Changed Mob::CheckHitChance() should be more consistant throughout the levels; puts more value into skill levels.
KLS: Changed Mob:AvoidDamage() to use a single roll system, as well as applied dex to parry, block and riposte chance and agil to dodge.
KLS: Brought the melee attack formula more in line with what it should be.
KLS: Added a moderate melee damage bonus to monks, and a small one to all classes at 50, 55 and 60.
KLS: Fixed an issue with strikethrough where it could go off even if you had no chance to strikethrough.
KLS: NPCs will now load their skills from the max skills of their level via the skill caps database instead of being randomly generated.
KLS: Increased the damage of backstab from str and dex and the general damage of several monk abilities.
KLS: Mob::GetProcID() should now try to fix SK spells automatically.
KLS: Aggro changes: Aggro has been changed to be based on a more live-like system, it is now based on potential damage instead of actual inflicted damage, hate is now unaffected by melee mitigation and resists.
KLS: Implemented jolt like effects straight into the aggro system, such effects should be calculated into a spells aggro regardless of resistance now.
KLS: Added an optional smart aggro list controlled by rule Aggro:SmartAggroList; true will enable it.  This aggro list attempts to choose targets in a much smarter fashion, prefering players to pets, sitting and critically injured players to normal players, and players in melee range to players not.

Added several rules to adjust the aggro system with:
Aggro:SmartAggroList ( true )
Aggro:SittingAggroMod ( 35 )
Aggro:MeleeRangeAggroMod ( 20 )
Aggro:CurrentTargetAggroMod ( 0 )
Aggro:CriticallyWoundedAggroMod ( 100 )
Aggro:SlowAggroMod ( 450 )
Aggro:IncapacitateAggroMod ( 500 )
Aggro:MovementImpairAggroMod ( 175 )
Changed Spells:SpellAggroModifier to Aggro:SpellAggroMod ( 100 )
Changed Spells:BardSpellAggroMod to Aggro:SongAggroMod ( 33 )
Changed Spells:PetSpellAggroMod to Aggro:PetSpellAggroMod ( 10 )

==01/16/2008
KLS: Updated AA_Data.sql with various small fixes.
KLS: Changed HasPet() to check for the existance of the pet as mob as well as the petid, should sync up with GetPet() nicely now.

==01/15/2008
KLS: LDoN /open will only check for class now, client does not enforce bodytype so neither will the server.
KLS: Numhits in disciplines should work correctly now
KLS: Changed many instances where HasPet() was being checked to verify that we have a valid pet pointer from GetPet(), GetPet() will be used instead, (it is possible to have a valid pet ID and an invalid GetPet() pointer)
KLS: Bind wound will no longer check for existance of skill, everyone gets this skill and it was breaking bind wound for people with 0 skill.
KLS: Fixed an issue that was keeping berserkers and rangers from triple attacking.
KLS: PickPocket should now correctly skill up on it's own through normal use.
KLS: GetMinLevel(int16 spell_id) will now return 0 if the level for the class was 255 instead of 255, many buff formulas do not work well with 255 which can cause some issues when a class can use a clicky item with a spell they cannot scribe normally.
KLS: GetProcID() should no longer have hard coded values.. whatever these represented are no longer valid in the current spell data.

==01/14/2008
WildcardX: Replaced the corpse consent system with one that allows cross zone player consents.

==01/13/2008
FatherNitwit: (Derision) Added tool (awater) to extract BSP tree with region type info from .s3d files into .wtr files.
FatherNitwit: (Derision) Added support for zone to load .wtr files.
FatherNitwit: (Derision) Employ water file to prevent under water mobs from sinking.
FatherNitwit: (Derision) Employ water file to enforce fishing near water.
New Rules (see ruletypes.h for more info):
Watermap:CheckWaypointsInWaterWhenLoading (Default: false)
Watermap:CheckForWaterAtWaypoints (Default: false)
Watermap:CheckForWaterWhenMoving (Default: false)
Watermap:CheckForWaterOnSendTo (Default: false)
Watermap:CheckForWaterWhenFishing (Default: false)
Watermap:FishingRodLength (Default: 30)
Watermap:FishingLineLength (Default: 40)

==01/12/2008
WildcardX: (cavedude) Fixed beastlord pet sizes.

==01/09/2008
KLS: Starting items will now be saved if they are placed in slots other than the primary 8, this includes inside bags and on the character's inventory and bank slots
KLS: Kick at level 55 or higher now has a chance to act as a spell interrupt as bash does.
KLS: (TheLieka) Stun Immunity for Frontal Stuns on Ogres
KLS: (TheLieka) Added out of combat regen to NPCs based on rule NPC:OOCRegen
KLS: NPCs with quests using the Perl Quest Parser should no longer stop if they do not have an EVENT_SAY sub
KLS: /autofire cleaned up some, fixed many situations where it shouldn't fire and it now will auto. use throwing weapons as well as bows
KLS: Ranged and Throwing attacks will break invis. correctly.
KLS: Added the following rules:
Character:HealOnLevel (Default: false)
Character:FeignKillsPet (Default: false)
Character:ItemManaRegenCap (Default: 15)
Character:ItemHealthRegenCap (Default: 15)
Combat:UseIntervalAC (Default: false)
Combat:PetAttackMagicLevel (Default: 30)
NPC:SayPauseTimeInSec (Default: 5)
NPC:OOCRegen (Default: 0)

==12/06/2007
KLS: Fixed logic on duration 7 formula.. again.

==12/02/2007
KLS: Reworked buff duration formula 7 calculations. 
KLS: (Cripp)Added (Missing?) pathing z rules.

==11/30/2007
FatherNitwit: Reworked pathing z code to be rules based instead of built time options.

==11/29/2007
FatherNitwit: (Derision) Fix BestZ pathing cleanup code top stop hopping.
FatherNitwit: (Derision) New fix-z-on-load feature.

==11/28/2007
Rogean: Fixed another no-drop trade hack.

==11/26/2007
KLS: Dynamic zones will now not attempt to boot up more than one instance of the zone if two or more clients request it in quick succession.
KLS: Fixed: qglobals will now not be exported for npcs that do not have the qglobal flag set in the perl parser.
KLS: Added a new npc special attack 'H' for immune to aggro, mobs with this set should not aggro no matter what a person does to them.
KLS: Fixed ATK loading in item bonuses
KLS: AEDuration calculation will now take target type into account correctly
KLS: Player pets should now persist through a teleport spell
KLS: Players will now be able to target themselves for group spells if they are not in a group
KLS: Fixed some buff duration oddities.
KLS: Level should have somewhat less of an impact for players in the resist code.

==11/14/2007
KLS: Swarm pets should be forced to correctly depop after their owner disappears.
KLS: NPCs should be able to use swarm pets correctly now.
KLS: #traindisc should no longer learn disciplines over already known disciplines.
KLS: Added a few more known spell effects to spdat.h, not implemented any yet
KLS: Rez experience should now only goto regular experience, not AA experience.

==11/07/2007
KLS: Reworked swarm pets a bit
KLS: Swarm pets should no longer crash zones(I hope)
KLS: Swarm pets will now gain all their information from the normal pet tables and the spell data, as a result the aa_swarmpets table is now obsolete.

==11/06/2007
KLS: Reverted client timeouts.
KLS: Fixed NPC HP and Mana Regen not loading from DB for NPCs

==11/05/2007
WildcardX: Fixed a bug that prevented player corpse summoning spells from working on Linux platforms.

==11/04/2007
WildcardX: The spell "Reanimation" will no longer restore any player experience. This is a 0% experience resurrection.
WildcardX: Corpses moved by a consented player will now remember where it was moved to, even after a zone restart.
WildcardX: Necromancers and Shadowknights can now summon corpses belonging to other players.
WildcardX: Corrected a bug that would have allowed Necromancers and Shadownights to summon corpses belonging to non-grouped party members.

==11/03/2007
WildcardX: (Cavedude) Implemented perl wrappers for new quest methods supporting the Shadowrest zone implementation.
WildcardX: Fixed a bug that prevented a player from experiencing resurrection effects in designated no combat zones.
WildcardX: Fixed a bug in graveyard system that could leave a player corpse in the database, but without a location.
WildcardX: Fixed a bug that could prevent the corpse decay timer from expiring because the graveyard timer would reset before.
WildcardX: Implemented support for the Shadowrest zone. This is configured to be disabled by default.
WildcardX: Implemented the command #summonburriedplayercorpse.
WildcardX: Implemented the command #getplayerburriedcorpsecount.
WildcardX: Implemented the quest function bool summonburriedplayercorpse(int32 char_id, float dest_x, float dest_y, float dest_z, float dest_heading).
WildcardX: Implemented the quest function int32 getplayerburriedcorpsecount(int32 char_id).

Required SQL:
alter table player_corpses add column IsBurried TINYINT(3) NOT NULL default 0;
alter table player_corpses add column WasAtGraveyard TINYINT(3) NOT NULL default 0;
insert into rule_values values(0, 'Zone:EnableShadowrest', 0);

==11/01/2007
WildcardX: (TheLieka) Bug fix to discontinue player invisibility when the player loots.
WildcardX: (TheLieka) Bug fix to remove a type from the #npcedit loottable command.
WildcardX: Implemented corpse graveyard support for all zones. Once a zone is configured for a graveyard, a zone restart is necessary.
WildcardX: Zone shutdown and restart will result in all player corpses within the zone to be subject to the graveyard corpse timer.
WildcardX: Implemented the command #setgraveyard [zone name]. This command will create a graveyard for the designated zone based on your target's LOC.
WildcardX: Implemented the command #deletegraveyard [zone name]. This command will remove the graveyard for the designated zone (does not delete any corpses!).

Required SQL:
alter table zone add column graveyard_id float NOT NULL default '0' after safe_z;

DROP TABLE IF EXISTS `graveyard`;
CREATE TABLE `graveyard` (
  `id` int(11) NOT NULL auto_increment,
  `zone_id` int(4) NOT NULL default '0',
  `x` float NOT NULL default '0',
  `y` float NOT NULL default '0',
  `z` float NOT NULL default '0',
  `heading` float NOT NULL default '0',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `zone_id` (`zone_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

insert into rule_values values(0, 'Zone:GraveyardTimeMS', 1200000);

==10/19/2007
WildcardX: (Bleh) Enhancement to avoid a zone crash by avoiding a null pointer.
WildcardX: (UrbeIT) Bug fix to allow pet spells to effect players in PVP.
WildcardX: (UrbeIT) Bug fix to allow players to remain invisible while in PVP.
WildcardX: (Foin) Bug fix to display the correct pet for Ogre and Iksar beastlords.
WildcardX: (slowglass) Bug fix to properly update LDoN points.
WildcardX: (cbodmer) Bug fix to allow the bank change button to properly work.
WildcardX: (zydria) Bug fix to allow players to meditate while mounted.
WildcardX: (Cavedude) Enhancement to allow berserkers and rangers the chance to triple attack.
WildcardX: (Cavedude) Enhancement to quest::movepc method to accept a heading value.

==10/17/2007
KLS: Quick fix to quest::movegrp

==10/11/2007
KLS: Familiars should fall under the pet system instead of their own system now, familiars should act in a much more behaved fashion when it comes to functionality shared with normal pets.
KLS: Added a network timeout for clients in zone, clients should linkdead from zone when their connection is suddenly severed.
KLS: (AiliaMorisato) Added some checks for item bonuses, bonuses should not calculate if the item is not equipable.
KLS: NPCs should now accept signals while engaged in combat.

==10/10/2007
FatherNitwit: Quick fix for Divine Aura on pets exploit (KingMort)

==10/09/2007
KLS: Tweaked my AC system a bit, should get less default defense and the system should be much more lienent overall, 
goal is to allow people to see more of a benefit from having AC.

==09/24/2007
FatherNitwit: (sfisque) Quick adjustment to item fishing probability.

==09/07/2007
KLS: Fixed melee mitigation and tweaks and a small fix to AC.
KLS: Small changes to the order in the getweapondamage code to make it a little more efficient
KLS: Added a field that allows you to override a factions innate desire to assist their own faction in battle to the npc_faction table

Required SQL:
alter table npc_faction add column ignore_primary_assist tinyint(3) not null default 0; 

==09/02/2007
KLS: Fixed an issue with items adding stats to NPCs exponentially.
KLS: Added a rule (Boolean) NPC:UseItemBonusesForNonPets, if set to true (default) item bonuses will be applied to all npcs, but only to pets if it is false.
KLS: Lockpicking should work once again
KLS: Should hopefully no longer be possible to use teleport doors when they are in the closed position.
KLS: Added basic AC mitigation, not on by default uncomment #define USE_INT_AC in features.h to use it.

==08/31/2007
KLS: (gernblan) Added spawn group info to #npcstats
KLS: (TheLieka) Fix for zone exp modifiers not being used
KLS: (inkubus) Lull and harmony spells should land on enemy targets and not cause any aggro, still some work to be done on the AE portion.
KLS: (cbodmer) Pet aggro changed, owner will no longer gain more aggro from proximity than the pet
KLS: (cbodmer) Support for LDoN style boxes (class 62 + body type 33) implemented
KLS: The error in acmod() should no longer complain as much.
Required: Opcode files have changed, be sure to update to the latest .conf files.

==08/30/2007
KLS: Reworked Mob::GetWeaponDamage(), it will now return damage done by any item and NULL and will return a 
value zero or less if we can't hit a mob with said item
KLS: Applied new GetWeaponDamage() to Attack and Special Attack code
KLS: Seperated Finishing Blow code to it's own function
KLS: Spell procs and innate procs should now function once again
KLS: NPC Weapons have more of an impact on NPC attack code now
KLS: Some NPC equipped items should correctly add bonuses to NPCs now
KLS: NPCs should no longer be able to dual wield with two-handed weapons
KLS: NPC weapons should properly show up if the item model is particularly high
KLS: Changed NPC_DW_CHANCE in features.h to 100% as default as opposed to the previous 5%
KLS: Archery will be affected by various crit AA effects and spell bonuses
KLS: Applied haste and slow modifiers to basic NPC special attacks such as kick and bash.

==08/26/2007
KLS: Fixed a misplaced field in the titanium spawn structure that was causing some spawn display issues on titanium.

==08/16/2007
KLS: Some cleaning up on autofire code
KLS: Reintroduction of item animation for archery

==08/15/2007
KLS: Fixed an /autofire crash
KLS: Added some conditions to RangedAttack() for now. Should keep from using ranged attacks when we shouldn't be allowed to attack.

==08/14/2007
KLS: Added /autofire
KLS: Fixed up SetAttackTimer() calculations a bit, especially when it comes to ranged attacks. Hopefully fewer instances where ranged attacks will be wasted because of the attack timer.
KLS: Ranged attack crits will now work no matter your chance to hit, also changed the appearances a tiny bit and added a min range check for /autofire.
KLS: Removed ReadBook packet size checking for now.. it was checking a wrong size and canceling out legitimate book requests
Make sure to update your .conf files to get /autoattack to work.

==08/12/2007
KLS: A little bit more tinkering with how potions and stacks work.

==08/11/2007
KLS: Fixed stackable potions in the item packet, they should now appear to have 1 charge instead of 0.
KLS: Added support for stackable items above 20.
KLS: Fixed forage, it will no longer overwrite slot 30 to create it's item, instead it will push the item onto the cursor like it should.

==08/10/2007
KLS: Fixed a stacking issue and made res effects not count to normal stacking rules.
KLS: Implemented a few more passive AA effects.
KLS: Added CanThisClassBlock() for the avoid code
KLS: Addressed some inconsistancies in the CanThisClass line of functions, GM classes should be able to do everything their base class can now.

==08/01/2007
FatherNitwit: (cavedude) Fix Iksar BL pet appearance.

==07/30/2007
Rogean: Fixed an item dupe exploit.

==07/28/2007
Rogean: Put in checks for No Drop Trading Hacks

==07/26/2007
KLS: Updated AA_Data.sql, still work to be done but should now be more complete than older AA sources.

==07/22/2007
FatherNitwit: Fixed another memory leak in world and zone.
KLS: Fixed up some message types so they match the client correctly.

==07/21/2007
Rogean: Fixed LDoN Merchant Item Inspect

==07/20/2007
FatherNitwit: (Striat) Fix for typos in perlparser.cpp to fix quest::me and quest::echo.
FatherNitwit: (Striat) Fix argument type in quest::setguild.
FatherNitwit: Fixed quest::settime
Rogean: Fixed up strikethrough a little
Rogean: Removed ability to proc on a riposte attack
Rogean: Implimented HoTT (Health of Target's Target) Functionality. This will only work for people with HoTT Built into their interface.
	To get UI Files for a Target Window, see http://www.eqemulator.net/forums/showthread.php?p=135291
FatherNitwit: Fix a few memory leaks.
Changes to opcode files:
patch_Titanium.conf: OP_TargetHoTT=0x6a12
patch_6.2.conf: OP_TargetHoTT=0x3ef6

==07/16/2007
FatherNitwit: (Glather) Fix for mobs showing weapons
FatherNitwit: (Cbodmer) Notify owner when buffs wear off pets.

==6/06/2007
KLS: (Darkonig) Change to the way tradeskill containers are handled.
KLS: (Darkonig) Change to item->isStackable() implementation, should let certain items that the client lets stack also stack server-side.

==6/01/2007
KLS: Addressed a memory leak in spell code and a memory leak in NPC destruction code.

==4/13/2007
KLS: Fixed an issue with buff duration inc. that was causing buffs to lose their effects (I hope)

==4/08/2007
KLS: Added support for the skill Frenzy.
KLS: Various tweaks and changes to some passive AA abilities.
KLS: Added #traindisc to train disciplines on the target player, #scribespells should no longer memorize disciplines to the spellbook.
KLS: Fixed an issue with spells that require components that use item ids higher than 32k
KLS: Fixed an issue with AAs and focus effects that increase buff duration not appearing correctly for clients until they zone.

==4/02/2007
KLS: Implemented number6 inspired item cooldown timers.
KLS: Added rules: NPC:MinorNPCCorpseDecayTimeMS & NPC:MajorNPCCorpseDecayTimeMS to set the decay time in millisecond of mobs below 55 and greater or equal to 55 respectively
KLS: Addressed an issue that caused some beneficial spells to generate incorrect aggro amounts.
KLS: Implemented some more passive PoP AA skills.
KLS: Fixed an problem with avoidance AAs adding chance to be hit instead of subtracting it.
KLS: Small change to the way pets and familiars initially aggro, familiars should never aggro now.
KLS: Fixed an issue where the combat code was checking for warrior triple attack but the skill check would always fail.
KLS: Critical hits should now be filterable as critical hits.
KLS: Redid hp and mana calculations based on magelo formulas, should be much more accurate, especially when using AA that increase hp.
KLS: Made mend skill checks more lienent, shouldn't ever fail after 200 skill, shouldn't ever hurt you after 150
KLS: Initial implementation of hp balance spell effect.
KLS: Focus effects that limit max level should now correctly reduce the effect by a percentage if the spell is over the level cap

==3/26/2007
FatherNitwit: Optimized the merchantlist_temp query on boot.

==3/14/2007
KLS: Put in FNW's requested changes to tradeskill combines from the other day that I almost forgot about
KLS: Tradeskill combines should check for container type now.

==3/11/2007
KLS: Attack() will not set our target unless we have no target now.
KLS: Tweaked some invis and hide stuff to hopefully catch more situations where it should break correctly.
KLS: Fixed the spell critical hit ratio to be accurate.
KLS: Spell Casting Deftness and Quick Buff should now work with spells that have duration formulas.
KLS: NPCs will no longer be restricted by the number of targets on their AE spells.
KLS: Spells base_1 will load as a 32 bit signed int instead of a 16 bit signed int, should correct some oddities with certain spells. For example certain summon spells using large item ids.
KLS: Fixed a tradeskill exploit with tradeskill containers and experimentation.

==3/10/2007
Rogean: Fixed #si and minstatus

==3/3/2007
FatherNitwit: Finally rewrote 'make depend' to properly track dependencies in linux builds

==2/22/2007
KLS: Some more changes to AA system:
KLS: altadv_vars.cost_inc will now be unsigned to allow your skills to cost less per level
KLS: Client side aa effects are now loaded from the database once again
KLS: Updated AA_data.sql to include AAs up to planes of power.
KLS: Added #refundaa as a way for server GMs to refund a players alt ability points and give them back their points.
KLS: Implemented limited numbered hits on buffs.
KLS: Root and charm will now act as partial capable spells.
KLS: Vampires will act as undead, which is consistant with what the client thinks is undead.

Required SQL:
CREATE TABLE aa_effects (
  id int(10) unsigned NOT NULL auto_increment,
  aaid mediumint(8) unsigned NOT NULL default '0',
  slot tinyint(3) unsigned NOT NULL default '0',
  effectid mediumint(8) unsigned NOT NULL default '0',
  base1 mediumint(8) unsigned NOT NULL default '0',
  base2 mediumint(8) unsigned NOT NULL default '0',
  PRIMARY KEY  (id),
  UNIQUE KEY NewIndex (aaid,slot)
) TYPE=MyISAM;

Optional SQL:
Resource AA_Data.sql

==2/18/2007
WildcardX: Player casted area of effect detrimental spells will not longer have an affect on players not engaged in PvP.
WildcardX: Fixed spawnlimit setting to control the maximum times a given npc_type can spawn in the same zone.
WildcardX: (Bleh) Fixed player emote animations.
WildcardX: Implemented a server-side check of a Client object's target to avoid it being null.
WildcardX: Fixed a zone crash that could occurr during a monk special attack or a rogue's backstab attack.
WildcardX: Area of effect beneficial spells will no longer affect non-player characters.

==2/16/2007
KLS: Updating Changelog AA work to be more clear as well as the required SQL.

Required SQL: 
alter table altadv_vars add column cost_inc tinyint(4) not null default 0; 

Optionally:
Source in AA_data.sql

==2/15/2007
WildcardX: Commented out the code supporting the deprecated OP_CloseContainer opcode.
WildcardX: Fixed world containers so when one player has closed a world container, another player can open it without the need for the first player to leave the zone.
KLS: Initial release of ongoing AA work
KLS: Most(Not all) Alternate Advancement abilities up to SoL Class working correctly with correct costs and client side effects
KLS: Fixed many many AA related bugs
KLS: Fixed Activatable AA buttons on titanium
KLS: Added #altactivate command to facilitate the new AA work
KLS: Added Character:ConsumptionMultiplier rule.
KLS: Server wont send a eat/drink message unless the player forces the client to eat/drink
KLS: Fixed an issue with TGB working in a backwards manner.
KLS: Fixed an issue with AE bard spells hitting the bard instead of the targets around him.
KLS: Fixed an issue with cancel magic spells that made them act as completely beneficial spells.
KLS: Added many missing spell effects into spdat.h
KLS: Fixed a beneficial aggro issue that was resulting in certain clicky items giving significant amounts of aggro.
KLS: MOBs with pets or familiars already out will not attempt to cast pet spells.
KLS: Curse, Poison, and Disease counters will go past 256 and all be active but will reset on zoning
KLS: Curse counters will work now.
KLS: Intimidation should work under the new skill cap rules.
KLS: Killing something will no longer clear your server side target unless you killed your target.
KLS: Fixed a int to float conversion issue in CalcRecommendedLevelBonus() (as per slowglass' post)
KLS: Fixed a crash issue related to resists, should help those crashing after zoning with a spell that has a heartbeat resist such as root.
KLS: Removed an unused spell function that didn't make much sense.

==2/14/2007
WildcardX: Implemented a cap of 4 mobs affected by targeted area of effect spells. This is consistent with EQ live.
WildcardX: Implemented the succor line of spells.
WildcardX: Specific mobs can now be toggled as findable or not findable by the track skill. Mobs which are not findable will not appear on any track lists.

Required SQL:
alter table npc_types add column trackable tinyint(4) not null default 1;

==2/13/2007
WildcardX: Fixed bug that broke #zone command.

==2/11/2007
WildcardX: Further enhancements to zone weather system to reduce the amount of work necessary to perform weather and to make it more logical.
WildcardX: Added a new opcode for both 6.2 and Titanium clients, OP_ZonePlayerToBind=0x385e. Please be sure to update your .conf files.
WildcardX: Implemented the beginnings of what will become a new "system" to deal with zoning.
WildcardX: Titanium clients will now zone correctly upon death and will not go link dead and get sent to character select screen.
WildcardX: Both 6.2 and Titanium clients will now return character view to first person from corpse hover after completing zone to bind point after death.
WildcardX: Group member camping will now auto-disband upon an actual logout.
WildcardX: Disbanding a link dead group member will no longer crash the zone.
WildcardX: Link dead group members will now automatically remove themselves from group.
WildcardX: Many zoning situations will now use "heading". This was largely being ignored before. However, there are still a couple more situations where this needs to be implemented. I will continue implementing "heading" as i continue to work on the zoning code.
WildcardX: (Cavedude) Implemented yet another container type to perform even more quest combines.
WildcardX: Added additional logging to zone "debug" and "error" to support zoning and intra-zone movement.
WildcardX: Group members disbanding in another zone will still fail to appear as removed from group from other group members, but disbanding this group member when he/she rejoins group in zone will no longer crash the zone and you will be able to re-add this former group member without having to destroy the whole group.

==2/10/2007
FatherNitwit: Reworked NPC Idle spell casting to avoid extra LOS checks (based on KLS's observations)
FatherNitwit: Reworked NPC spell casting timers to be more consistent.

==2/9/2007
Doodman: Fixed AdventurePoints_Update_Struct to be the correct struct.  Same structure for both 6.2 and Ti.  Changed core structure.

==2/1/2007
WildcardX: (Bleh) Fixed quest globals.
WildcardX: Fixed the common error message MakeNameUnique() has been recording in logs about being unable to make a unique name for mobs greater than 100 in a zone.

Required SQL:
ALTER TABLE quest_globals CHANGE expdate expdate INT;

==1/29/2007
WildcardX: Cleaned up zone weather code for better efficiency. Weather checks will be more frequent when their is snow or rain and less frequent when the sun is out.
WildcardX: Made weather log messages more consistent and informative.
WildcardX: Druids are now replace bards has the second best tracker in the game. This is consistent with live.
WildcardX: Fixed tracking skill. Tracking will now return a full list of every mob within the tracker's skill range, not just the first 100 mobs.
WildcardX: Clients will now see their coins update from quests or player trades. No zoning is required anymore.
WildcardX: The server is now using the OP_MoneyUpdate opcode, instead of OP_MoneyOnCorpse opcode for coin updates.
WildcardX: Clients entering a zone will now receive a weather packet. This will ensure all clients in the same zone will experience the same weather.

==1/23/2007
KLS: Fixed the change log so the current entries are correct
KLS: Fixed a small but significant crash.

==1/15/2007
KLS: Fixed an issue with storing timers.
KLS: Added in hide and basic support of hide improving AAs later
KLS: Some more changes to how procs work, perma procs will not be influenced by mob stats, should make them easier to balance.
KLS: Some internal changes to critical hits with some future spell effects in mind shouldn't change functionality.
KLS: WildCardX's key changes, keys should now work even if they're not on your cursor and no matter where in your inventory it's on you, including your bank
KLS: Pickpocket should work considerably better.
KLS: Removed some obsolete discipline code that I ran across.
KLS: Character:ExpMultiplier rule should work correctly now.
KLS: Fixed an issue with the client position update code that should see the server sending fewer redundant client position update packets.
Required SQL:
ALTER TABLE `npc_types` ADD `see_hide` tinyint(4) NOT NULL default '0';
ALTER TABLE `npc_types` ADD `see_improved_hide` tinyint(4) NOT NULL default '0';
Optional SQL:
UPDATE `npc_types` SET `see_hide` = 1 WHERE see_invis = '1';
UPDATE `npc_types` SET `see_hide` = 1 WHERE see_invis_undead = '1';

==1/07/2007
KLS: action_struct unknown06 renamed to instrument_mod to reflect it's behavior
KLS: WildCardX inspired weapon proc rate changes, proc rates should now load as a signed int instead of an unsigned int and should correctly calculate.
KLS: Some changes to the expired function of ptimers, it should return if the timer is expired whether or not the timer is enabled. This avoids certain situations where timers are disabled and then run down without ever being reenabled and essentially being locked down forever unless the database admin resets it manually.
KLS: Also fixed a small ptimer expire bug where if the timer just reached zero it would return expired until it was one second past zero.
KLS: Evade will no longer set the rogue's hate to 0, but instead will lower the hate by some amount based on level and the current hate of the monster. May need tweaking as don't know exact values.
KLS: Combat Range has been redone a bit so it no longer mixes ints and floats and also correctly factors in the size of the enemy you're fighting. Should prevent exploits where you can hit something rooted/permarooted but they cannot hit you back.
KLS: Rampage and enrage have been reworked and should work correctly, rampage will now carry a rampage list of 20 by default that does not get wiped until the monster stops fighting.
KLS: Fixed up spell fields and spell loading to make more sense, identified some fields. It should load in order now.
KLS: Sneak should now break when you deal / are dealt damage.
KLS: Hide should succeed a bit more and use the correct messages: "You have hidden your self from view", "You have failed to hide your self from view"
KLS: CalcAC() and CalcATK() now use signed values instead of unsigned.
KLS: When a mob returns to their guard point they should now correctly assume their guard heading.
KLS: Succor should fully wipe you from hate lists now, as should zoning.
KLS: Spin effects are now correctly capped at a max of level 55, all targets above this cannot be affected.
KLS: SE_LimitEffect should now correctly deal with any effect type the spell has and not just the ones hard coded into the server.
KLS: (Cripp)Fix for zone heading

==12/24/2006
KLS: (WildcardX) Fix for generic tradeskill container combines
KLS: (WildcardX) Fix for quest::depop and multipul mobs in the same zone that share a NPCType ID
KLS: (WildcardX) Zones can now be flagged to disallow offensive actions.
KLS: (WildcardX) Fix for zone weather, should no longer rain in places with no set weather, such as dungeons.
KLS: Interrupts should only be caused by melee, not spell damage now
KLS: Roots should only break on spell damage now.
KLS: DoT Focus effects should work correctly
KLS: Spell Formula 122 (Splurt) should now function correctly.
KLS: Berserkers should find themselves with the ability to double attack.
KLS: Curse, poison and disease counters should no longer be factored into stacking, should keep certain dots and certain slows from overwriting and blocking each other.
KLS: Complete Heal buffs will no longer stack with or overwrite other complete heal buffs.
Required SQL:
ALTER TABLE `zone` ADD `cancombat` tinyint(4) NOT NULL default '1';
UPDATE `zone` SET `cancombat` = 0 WHERE short_name = 'nexus';
UPDATE `zone` SET `cancombat` = 0 WHERE short_name = 'poknowledge';
UPDATE `zone` SET `cancombat` = 0 WHERE short_name = 'potranquility';

==12/19/2006
KLS: Fixed up Illusions a bit
KLS: Fixed a bug where the base2[0] field of a spell was not getting loaded correctly
KLS: Implemented Sacrifice Spells
KLS: Implemented Call of the Hero Spells
KLS: Implemented Silence spells
KLS: Implemented Invis Vs Animal Spells
KLS: Implemented Illusion Copy Spells
KLS: Implemented Dispel Detrimental Spells
KLS: Dispel Magic spells will skip spells with poison or disease counters.
KLS: Spells that imbue items(summon items with reagents, sacrifice) will not be affected by reagen conservation focus.
KLS: If a player is at max level the experience he has will cap at the max experience to gain the next level instead of being able to gain experience past his visible experience bar.
KLS: The max level you can group with and gain experience is now YourLevel*1.5 instead of YourLevel+8.
KLS: You'll only get an experience loss message if you actually lose exp now, no more You lost experience messages when you take a 0% rez.

==12/15/2006
FatherNitwit: Fix for possible crash when NPCs are immune to damage.
KLS: Small fix for newly created player corpses, hopefully they will no longer act like they are npc corpses.
KLS: Changed how recourse works a bit, it is now done after the resist check.
KLS: Group spells should be able to land on the caster's pet now.
KLS: Fixed crazy Bash/Kick damage.

==12/09/2006
KLS: Stun immune should apply to spin effects such as those found in One Hundred Blows.
KLS: Some cleanups in special attack and resist code.
KLS: Added a define SKILL_MAX_LEVEL in features.h that lets you define how high level you can get skills from the database, defaults to 75.
KLS: Damage shields wont proc on yourself any longer to avoid some wierdness. They only ever procced on yourself under special conditions so it shouldn't be noticable.

==12/03/2006
FatherNitwit: Fixed a few issues related to quest global expiration.

==12/01/2006
KLS: NPC ghosting fix with rule support.
FatherNitwit: Fixing up spell set loading crash.
KLS: More skill fixes
KLS: Moved the old class_skills system over to the new skills system.

==11/28/2006
FatherNitwit: (bleh) Added #hatelist command.
FatherNitwit: (bleh) Work on windows build issues.
FatherNitwit: Optimized merchant list query during zone boot.
FatherNitwit: Fix a few race related issues in eqbuilder.

==11/26/2006
FatherNitwit: Fixed berserker skill cap issue that KLS found.

==11/25/2006
KLS: The way resists are calculate have been changed and are now somewhat tweakable with rules, and partial hits should work correctly.
KLS: Ripostes have been seperated from the attack code and will now apply to all attacks.
KLS: Skills and Spells that directly modify melee damage should now work and be applied to all attacks.
KLS: Some fixes and optimizations in the attack code.
KLS: Familiars will no longer aggro like regular pets.
KLS: Damage Shield Bonuses on items should no longer be backwards.
KLS: Heals will report the amount of damage healed to their targets and casters.
KLS: Pets will now spawn at %t`s pet instead of %t's pet, the client filters out ' in certain things like combat and considering.
KLS: Stun Immunity will now only apply to the stun portion of the spell instead of the whole spell.
KLS: Instrument Mods should send correctly on the reapplication of bard pulses.
KLS: Spells should no longer check instant heals/damage portions of the spell for stacking purposes, several spells that should have stacked before but didn't now should properly.

=11/24/2006
FatherNitwit: (number6) Fix for loading saved spell sets.
FatherNitwit: Added #giveitem as inspired from the forums.
FatherNitwit: Changed default status required for #summonitem to 200.

==11/20/2006
KLS: Skill system tweaks and bug fixes.
KLS: Bard songs will now skill up while they are being sung instead of just when first cast.

=11/19/2006
FatherNitwit: Completely redid skills in the code to support >252
FatherNitwit: Skill caps are now database driven (shared mem)
Create this table, and source in SkillCaps.sql
CREATE TABLE skill_caps (
 skillID TINYINT UNSIGNED NOT NULL,
 class TINYINT UNSIGNED NOT NULL,
 level TINYINT UNSIGNED NOT NULL,
 cap MEDIUMINT UNSIGNED NOT NULL,
 PRIMARY KEY(skillID,class,level)
);

==11/07/2006
KLS: Changed how critical hits work, as a result things that could not crit before like special attacks, now can. 
KLS: Cleave like effects should be fixed to do an increase of your already standing chance to critical instead of a flat increase.
KLS: Reworked much of the special attack code.
KLS: Applied haste to combat skill timers, they should give trouble much less often.
KLS: Monk skill damage will be more random but the max damage they can do has not changed.
KLS: Skills should be avoided less often, they were being avoided twice in the code instead of once.
KLS: Implemented basic strikethrough.

==11/06/2006
FatherNitwit: (Cripp) periodic auto save.
FatherNitwit: LostZaphod's possible win32 azone fix. (untested)
FatherNitwit: (cbodmer) Regen multiplier rules.

==11/04/2006
Rogean: Haste Fixes: Fixed Haste/Slow as well as Bard Songs (Including Overcap).

==11/03/2006
KLS: Added Magoth's stun opcodes for both Titanium and 0.6.2 clients
KLS: Changed Object Clear opcode for Titanium

==10/30/2006
FatherNitwit: (KLS) Fixes for max endurance calc on zone in
FatherNitwit: (KLS) Fix for rulesystem category issue.
FatherNitwit: Added rule support to world (no runtime manipulation yet)
FatherNitwit: Load the 'default' ruleset from the DB if no variable is set.
KLS: Fix for client corpses not appearing to clients who witnessed their death until they zone.
KLS: Updated detrimental and healing spell aggro.
KLS: Hate mods from spells should now work. (Enchanter Visage/Shadowknight Voice line of spells)
KLS: Found and implemented the Hate Added in detrimental spells. (Shadowknight Terror line of spells)
KLS: Change to let special messages use their correct types.
KLS: Group fix for leader being unable to invite a 3rd party member until he/she zones.
KLS: GroupInvite2 opcodes found for both Titanium and 0.6.2, make sure to get the updated .conf files.
KLS: Glow messages should only go off for instant spells.
KLS: How haste calculations have been calculated has been reworked somewhat, haste shouldn't break any more, nor should all hastes stack.

==10/28/2006
FatherNitwit: Fix for NPC weapon appearance due to loot items.
aza77: Fixed SendAppearancePacket
aza77: Fixed a PvP bug that caused the zone to crash on death

==10/26/2006
FatherNitwit: WildcardX's name cleanup.
FatherNitwit: Tweak for 64 bit pointer support in the item code of the struct strategy.
FatherNitwit: More const cleanup in npc.h

==10/22/2006
FatherNitwit: added EVENT_COMBAT triggered when an NPC engages any form of 
FatherNitwit: 	combat and when combat is over. $combat_state signals which.
FatherNitwit: Hopefully fixed d_meele_texture
FatherNitwit: Cleaned up a lot of const related issues (attrs, AAs, and more)
FatherNitwit: Moved a lot of NPC specific stuff from Mob into NPC
FatherNitwit: Reworked special attacks a bit (monk, kick, backstab):
FatherNitwit:   they now use the standard combat hit chance forumals based on offense/defense instead of always hitting
FatherNitwit:   they are now subject to damage avoidance (parry, riposte, etc.) like normal attacks

==10/21/2006
FatherNitwit: Hopefully fixed spawn timer variance.

==10/18/2006
FatherNitwit: Maybe fixed issue with losing items when zoning in mysql 5.
FatherNitwit: Fixed issue with color saving properly.

==10/15/2006
FatherNitwit: (KLS) Implemented Endurance
FatherNitwit: (KLS) Implemented support for seperate discipline timers
FatherNitwit: (KLS) Fix for haste & slow issue on NPCs
FatherNitwit: (KLS) Fixed faction not changing issue (caused by min/max sticking fix)
FatherNitwit: (KLS) Changed con level code to be more accurate
FatherNitwit: Made /pet attack range a rule (Pets:AttackCommandRange) default to 150.
FatherNitwit: (KLS) Changed how consider and consider corpse is handled a bit, consider corpse should be more informative
FatherNitwit: (KLS) Fixed bug with charged/stacked items on corpses.
FatherNitwit: (KLS) Support for leaving naked corpses
FatherNitwit: Added rules: Character:DeathExpLossLevel, Character:CorpseDecayTimeMS
FatherNitwit: 	Character:LeaveNakedCorpses
FatherNitwit: Replaced db variable 'leavecorpses' with rule Character:LeaveCorpses
FatherNitwit: (KLS) hopefully fixing monk kill crash.
FatherNitwit: (KLS) made it so you can snare things while they're rooted
FatherNitwit: (KLS) made it so beneficial songs will stack with beneficial spells
FatherNitwit: (KLS) made it so a beneficial effect and a detrimental of an effect don't conflict
FatherNitwit: (KLS) let dots of the same resist type stack so long as they aren't the same spell
FatherNitwit: cleanup windows logging a bit
FatherNitwit: (eq4me) GCC 4+ build fixes

==10/05/2006
FatherNitwit: (KLS) Fix for explicit spell stacking rule problem.

==10/02/2006
FatherNitwit: (InsaneWallaby) Tradeskill skill gain fix.
FatherNitwit: (WildcardX) Improved spawnstatus command.
FatherNitwit: (number6) Work around for lay hands/harm touch recovery time hang.
FatherNitwit: Possible fix for faction sticking at min/max.

==09/21/2006
FatherNitwit: Revert part of bard mod fix, and fix it right.

==09/20/2006
FatherNitwit: Prevent stats from going negative.
FatherNitwit: Try to prevent skills from wrapping above 252 (still no support for higher)
FatherNitwit: Minor shop close tweak.
FatherNitwit: (Zuesrooster) Potential bard modifier fixes.

=09/07/2006
FatherNitwit: (eq4me) Reworked tradeskill success and gain rates
FatherNitwit: Potentially addressed trade coin display issue.
FatherNitwit: Undid clickie spell component change until dicussion finishes

=09/07/2006
FatherNitwit: (Aramid) Fixed ability to bind.
FatherNitwit: (Somebody, forget who) Fixed issue with reagents being consumed by clickies.
FatherNitwit: (eq4me) Fixed tradeskill stat bonus calculation for success rate.
FatherNitwit: Maybe fixed up zone solution file to only build perl versions, for debug and release.

==08/20/2006
FatherNitwit: Zero out buff counters when we occupy a new slot.

==08/16/2006
FatherNitwit: Glorandwarf's updated AA.h

==08/14/2006
FatherNitwit: More work on titanium AAs by Glorandwarf.
FatherNitwit: (Zuesrooster) Fix for pet self buffing.

==08/10/2006
FatherNitwit: Changed logic in quest parser to potentially avoid windows crash (Zuesrooster)
FatherNitwit: (Zuesrooster) fixed aggro quest related crash.
FatherNitwit: Untested update of OP_AugmentItem (John Adams)
FatherNitwit: A little bit further on AAs (Glorandwarf)

==07/27/2006
FatherNitwit: Added door info dump on click (DOORS__INFO)

==07/23/2006
FatherNitwit: Enforce some zone requirements on zone in too.
FatherNitwit: Fixed minor tradeskill crash.

==07/23/2006
FatherNitwit: (EverHood) Archery/self PvP mitigation changes
FatherNitwit: (EverHood) Regen tweaks
FatherNitwit: (EverHood) Fix DoT damage and messages
FatherNitwit: Killed erronious double-effects on regen/HoT buffs
FatherNitwit: Fixed replace-container client side appearance issue.

==07/17/2006
FatherNitwit: Added new rules subsystem to allow game rules to be changed
                at runtime. more about this will come as time goes on.
FatherNitwit: Added #rules command to manage rules data from in game.
FatherNitwit: Renamed old #rules to #serverrules
FatherNitwit: Moved max level into the rules system (Character:MaxLevel)
FatherNitwit: Added GM-trained tradeskill caps to rule system (Skills:MaxTrainTradeskills)
FatherNitwit: Fixed intimidation skill cap
FatherNitwit: Fixed adventure opcodes for adventure merchants on Ti.
FatherNitwit: Fix interrupt cast opcode for Ti.
FatherNitwit: Tweak to missing-spell-creagent case, might fix it?
Requred SQL:
CREATE TABLE rule_sets (
  ruleset_id TINYINT UNSIGNED NOT NULL auto_increment,
  name VARCHAR(255) NOT NULL,
  PRIMARY KEY(ruleset_id)
);
INSERT INTO rule_sets VALUES(0, "default");
UPDATE rule_sets SET ruleset_id=0;
CREATE TABLE rule_values (
  ruleset_id TINYINT UNSIGNED NOT NULL,
  rule_name VARCHAR(64) NOT NULL,
  rule_value VARCHAR(10) NOT NULL,
  INDEX(ruleset_id),
  PRIMARY KEY(ruleset_id,rule_name)
);

==07/16/2006
FatherNitwit: (EverHood) Implemented Eye of Zomm and Bind Sight
FatherNitwit: Reworked Eye of Zomm code

==07/16/2006
aza77: Fixed the lift issue + keyitems at doors
aza77: Fixed + modified traps and added a new type of trap
ALTER TABLE `traps` ADD `message` VARCHAR( 200 ) NOT NULL AFTER `effectvalue2` ;

==07/13/2006
FatherNitwit: Fixed zone crash when removing a guild member.
aza77: Added in game guild creation variables.GuildCreation + commands #guildcreate #guildapprove #guildlist
FatherNitwit: Fixed feign aggro crash.

==07/12/2006
aza77: Added triggered only doors.

==07/10/2006
FatherNitwit: Adding EverHood's lull fixes.

==07/09/2006
FatherNitwit: Wizardanim has dicovered the opcode to partiall fix AAs for Ti!!
FatherNitwit: EverHood's Mob ghost running on (feign)death fix.
FatherNitwit: Redid walkspeed code to be caclualted from runspeed (EverHood inspired)
FatherNitwit: Fixed up run AA speed mods.
FatherNitwit: Added EVENT_NPC_SLAY when NPCs kill another NPC. (fanman55 inspired)
FatherNitwit: Fixed up a long running memory issue in quest::ChooseRandom
ALTER TABLE `npc_types` DROP walkspeed;

==07/05/2006
aza77: Added variables.Rules + commands #rules #acceptrules
ALTER TABLE `account` ADD `rulesflag` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT '0';

==07/04/2006
FatherNitwit: Maybe fixing feign memory.
FatherNitwit: EverHood's temp pets and group recourse fixes.
FatherNitwit: EverHood's NoLongerEngaged AI fix.
FatherNitwit: bufgix in log.ini reading.

==06/29/2006
aza77: Get the SQL right:
ALTER TABLE `npc_types` CHANGE `hp_regen_rate` `hp_regen_rate` INT( 11 ) NOT
NULL DEFAULT '0';
ALTER TABLE `npc_types` CHANGE `mana_regen_rate` `mana_regen_rate` INT( 11 ) NOT
NULL DEFAULT '0';

==06/28/2006
FatherNitwit: Added EverHood's feign memory fixes
FatherNitwit: Reverted regen of 0 to mean "auto config", and negative to mean "no regen"
aza77: Changed hp_regen + mana_regen such that negative values indicate no regen
ALTER TABLE `npc_types` CHANGE `hp_regen_rate` `hp_regen_rate` INT( 11 ) NOT
NULL DEFAULT '0';
ALTER TABLE `npc_types` CHANGE `mana_regen_rate` `mana_regen_rate` INT( 11 ) NOT
NULL DEFAULT '0';
UPDATE `npc_types` SET `hp_regen_rate` = '0' WHERE `hp_regen_rate` = '-1';
UPDATE `npc_types` SET `mana_regen_rate` = '0' WHERE `mana_regen_rate` = '-1';

==06/27/2006
aza77: Added quest::setnextinchpevent + $inchpevent
aza77: Added quest::sethp

==06/25/2006
aza77: Fixed PVP appearance issues
FatherNitwit: Fixed the #logsql command

==06/20/2006
FatherNitwit: tweaked some ability timers and fixed up ranger crit damage

==06/18/2006
FatherNitwit: necro DOT feign death fix (unicorn97211)
FatherNitwit: Disable kill-pet-on-feigndeath by default (features.h FEIGN_KILLS_PET)
MySQL 5 compatibility increases (WildcardX):
alter table account DROP packencrypt;
alter table character_ change extprofile extprofile blob NULL;
alter table player_corpses change data data blob NULL;
alter table player_corpses_backup change data data blob NULL;


==06/15/2006
aza: Added MySQL5 support (FOR CUSTOM COMPILE ONLY)
ALTER TABLE spawn2 CHANGE `condition` `_condition` MEDIUMINT(8) UNSIGNED NOT
NULL DEFAULT '0';

==06/07/2006
FatherNitwit: Fixed SetAATitle (#title), and experted it to perl.
FatherNitwit: Fixed quest money reward printing. (WildcardX)

==06/03/2006
FatherNitwit: Fixed a client-side inventory appearance issue, may help with trade bugs.

==05/31/2006
FatherNitwit: (aza) Added quest::unscribespells
FatherNitwit: fixed ranger critical hit chance.
FatherNitwit: Implemented conditions on windows.
FatherNitwit: maybe made NPCs stop buffing pets.
FatherNitwit: Fixed npc spawn limits.
FatherNitwit: Fixed feign death missing opcode.
FatherNitwit: Hopefully fixed an issue causing server to slow down terribly after being up for a day+.
FatherNitwit: Fixed crash on zone/world shutdown.
ALTER TABLE spawnentry DROP spawn_limit;
ALTER TABLE spawngroup ADD spawn_limit tinyint(4) NOT NULL default '0';
ALTER TABLE altadv_vars ADD class_type int unsigned NOT NULL DEFAULT 0;

==05/06/2006
FatherNitwit: (aza) Enabled newer froglok classes.
FatherNitwit: (aza) Enabled several berserker combat skills.
FatherNitwit: Fixed possibly infinite recursion in map code.
FatherNitwit: Holding EQStreams open until they send all their data.
FatherNitwit: Trying to fix death disconnect (and failing)
FatherNitwit: Maybe fixed tinkering searching.

==04/24/2006
FatherNitwit: Added new HTTP functionality for moving chars between accounts.

==04/21/2006
FatherNitwit: Fixed bane damage loading problem.

==04/20/2006
FatherNitwit: Hopefully fixed the unidentified stream crash and some memory leaks.
FatherNitwit: Fixed weapon affinity huge proc bonuses
FatherNitwit: Fixed spell-granted procs not getting removed.
FatherNitwit: Implemented the 'procrate' field on items.

==04/13/2006
FatherNitwit: Fixed the issue of charmed mobs getting assists from their old friends.
FatherNitwit: Changed version number to 0.7.0

==04/13/2006
FatherNitwit: fixed a crash related to client destructors and tradeskills
FatherNitwit: Adding the incstats canges from aza on the forums.

==04/01/2006
FatherNitwit: FINALLY found and fixed the netcod crash I introduced a while back.
FatherNitwit: Fixed bard group buff tics.
FatherNitwit: Fixed the global guild chat going to everybody problem.

==03/27/2006
Doodman: Added queuing for future packets, fixing lag reported by Richardo

==03/25/2006
FatherNitwit: Fixed character deletion to remove guild member entries. (Aeris1)

==03/24/2006
Doodman: Added live struct strategy.  Can get to char select

==03/22/2006
Doodman: Fixed Ti items
Doodman: Added some field name mappings to load_13thfloor_items script.
UPDATE items SET stackable=1 WHERE itemtype IN (14, 15, 17, 18, 19, 27, 37, 38, 55, 56);

==03/22/2006
FatherNitwit: Refactored the netcode to move the opcode manager back into the stream.

==03/21/2006
Doodman: Merge up from Source branch
Doodman: Fixed CreateItem

==03/20/2006
FatherNitwit: Fixed invisibility vs. undead to only apply to undead mobs.
FatherNitwit: Added `slot` column to starting items to support much more robust configurations.
FatherNitwit: Updated char backups. (noted by typhoon)
Required SQL:
ALTER TABLE starting_items ADD slot MEDIUMINT NOT NULL DEFAULT -1;
ALTER TABLE character_backup ADD class TINYINT NOT NULL DEFAULT 0;
ALTER TABLE character_backup ADD level MEDIUMINT UNSIGNED NOT NULL DEFAULT 0;
ALTER TABLE character_backup DROP guild;
ALTER TABLE character_backup DROP guildrank;
ALTER TABLE character_backup DROP publicnote;

==03/19/2006
FatherNitwit: A bunch of minor changes, should help some bugs in 0.6.6.
FatherNitwit: Wrote basic guild management pages, much more needed.

==03/18/2006
FatherNitwit: Queue fix in netcode, should help crashing problem.
Doodman: Redid world port allocation not start looking for a port at the begining each time
Doodman: Made zone send it's port to world on connect, in case it is reconnecting to a restarted world
FatherNitwit: Changed version number to 0.6.6
FatherNitwit: Un-broke some outbound TCP connection stuff I broke to allow reconnecting.
FatherNitwit: Completely rewrote guilds in both world and zone.
FatherNitwit: Removed guilds from shared memory.
FatherNitwit: Removed the seperation between EQ ID and DB ID.
FatherNitwit: Fixed countless rediculous things about guilds.
FatherNitwit: Any change in guild state should update in real time now.
FatherNitwit: Guild leadership may need re-establishing since it changed from account to char based.
FatherNitwit: Guild structure in database has changed significantly.
Note: custom rank stuff is too much work for me to preserve in the DB, since I doubt 
	anybody uses it, so if you have them, you can figure it out yourself or remake them.
Required SQL:
ALTER TABLE character_ ADD class TINYINT NOT NULL DEFAULT 0;
ALTER TABLE character_ ADD level MEDIUMINT UNSIGNED NOT NULL DEFAULT 0;

CREATE TABLE guild_ranks (
    guild_id MEDIUMINT UNSIGNED NOT NULL,
    rank TINYINT UNSIGNED NOT NULL,
    title VARCHAR(128) NOT NULL,
    can_hear TINYINT UNSIGNED NOT NULL,
    can_speak TINYINT UNSIGNED NOT NULL,
    can_invite TINYINT UNSIGNED NOT NULL,
    can_remove TINYINT UNSIGNED NOT NULL,
    can_promote TINYINT UNSIGNED NOT NULL,
    can_demote TINYINT UNSIGNED NOT NULL,
    can_motd TINYINT UNSIGNED NOT NULL,
    can_warpeace TINYINT UNSIGNED NOT NULL,
    PRIMARY KEY(guild_id,rank)
);

# guild1 < guild2 by definition.
CREATE TABLE guild_relations (
    guild1 MEDIUMINT UNSIGNED NOT NULL,
    guild2 MEDIUMINT UNSIGNED NOT NULL,
    relation TINYINT NOT NULL,
    PRIMARY KEY(guild1, guild2)
);

CREATE TABLE guild_members (
    char_id INT NOT NULL,
    guild_id MEDIUMINT UNSIGNED NOT NULL,
    rank TINYINT UNSIGNED NOT NULL,
    tribute_enable TINYINT UNSIGNED NOT NULL DEFAULT 0,
    total_tribute INT UNSIGNED NOT NULL DEFAULT 0,
    last_tribute INT UNSIGNED NOT NULL DEFAULT 0,
    banker TINYINT UNSIGNED NOT NULL DEFAULT 0,
    public_note TEXT NOT NULL DEFAULT '',
    PRIMARY KEY(char_id)
);

ALTER TABLE guilds DROP eqid;
ALTER TABLE guilds DROP rank0title;
ALTER TABLE guilds DROP rank1title;
ALTER TABLE guilds DROP rank1;
ALTER TABLE guilds DROP rank2title;
ALTER TABLE guilds DROP rank2;
ALTER TABLE guilds DROP rank3title;
ALTER TABLE guilds DROP rank3;
ALTER TABLE guilds DROP rank4title;
ALTER TABLE guilds DROP rank4;
ALTER TABLE guilds DROP rank5title;
ALTER TABLE guilds DROP rank5;
ALTER TABLE guilds ADD tribute INT UNSIGNED NOT NULL;
ALTER TABLE guilds ADD motd_setter varchar(64) NOT NULL DEFAULT '';

INSERT INTO guild_members (char_id,guild_id,rank,public_note)
SELECT id,guild,guildrank,publicnote FROM character_
WHERE guild > 0 AND guild < 1500;

ALTER TABLE character_ DROP guild;
ALTER TABLE character_ DROP guildrank;
ALTER TABLE character_ DROP publicnote;


==03/11/2006
FatherNitwit: Redid netcode outbound queue to properly handle sequence wrapping.

==03/10/2006
Doodman: Worked up serialization for Ti and Live (/snicker)
Doodman: Converted the item table to match live (13th-floor) changes below (apply both)
Doodman: Worked items to be compatible for both (kept loreflag and loregroup)
6.2 -> Ti:
ALTER TABLE items CHANGE loreflag loregroup int not null;
ALTER TABLE items CHANGE UNK117 UNK123 int not null;
ALTER TABLE items CHANGE UNK150 UNK157 int not null;
ALTER TABLE items CHANGE UNK145 UNK152 int not null;
ALTER TABLE items CHANGE UNK140 UNK147 int not null;
ALTER TABLE items CHANGE UNK135 UNK142 int not null;
ALTER TABLE items CHANGE UNK130 UNK137 int not null;
ALTER TABLE items CHANGE UNK124 UNK130 int not null;
ALTER TABLE items CHANGE UNK121 UNK127 int not null;
ALTER TABLE items CHANGE UNK118 UNK124 int not null;

ALTER TABLE items ADD augslot1unk int not null AFTER augslot1type;
ALTER TABLE items ADD augslot2unk int not null AFTER augslot2type;
ALTER TABLE items ADD augslot3unk int not null AFTER augslot3type;
ALTER TABLE items ADD augslot4unk int not null AFTER augslot4type;
ALTER TABLE items ADD augslot5unk int not null AFTER augslot5type;
ALTER TABLE items ADD enduranceregen int not null AFTER manaregen;
ALTER TABLE items ADD notransfer int not null AFTER stacksize;
ALTER TABLE items ADD UNK133 int not null AFTER notransfer;

Ti -> Live:
ALTER TABLE items ADD UNK134 varchar(255) not null AFTER UNK133;

ALTER TABLE items CHANGE UNK130 potionbeltslots int not null;
ALTER TABLE items CHANGE UNK133 stackable int not null;

==03/08/2006
FatherNitwit: (BatCountry) Fixed throwing item crash.
FatherNitwit: (Hvitrev) Implemented Primsatic and Chromatic resists.

==03/07/2006
FatherNitwit: Fixed up adding a launcher to not falsely report an error.
Doodman: Fixed sending old style info from world->ls (fixing minilogin)
Doodman: Fixed TCPConnection cleanup on socket closed by the remote

==03/06/2006
Doodman: Fixed deadlock when zones are shutting down.
Doodman: Fixed MakeUpperString and MakeLowerString to function correctly on a NULL string
Doodman: Made HTTPSocket inherit from TCPConnection instead of using
Doodman: Fixed HTTP POST processing (needs a good workout still)

==03/05/2006
FatherNitwit: Developed stream proxy, stream identifier, and struct strategy to support dynamic structures.
FatherNitwit: Developed initial patch support for 0.6.2 and Titanium.

==03/04/2006
FatherNitwit: Fixed some broken logging in world.
FatherNitwit: Fixed the potential crash when zone connects to world.

==03/04/2006
FatherNitwit: Significantly refactored the old TCPConnection/TCPServer code.
FatherNitwit: Rewrote almost the entire web server to get rid of most of the socket lib.
FatherNitwit: Removed everything but the HTTP framework from the socket lib.
FatherNitwit: Rewrite better have fixed the windows crash.


==02/28/2006
Changed version number to 0.6.5-DR1
Doodman: Put in new XML configuration object and made zone/world use them
Doodman: Added auto ip configuration to world/LS
Doodman: Added auto ip/port configuration to zone
Doodman: Reworked logging in world to use the new logsys
Doodman: Made TCPConnection detect a closed socket like it should
FatherNitwit: Significantly refactored world for better code organization.
FatherNitwit: Significantly refactored the database object for better organization.
FatherNitwit: Fixed several valgrind errors.
FatherNitwit: Developed a custom webserver for world.
Doodman: Developed direct database support from perl.
FatherNitwit: Wrote many objects and pages for world.
Doodman: Wrote many objects and pages for world.
Doodman: Moved addon.ini (commands) into the database with world pages.
FatherNitwit: Developed a launcher for zone.
FatherNitwit: Developed world HTTP pages to manage launcher.
FatherNitwit: Fixed several issues with stats loading from the database.
FatherNitwit: Fixed high stat loading from the database.
FatherNitwit: Added `#grid max` command to help with grid creation.
FatherNitwit: Significant adjustments to combat, should bring things closer to live. Make sure your mobs have stats in the DB!
FatherNitwit: Fixed procs for NPCs with proc-only spell sets.

CREATE TABLE launcher (
 name VARCHAR(64) NOT NULL,
 dynamics TINYINT UNSIGNED NOT NULL,
 PRIMARY KEY(name)
);

CREATE TABLE launcher_zones (
 launcher VARCHAR(64) NOT NULL,
 zone VARCHAR(16) NOT NULL,
 port MEDIUMINT NOT NULL DEFAULT '0',
 PRIMARY KEY(launcher,zone)
);

CREATE TABLE commands (
  command varchar(20) NOT NULL default '',
  access tinyint(3) unsigned NOT NULL default '0',
  PRIMARY KEY  (command)
);


==01/20/06
FatherNitwit: Reworked melee and ranged attack code significantly.
FatherNitwit: Properly support recomended level on weapon DMG now.
FatherNitwit: Re-implemented racial/body bane damage and elemental damage.
FatherNitwit: Added "Immune to Non-Magical Melee" flag to NPCs (W)
FatherNitwit: Added "Immune to non-Bane Melee" flag to NPCs (O)
FatherNitwit: Added canbind flag to zone table to completely prevent binding in certain zones.
Required SQL:
ALTER TABLE zone ADD canbind TINYINT NOT NULL DEFAULT '1';

==01/14/06
FatherNitwit: Fixed ranged misses not generating hate.
FatherNitwit: Find is as working as good as it ever was (straight line)

==01/13/06
FatherNitwit: Made some changes to buff stacking rules reguarding DoTs and beneficial overwrite.

==01/12/06
FatherNitwit: Fixed the "Buffs do not apply effects in client after zoning" issue.

==01/09/06
FatherNitwit: Made NPCs actually load: resists, attack_speed, findable
FatherNitwit: npc_types cleanup day (they dont work or are not used):
ALTER TABLE npc_types ADD attack_speed float NOT NULL default '0';
ALTER TABLE npc_types DROP ipc;
ALTER TABLE npc_types DROP banish;
ALTER TABLE npc_types DROP social;

==01/08/06
FatherNitwit: Fixed more windows compile errors on .net 2003+...

==01/07/06
FatherNitwit: Fixed VS.net projects and compiling. (.net 2002)

==01/04/06
FatherNitwit: Fixed the quad special attack to not require triple in order to work.

==01/03/06
FatherNitwit: Added new debug logging facility. Will be implemented further in the time to come
FatherNitwit: Added command #mlog to manipulate the new logging facility.
FatherNitwit: Load log settings from log.ini if present.
FatherNitwit: Made GM's fade detrimental buffs when they die.
FatherNitwit: Reworked much of the spell casting subsystem.
FatherNitwit: Reworked bards, they should work OK now!
FatherNitwit: Debug Logging written for: spell casting, spawns, spawn conditions
FatherNitwit: Fixed block training for monks and beastlords
FatherNitwit: Fixed damage shields
FatherNitwit: Fixed a bunch of spell stacking issues
FatherNitwit: Properly enforced range checking on all spells.
FatherNitwit: Hopefully fixed long recast delay enforcement.
FatherNitwit: Removed rule that disallowed beneficial spells cast by NPCs on PCs
FatherNitwit: Hopefully fixed pottery firing.
FatherNitwit: Fixed NPC buffing faction checks.
FatherNitwit: Added LOS checks for detrimental AOE spells.
FatherNitwit: Changed version number to 0.6.4DR1

==12/30/05
FatherNitwit: Fixed event_waypoint in quests
FatherNitwit: Refactored a lot of NPC pathing code (no functional changes)
FatherNitwit: Added zone flagging concepts/enforcement
FatherNitwit: Added commands: #flags, #flagedit
FatherNitwit: Added quest functions: set_zone_flag, has_zone_flag, clear_zone_flag

Required SQL:
CREATE TABLE zone_flags (
	charID int NOT NULL,
	zoneID int NOT NULL,
	PRIMARY KEY(charID,zoneID)
);
ALTER TABLE zone ADD flag_needed VARCHAR(128) NOT NULL DEFAULT '';

==12/23/05
FatherNitwit: Added #reloadstatic to reload doors, objects, zone points, etc... (zone in/out required)
FatherNitwit: Fixed mobs to buff their friends, not their enemies.
FatherNitwit: Allow support for quests on charmed NPCs.
FatherNitwit: Changed quest timers to be tied to the specific NPC, instead of the name being zone global.
FatherNitwit: Fixed quest global expiration times... durations should be accurate now.
FatherNitwit: Re-enabled Y (year) expiration times, and added a 'F' time to say it dosent expire.

==12/18/05
FatherNitwit: Removed doors from shared memory.
FatherNitwit: Hopefully fixed pottery firing in kilns.

==12/15/05
FatherNitwit: Fixed Levitate.

==12/11/05
FatherNitwit: Removed some worthless fields.
FatherNitwit: Rewrote all the pet creation code to be based on npc_types
FatherNitwit: Completely changed the pets table.
You prolly want to run:
DROP TABLE pets;
You must load up the SQL in Sql-Files/pets.sql
the new pets sql assumes NPC IDs 500-700 are free, so edit them as needed.
ALTER TABLE npc_types DROP fixedz;

==12/09/2005
FatherNitwit: Fixed the issue where maxed out factions cannot be raised/lowered
FatherNitwit: Changed faction hits to properly ignore illusions.
FatherNitwit: Fixed an issue with converted chars and corrupt AAs. (not fully resolved)
FatherNitwit: Fixed the issue with mobs not pathing after respawning.

==12/01/2005
FatherNitwit: added USE_RACE_CLASS_XP_MODS (disabled by default) to features.h
FatherNitwit: These fields are not used:
ALTER TABLE zone_points DROP keep_x;
ALTER TABLE zone_points DROP keep_y;

==11/28/2005 (LiveCompat)
Doodman: Found additional world opcodes
Doodman: Updated char select struct

==11/24/2005
FatherNitwit: just some SQL updates you should run to make the recent aggro changes less annoying.
UPDATE npc_types SET _INT=80 WHERE _INT=75;
UPDATE npc_types SET _INT=60 WHERE _INT=80 AND ( bodytype=3 OR bodytype=8);
ALTER TABLE npc_types CHANGE _INT _INT mediumint(8) unsigned NOT NULL default '80';

==11/17/2005
FatherNitwit: Fixed a crash in the map code
FatherNitwit: Tweaked mob usage of d_meele_texture*

==11/11/2005
FatherNitwit: Changed most double prescision operations to single prescision.

==11/10/2005
FatherNitwit: Fixed waypoint ID limit (was 65535).
FatherNitwit: Implemented the #wpinfo command

==11/05/2005
FatherNitwit: Fixed the broken server side filters (reworked entirely).
FatherNitwit: Refactored damage code to be more consistent between PCs and NPCs.
FatherNitwit: Changed spell damage mechanism slightly to better utilize runes.
FatherNitwit: Tweaked a bit of illusion code to be more versitile.

==11/03/2005
FatherNitwit: Fixed AA storage in the player profile.

==10/28/2005
FatherNitwit: Fixed a lot of GCC 4.0 and 64 bit problems. Should build under both better now.

==10/24/2005
FatherNitwit: Fixed mob int loading.

==10/23/2005
FatherNitwit: Fixed Client->NPC->Client riposte.

==09/28/2005
FatherNitwit: added quest::attacknpc and quest::attacknpctype
FatherNitwit: Cleaned up usage of Appearance in the code
FatherNitwit: Fixed faction ally checking for npc->npc faction
FatherNitwit: Removed some stupid rules reguarding npc aggro
FatherNitwit: Fixed some faction issues with aggro, guards should work reliably now.

==09/25/2005
FatherNitwit: Fixed incorrect usage of EXPMod variable.

==09/24/2005
FatherNitwit: Hopefully fixed bard instruments.
FatherNitwit: Fixed crash when loading DoD+ spells_us.txt file
FatherNitwit: Rewrote a ton of the perl parser internals to suck less.
FatherNitwit: Reworked a bit of netcode to minimize chances of #opcode crashing.
FatherNitwit: Actually loaded luclin attributes from DB.
FatherNitwit: Added npc stats to npc_types and use them.
ALTER TABLE npc_types ADD STR MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
ALTER TABLE npc_types ADD STA MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
ALTER TABLE npc_types ADD DEX MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
ALTER TABLE npc_types ADD AGI MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
ALTER TABLE npc_types ADD _INT MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
ALTER TABLE npc_types ADD WIS MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
ALTER TABLE npc_types ADD CHA MEDIUMINT UNSIGNED NOT NULL DEFAULT '75';
	
==09/23/2005
FatherNitwit: Inverted XY coordinates on in zone objects and ground spawns.
FatherNitwit: Maybe fixed quests setting a waypoint in EVENT_WAYPOINT
ALTER TABLE ground_spawns ADD temp_x float NOT NULL;
UPDATE ground_spawns SET temp_x=min_x;
UPDATE ground_spawns SET min_x=min_y;
UPDATE ground_spawns SET min_y=temp_x;
UPDATE ground_spawns SET temp_x=max_x;
UPDATE ground_spawns SET max_x=max_y;
UPDATE ground_spawns SET max_y=temp_x;
ALTER TABLE ground_spawns DROP temp_x;
ALTER TABLE object ADD temp_x float NOT NULL;
UPDATE object SET temp_x=xpos;
UPDATE object SET xpos=ypos;
UPDATE object SET ypos=temp_x;
ALTER TABLE object DROP temp_x;


==09/22/2005
FatherNitwit: Reworked quest signaling implementation to be less dumb. Also exported SignalNPC to perl.
FatherNitwit: Implemented a missing bard AE DOT spell type.

==09/21/2005
FatherNitwit: Fixing a few issues with windows compiles and corpses.

==09/19/2005
FatherNitwit: Added missing packet for player death to create a corpse.

==09/16/2005
FatherNitwit: Fixed loot error case client hang, reported by Yablargo

==09/15/2005
FatherNitwit: Fixed coin trading bug reported by Windcatcher

==09/12/2005
FatherNitwit: Fixed adventure merchants

==09/11/2005
FatherNitwit: Made temp merchant lists clear on world boot.
FatherNitwit: Fixed some shared memory issues on windows.
FatherNitwit: exported some more mob methods to perl.

==08/26/2005
Doodman: Found most of the missing guild opcodes, except the manage ones.
Doodman: Moved guildlist to shared mem (ick) since zone now sends it too.
Doodman: Need to implement a way to recover the functionality of dynamicly
	  adding/removing guilds with the shared mem solution

==08/23/2005
FatherNitwit: Added range check for all combat abilities (reported by LoOsEr)

==08/21/2005
FatherNitwit: Fixed gaining AA exp (buying still broken)
FatherNitwit: Fixed weapon procs
FatherNitwit: Added looting messages (links to come later)
FatherNitwit: Fixed instant spells acting like DoTs

--- Version Changed to 0.6.2DR1 ---

==08/05/2005
FatherNitwit: Adding database support for both eye colors and beard type.
Required SQL:
ALTER TABLE npc_types ADD luclin_eyecolor2 int(10) unsigned NOT NULL default '1' AFTER luclin_eyecolor;
ALTER TABLE npc_types ADD luclin_beard int(10) unsigned NOT NULL default '0' AFTER luclin_beardcolor;

==08/03/2005
FatherNitwit: Work on eqextractor to support the newest patch.
FatherNitwit: Worked on spawn struct to identify the remaining missing fields.

==08/02/2005
FatherNitwit: Added initial fix for the shared bank dupe.

==07/28/2005
FatherNitwit: Fixed $wp in EVENT_WAYPOINT
FatherNitwit: added #aggro to query aggro checking info for mobs.
FatherNitwit: fixed a couple strange things in the aggro code.

==07/07/2005
FatherNitwit: Untested fix for zone point wildcards in GetClosestZone*

==05/09/2005
FatherNitwit: Fix some stuff related to zoning process.
update zone set min_status=0 where min_status is null;
update zone set min_level=0 where min_level is null;
alter table zone change min_status min_status tinyint(3) unsigned default 0 NOT NULL;
alter table zone change min_level min_level tinyint(3) unsigned default 0 NOT NULL;
alter table zone change long_name long_name text NOT NULL DEFAULT '';

==05/05/2005
FatherNitwit: Theoretically fixed a no-drop trading bug.

... Lots of work on 5/12/05 patch ...

==05/05/2005
FatherNitwit: A bunch of work on ranged attacks and attack timers.
FatherNitwit: Fixed issue with the first time a new char gains exp.
FatherNitwit: Fixed delete character at char select.
FatherNitwit: Fixed fizzle messages.
FatherNitwit: Fixed /goto and other cross-zone player teleporting.
FatherNitwit: Initial work on making arrows show up when shot.

==04/23/2005
LethalEncounter: Fixed compile errors on Windows
LethalEncounter: Fixed guild crash bug while logging in
LethalEncounter: Fixed most of the guild commands

==04/13/2005
Cofruben: Fixed possible crashes using #npscpawn command.
Cofruben: Added a few more cheat locators.

==04/10/2005
FatherNitwit: Reworked zone in code to make it more closely match live's ordering.
FatherNitwit: Fixed up stream factory problem with dynamic zones.
FatherNitwit: Added detailed connecting debugging.
FatherNitwit: Work on custom titles.

==04/08/2005
FatherNitwit: Completely rewrote zoning code to make sense.
FatherNitwit: Fixed some discipline related effects
FatherNitwit: Fixed archery hit chance cap (was 47%)
FatherNitwit: Initial title system implementation
FatherNitwit: Gave berserkers some of their special abilities
FatherNitwit: Initial work on raid system, lots to do still.
FatherNitwit: Found leadership AAs in the player profile and update packet
FatherNitwit: Enforce attack timer constraints on ranged weapons
FatherNitwit: (seq) Located crystal counters in the player profile
FatherNitwit: (image) Many of the following changes were written or inspired by GuildWars code
FatherNitwit: Enforce reuse timers for combat abilities & instill doubt
FatherNitwit: Enforce class and range checks on service providing NPCs
FatherNitwit: Enforce item slots containing proper items
FatherNitwit: Enforce range checking on ranged weapons better
FatherNitwit: Made /hideme persistent across zoning
FatherNitwit: Finally fixed no drop items in tradeskill containers for real this time I hope.
Required SQL (added to upgrade.sql):
ALTER TABLE account ADD hideme TINYINT NOT NULL DEFAULT 0;

==04/04/2005
FatherNitwit: Fixed guild member list struct, identified more fields of it (showeq)
FatherNitwit: (bUri) Fixed attack code with non-weapons and h2h weapons.
FatherNitwit: Split zone fog types into seperate DB fields.
FatherNitwit: Differentiated between guild and player tributes.
Required SQL: utils/0.6.1-upgrade.sql  (will be updated until release)

==01/15/2005
Doodman: Fixed charges/quantity
Doodman: Fixed IsStackable()
Doodman: Fixed some empty Handle() functons.
Doodman: Added instance level nodrop.
Required SQL:
alter table inventory add instnodrop tinyint(1) unsigned default 0 not null;

==01/13/2005
Doodman: Merged source (FNW changes) in to LiveCompat
Doodman: SendItemPacket's are now sent deflated (speeds up merchants)
Doodman: Combining is now turned on in makefile.perl for zone
Doodman: Fixed world to notice zone drops immediately
Doodman: Guild_MOTD and bulk door packets are now sent deflated
Doodman: New item structure is in:
	Items are preserialized in the database (utils/serialize_items.pl)
	Item fields names in item struct exactly match the dn
	Item fields now match the dump from (utils/load_13thfloor_items.pl)
		eqitems.13th-floor.org
	Item table convert script: utils/items-0.6.0-DR2-0.6.1-DR1-convert.sql
	
==01/10/2005
FatherNitwit: Disable sleep() in perl, it is bad news.
FatherNitwit: Fixed guild MOTD at login (hopefully).
FatherNitwit: Fixed minor security problem in SQL logging.
FatherNitwit: Added error reporting to waypoint editing commands.
FatherNitwit: Reworked client packet handling to use opcode dispatch
  routines, which is paving the way for dynamic opcodes.

==01/07/2005
FatherNitwit: Fixed rogue-like skill training (sneak, etc..)
FatherNitwit: Added spawn_limit field to spawnentry and npc_types
   which represent the maximum number of that npc_type which can spawn
   from that spawn group/in that zone overall. 0 == no limit.
FatherNitwit: Tweaks to the packet update manager
FatherNitwit: More SQL logging (spawn editing)
FatherNitwit: Fixed Monk bind wound over lvl 50 to 70%.
FatherNitwit: Fixed Monk attacks without weapons
FatherNitwit: Fixed intimidation, success formula needs work.
FatherNitwit: Fixed disciplines again.
FatherNitwit: Added quest::isdisctome to make tome handins work better.
FatherNitwit: Fixed levitate from other people's eyes.
FatherNitwit: Fixed a few minor crash bugs.
FatherNitwit: (Cisyouc) Fixed merchant purchases not costing anything.
FatherNitwit: Implemented the snare fix from the forums (edited spell calc formulas)
Required Queries:
ALTER TABLE spawnentry ADD spawn_limit TINYINT NOT NULL DEFAULT '0';
ALTER TABLE npc_types  ADD spawn_limit TINYINT NOT NULL DEFAULT '0';

==01/04/2004
Doodman: opcode/struct changes to allw zoning in on live.

==12/29/2204
Doodman: Fixed leak in Separator

==12/21/2004
FatherNitwit: fixed item handing to non-quest NPCs
FatherNitwit: delete nodrop or norent items left in world containers
FatherNitwit: changed quest::spawn commands to return the NPC ID of the spawned mob (in XS)
FatherNitwit: Cleaned up perl variable setting a lot
FatherNitwit: Tribute masters should work completely now.
FatherNitwit: Fixed login problem wher chars get into zone and move, but nothing else works.
FatherNitwit: fixed #level and other leveling commands to give proper ammount of training points.
FatherNitwit: Added new extended player profile for emu custom data storage
FatherNitwit: Implemented elemental damage on weapons
FatherNitwit: Cleaned up memory allocation a bunch
FatherNitwit: Made merchant lists load async, to speed dynamic boots
FatherNitwit: Fixed repop to not kill player pets.
FatherNitwit: Made pets cross teleport doors with their master.
FatherNitwit: Tweaked teleport doors, they should always work now.
FatherNitwit: Added optional command logging
FatherNitwit: Moved a lot of hard coded access levels for commands to features.h
FatherNitwit: Added optional status requirement to zone to specific coords
FatherNitwit: Fixed several minor crashes.
FatherNitwit: Added the unfearable flag (D in special attacks) to mobs.
FatherNitwit: Fixed mana burn and life burn (from Branks)
FatherNitwit: Added optional packet manager for mob movement packets (PACKET_UPDATE_MANAGER)
FatherNitwit:   Configure it in updatemgr.cpp (level_distances2,level_timers)
FatherNitwit: Added reference counting to applayer packet (for broadcasts)
FatherNitwit: Improved packet profiler a bunch, added #packetprofile command
FatherNitwit: Cleaned up eq_packet_structs.h a bit
FatherNitwit: Required DB update:
ALTER TABLE character_ ADD extprofile BLOB NOT NULL;

==11/20/2004
Doodman: Fixed merchant selling bug on merchant slot

==11/18/2004
Doodman: Fixed the initialization of augs on NPC loot that was causing a zone crash when looting NPC's

==11/16/2004
Doodman: Implemented Augmentation inserting, removal and distilling.
Doodman: Augment saves in inventory, shared bank, player_corpse and object_contents.
Doodman: Fixed world to detect and cleanup a zone disconnect immediately instead of when it tries to write to it.
Doodman: Reimplmented cursor queue using an actually queue.  Should be unlimited depth now.
Doodman: Updated items for new fields and new names.

==11/10/2004
LethalEncounter: Fixed a couple of corpse related bugs.
LethalEncounter: Added in various functions for the new login system.

==11/09/2004
FatherNitwit: Fixed minor crash with new grid delay thing.

==11/08/2004
LethalEncounter: Fixed loot bug with stacked items.
LethalEncounter: Added a 10 second timer to grid assignments to speed up zone in time.
FatherNitwit: Fixed invalid bind zone crash.
FatherNitwit: Fixed taunt crash.
FatherNitwit: Initial tribute system. Dosent give benefits, or save state yet.
FatherNitwit: Proximity quests: added quest::set_proximity, quest::clear_proximity
FatherNitwit: Proximity quests: added events: EVENT_ENTER, EVENT_EXIT
FatherNitwit: Added event queue for perl commands which cause perl events, like spawn and attack
FatherNitwit: Added the ability to define in game commands in perl (EMBPERL_COMMANDS)
FatherNitwit: Hopefully fixed multiple-death XP loss bug.
FatherNitwit: Hopefully fixed mob chain-casting buffs when target is immune
FatherNitwit: Reworked quest timers to not crash if the NPC depops/dies.
FatherNitwit: Added simple code profiling capabilities (-DEQPROFILE + features.h)
FatherNitwit: Rewrote command list to be map based instead of flat array
FatherNitwit: Rewrote NPC assist to use AIYellForHelp at regular intervals instead of each scan tic
FatherNitwit: Rewrote NPC assist code to use npc faction values to determine assist
FatherNitwit: Rewrote NPC aggro code to be a ton more effecient (REVERSE_AGGRO)
FatherNitwit: Rewrote NPC spell casting code to be a ton more effecient
FatherNitwit: Run this query (value of 1 == NPC might aggro other NPCs):
ALTER TABLE npc_types ADD npc_aggro TINYINT NOT NULL DEFAULT '0';

==11/07/2004
LethalEncounter: Added in three variables per feature request.

==11/06/2004
LethalEncounter: Fixed Merchant bug that wouldnt let you buy anything.
LethalEncounter: Fixed stack bug that wouldnt automatically stack any items you bought.

==11/05/2004
LethalEncounter: Client Freeze/Black Screen of Death bugs have been eliminated.
LethalEncounter: Added a simple count to our linked list so we can process a few things faster and more efficiently.
LethalEncounter: Fixed a small compile bug in regards to corpses.

==11/04/2004
FatherNitwit: Fixed exploit with split that kathgar found.

==11/01/2004
LethalEncounter: Inventory items on zone in are now sent in one packet like live instead of individual packets.  This will save on bandwidth and processing time.
Cofruben: Added support for /makeleader command.
FatherNitwit: Increased max buffs from 15 to 20
FatherNitwit: Fixed group zoning
FatherNitwit: Fixed loading map files on UNIX with capitol letters
FatherNitwit: Fixed a couple crashed related to old AA stuff
FatherNitwit: Cannot charm a corpse or charm something when you have a pet
FatherNitwit: A little work on zoneing with a chanrmed pet, not perfect yet
FatherNitwit: Fixed throwing weapons like shurikens
FatherNitwit: Broke all the old LDoN points stuff because it moved in the Player profile
FatherNitwit: Moved all quest command's logic into the QuestManager class
FatherNitwit: Rewrote perl to use XS instead of command queue (EMBPERL_XS)
FatherNitwit: Added routines to capture perl errors into proper log IO (EMBPERL_IO_CAPTURE)
FatherNitwit: Added a HUGE set of routines for quest objects, with new variables
  $client, $npc, and $entity_list... almost the entire class is exported. (EMBPERL_XS_CLASSES)
FatherNitwit: Added capability to send log messages to in-game clients (CLIENT_LOGS)
FatherNitwit: Added new log facility for quest messages named Quest
FatherNitwit: Added new commands #logs and #nologs to request/stop the server sending you its log messages
FatherNitwit: Fixed NPC -> NPC aggro, need to run these queries onan older DB:
ALTER TABLE npc_faction_entries ADD npc_value TINYINT UNSIGNED DEFAULT '0' NOT NULL;
UPDATE npc_faction_entries SET npc_value=1 WHERE value<0;

==10/31/2004
LethalEncounter: Aside from a few tweeks, merchants are finished.  They will now keep your items after you sell them like live.
LethalEncounter: Fixed bug that caused falling damage to be calculated twice.
LethalEncounter: Changed Sense Heading to start at 200 for new characters.
LethalEncounter: Black screen bug should be fixed now.
LethalEncounter: Fixed bash/slam.

==10/30/2004
LethalEncounter: Fixed a few issues with item charges.
LethalEncounter: Fixed illusions.
LethalEncounter: Rewrote the merchant code.  Its now much more efficient and instead of 81 database queries per shop request, a typical request doesnt pull anything from the db.  It loads the information at load time.
LethalEncounter: Added in the beginning parts of temporary merchant items. (you can sell items to merchants and purchase them back) Download the merchantlist_temp table from: http://www.eqemulator.net/sql/merchantlist_temp.sql

==10/27/2004
Cofruben: Added LDoN adventure system.Please,source the new sql file(thanks to skorch for testing).
LethalEncounter: Mob deaths should be sent to all players now.
LethalEncounter: ServerType 1 will make you pvp on zone in now.  Still trying figure out why the client doesnt send any pvp special combat abilities unless your dueling.

==10/26/2004
Scorpious2k: Fixed guild doors

==10/25/2004
FatherNitwit: Fixed zone crash related to character_ query.
FatherNitwit: Fixed book reading to give proper book window.
FatherNitwit: At least partialy fixed pet dual weild/double attack problem.
FatherNitwit: Tweaking on selling stackable items.
FatherNitwit: Fixed archery ammo issue.
LethalEncounter: Added ability to /consent (and /deny) other players so they can drag your corpse.
LethalEncounter: Fixed bug where other people were able to loot your corpse.

==10/24/2004
LethalEncounter: Fixed bug where you lost air supply on zoning in underwater.
LethalEncounter: Fixed GM damage bug.

==10/23/2004
FatherNitwit: Enable named quests by default (in features.h)
FatherNitwit: Fixed decaying world containers problem
FatherNitwit: Fixed undead nuke spells
FatherNitwit: Minor line of sight optimization
FatherNitwit: Minor tradeskill change to avoid a crash
FatherNitwit: Changed the way fear duration is calculated, hopefully it is better.
FatherNitwit: Implemented beta fear pathing code (disabled by default in features.h)
LethalEncounter: Reworked AA system and fixed some of the bugs with it.
LethalEncounter: Dyes should work correctly now.
LethalEncounter: Fixed Bazaar trader bug.
LethalEncounter: Zones now display the proper fog when you update your zone table with the latest.
LethalEncounter: Fixed zone crash and merchant item charge bug.

==10/22/2004
LethalEncounter: Fixed item deletion bug not updating client.

==10/21/2004
LethalEncounter: Fixed various AA related bugs.

==10/20/2004
LethalEncounter: Reworked zoning in, solved a couple of issues and should speed the process up a tad.

==10/19/2004
FatherNitwit: Fixed Disciplines and Abilities (lay hands & harm touch)
FatherNitwit: Added new server variable: DisableNoDrop (set to 1 takes nodrop off items when loaded)
FatherNitwit: Fixed NPC buffing through walls
FatherNitwit: Fixed symbol spell forumulas
LethalEncounter: Fixed equip bug when using two handed weapons.
LethalEncounter: Fixed resurrect bug that let you regain xp more than once.
LethalEncounter: Fixed bug that was making players corpses disappear on death when they shouldnt have.

==10/18/2004
LethalEncounter: Fixed pet only spells.
LethalEncounter: Fixed bug that wouldnt let you loot a corpse if someone got an error looting it. (such as a dupe lore error)
LethalEncounter: Fixed mana regen bug.


==10/17/2004
LethalEncounter: Added some debug code to make it easier for people that cant get minilogin working.
LethalEncounter: You will now eat/drink like eqlive if you arent a GM.
LethalEncounter: Fixed infinite recursion bug I made a few days ago :/

==10/16/2004
LethalEncounter: Fixed mana bug that was causing people not to regen their full mana.
LethalEncounter: HP Adjustments, will now send your hp update every tic and only the mob you have targeted (not including group hp updates) to reduce bandwidth.
LethalEncounter: Fixed a crash bug on character creation.  Thanks to blahblah for the help :P
LethalEncounter: Fixed item charge bug, need to update your database.

==10/15/2004
LethalEncounter: Changes necessary for the new MiniLogin :)
LethalEncounter: Z loc fix, it was placing you ten times the z loc it was supposed to :P

==10/14/2004
Rogean: omg we are so teh 0.6.0DR1 now~

FatherNitWit:
A HUGE thanks goes out to wiz for letting me have his source
to facilitate this merge.

WR Merges:
- An innumerable number of small bug fixes and tweaks all over
- A TON of AAs and related effects
- FISHING!!!!!!!!!
- Many timers enforced by server, not just client.
- Trap support.
- Sense trap and disarm trap
- Group linking
- Zone-crossing pets (lose their buffs though, for now)
- Voice graft
- poison and disease counters (in progress)
- hunger and thirst (in progress)
- stat food
- NPC door opening!
- Optimized idle zones to not eat the CPU
- Items tints display properly
- shielding other players (in progress)
- pick pocket
- Optional EXP scaling based on CON level
- Instill Doubt
- Made auto-putting items into bags respect size constraints.
- heal/buff aggro.
- reclaim pet gives you mana back.
- enforce undead and summoned targets spells
- reworked bard songs a bit
- implemented camping properly
- made alcohol tolerance gain skill (dunno if it does anything yet)
- better checking of lore items during trades and merchant buying
- prevent interaction with merchants on basis of bad faction
- pets should actually taunt now.
- rouge pets should backstab now.
- optional: group buffs hit group pets now.
- fixed memory blur chances 
- several minor group tweaks, should make groups more stable
- improved duel messages
- optional random luclin attributes for NPCs with boring faces
- AGI adjustments based on encumbrance
- AC bonuses for iskars and monks


FatherNitwit Improvements:
- Made most member timers instances, not pointers.
- Rewrote focus effects system, spells that give focus effect should work too.
- Reagent reduction focus implemeneted
- Rewrote activateable AAs and swarm pets based on Brank's work
- AA spell effects are now in the DB, easily editable
- Added a bunch of simple GoD AAs
- Consolidated many #define options into features.h
- Fixed crash in world when starting zone dosent exist
- Fixed dual weild with hand-to-hand
- Extended fishing to allow mobs to spawn when items are fished up.
- Made item skill modifiers work.
- Identified meaning of old Skill field of common items.
- made bind wounds actually consume bandaids.
- Made archery and throwing consume ammo
- Archery weapons proc now
- Fixed bard item bonuses to apply to all a bard's spell effects.
- rewrote perl HasQuestFile function to behave properly.
- modified perl quest system to fit better into the virtual parser scheme.
- enforce spell/skill components being on the player, not in bank.
- fixed container loading from DB.
- implemented item skill bonuses
- prevent merchant purchases when inventory full.
- safe fall implemented, but the formula is wrong
- initial implementation of client rampaging
- eliminated a lot of sqrt calls
- added an optional packet profiler to EQ network to count opcodes
- fixed NPC-casted targeted AE spells affecting the caster
- fixed monk special attack damage to be skill based.
- most NPC classes do their special attacks now.
- fixed multi-dose potions (not 100% sure they were broken)
- implemented Percental Heal spells
- put caps on haste, HP, and mana regeneration items
- Changed HP regen to work without client's regen packet, which it dosent send anymore.
- Updated natural HP regen to be closer to live.
- corrected AC calculations
- Implemented new discipline interface.
- Added new perl function (traindisc(itemid)) to facilitate training disciplines
- changed discipline reuse timer to a ptimer, since it is long.
- implemented a ton of new spell effects to support disciplines.
- implemented PoP item attributes like shielding, accuracy, etc...
- rewrote much of group system to better support multi-zone groups.
- groups given world-wide IDs instead of zone local.
- group disbanding when split between zones works.
- Fixed warrior/monk triple attack
- Fixed NPC AE spells to respect faction
- Tweaked NPC non-caster mobs being able to cast 'proc' spells.
- Fixed base resistance calculations to match the client.
- Cleaned up NPC spell interruption messages when they were not needed.
- DOTs no longer make you stand every tic.
- Fixed mob immunities special flags
- Added new mob immunities: snare, magic, meele
- Immunity to stuns now includes spin effects as well
- Trading with NPCs should correctly handle no drop items.
- fixed AA EXP setting
- allow starting items to include books and empty bags
- Fixed starting zones problem on char creation.
- Allow bards to move and use clicky items.
- Make NPC casters send stop moving packet when they cast.
- Fixed archery ammo searching to fall over to inventory.
- mobs now dual-weild based on a chance instead of garunteed
- groups do not grant EXP if the mob is green to any group members
- some NPC combat tweaks to balance it over the levels better. Needs through testing.
- EXP is now awarded to the top damaging player/group instead of killer
- fixed donal's complete heal
- fixed AC calculations for high-agi players
- Changed mobs with primary faction = 0 to be indifferent.
- If a player logs/zones in to a Z below the world, they are placed at a valid Z if possible.
- labeled new item field as attuneable, updated DB code for it

==10/10/2004
LethalEncounter: Fixed some issues with hp and mana.
LethalEncounter: Fixed bug with zoning z coord.

==10/09/2004
LethalEncounter: Fixed spell scribing and meming.
LethalEncounter: Merged in Xabob's expansion fixes (except regen which FNW is working on).
LethalEncounter: Merged in RangerDown's fixed version of #spawnfix.
LethalEncounter: Fix for #zcolor that was brought up by rmanders on the bug forum.
LethalEncounter: Character conversions from 5.7 to 5.9 should be fixed now.
LethalEncounter: Implicit length fix and mana struct fixed.

==10/05/2004
FatherNitwit: Fix name generator opcode
FatherNitwit: Added loot table drop chance fix
FatherNitwit: Cleaned up some map code and other thing

==10/02/2004
LethalEncounter: Updated AAs so they are sent based on class now.

==10/02/2004
LethalEncounter: Updated to version 5.9-DR2 (EQLive Compatible).

==10/02/2004
LethalEncounter: Updated all the structs/opcodes necessary to login using the latest client.

==10/02/2004
LethalEncounter: Misc AA fixes.

==09/29/2004
LethalEncounter: Fixed AAs, you can now buy them correctly.  Big thanks to Xabob for PacketCollecting the information for me!!

==09/26/2004
LethalEncounter: Fixed the displaying of AAs, moving them into two tables. Be SURE to source aa.sql for these updates.
		 (Will fix the buying aspect soon)

==09/25/2004
Doodman: Fixed linux kernel 2.6.x shared memory bug.  IPC_NOWAIT is not allowd on shared memory segment operations.

==09/20/2004
Scorpious2k: Allow multiple Perl plug-ins

==09/17/2004
Doodman: (un)fixed world to hand the LS->world hand off like it did in the past

==/09/12/2004
FatherNitwit: Added my LOS code and map converter. Thanks to wiz for help with testing.

==/09/09/2004
FatherNitwit: Adding basics of spell specialization.

==/09/07/2004
FatherNitwit: Fixed #heal on pets.

==/09/05/2004
FatherNitwit: Fixed minor flaw in player profile with skills.
FatherNitwit: Merged My Tradeskill Rewrite
LethalEncounter: Moved zone configurations from the old flat file method to the database.
BE SURE TO SOURCE ZONECFG.SQL!!!

==/09/04/2004
FatherNitwit: Merged in ProjectEQ's 2grid system
FatherNitwit: Fixed new style hate/regen/mana regen on items
FatherNitwit: Collected PoP item features from equiped, not used yet
LethalEncounter: Fixed /bug
LethalEncounter: Fixed merchant messages/issues

==/09/03/2004
FatherNitwit: Fixed almost ALL compile warnings on UNIX
FatherNitwit: Added my named quest files patch as optional #ifdef
FatherNitwit: Added persistent timers (client->p_timers)
FatherNitwit: Added 508->588 byte .cfg file converter

==/08/31/2004
FatherNitwit: Fixed MOB point-blank AE spells to cast (from PEQ folks)
FatherNitwit: Fixed Spawned MOB's being permarooted.

==/08/29/2004
LethalEncounter/Cofruben: LOY Guild Management tool updated.
Cofruben: Added new perl function: quest::addloot(itemid,charges).

==/08/28/2004
Cofruben: Implemented inspect code.

==/08/26/2004
Wiz: Fixed a bug that was displaying unknown spells on login.
Wiz: Fixed a bug that was causing hp to go wonky when you join a group.
Wiz: Fixed a bug that was preventing you from attacking when invulnerable.
Wiz: Fixed a bug that would cause invulnerability spells to stop working if you zoned.

==/08/25/2004
FatherNitwit: Redid split, implemented autosplit.

==/08/23/2004
Draupner: Fixed spell haste focuses

==08/21/2004
LethalEncounter: Finished updating few structs, can now login with latest client.  Merchants, combat, loot, etc work fine.

==08/20/2004
LethalEncounter: Fixed player profile.

==08/12/2004
Cofruben:Added basics of begging.
Cofruben:Added group splitting.

==08/10/2004
Wiz: Severely cleaned up position update code and made it more efficent. Should drastically reduce update packets generated by other clients.
Wiz: Improved the LOS calculation. It should use less CPU and work better now.

==08/02/2004
Scorpious2k: Changed Quest command settimer to reuse timers with same name instead of creating new

==07/26/2004
Cofruben: Added some perl functions,including: ding,addldonpoint,surname,permaclass/race/gender,scribespells.

==07/20/2004
Draupner: Added #npcedit

==07/19/2004
Doodman(WizeOne): Added beacon.o and embxs.o to makefile.perl
Doodman: Fixed #serverinfo for linux.

==07/12/2004
Doodman(RangerDown): Added "You cannot attack while invulnerable" message.

==07/10/2004
Scorpious2k: Fixed AA related exploit
Scorpious2k: Fixed AA problem where % remained if player lost levels to below 51

==06/27/2004
Scorpious2k: Added quest command spawn2 - same as spawn except also requires heading
Scorpious2k: Modified Quest Globals. It now always creates a unique var if char specific (not ALL players)
Scorpious2k: Enabled traders
Sandy: Changed mobs so they must have SPECATK_SUMMON to summon players

==06/23/2004
Rogean: Mobs no longer Dual Wield with Shields

==06/22/2004
Sandy: Event Aggro added
Sandy: Permaroot added
Sandy: x,y,z variables for quests corrected

==06/17/2004
Dspirit: More patch 6/16 opcodes corrected

==06/16/2004
Dspirit: Patch 6/16 opcodes corrected

==06/14/2004
Dspirit: More opcodes corrected

==06/13/2004
Dspirit: Multiple opcodes corrected

==06/12/2004
LethalEncounter: #zone fixed.
Rogean: Fixed inspecting items in adventure window.
Rogean/Scorpious2k: AA Fixes Implimented

==06/11/2004
Doodman: Fixed OP_HPUpdate and SendHPUpate.  Client now gets proper HP updates.

==06/11/2004
Scorpious2k/Image: #reloadqst now works for perl (Reloads the entire zones quest files).

==05/29/2004
Scorpious2k: Changed opcode to fix trade windows >> THANKS Dspirit

==05/29/2004
Scorpious2k: Merged in Sandy's EVENT_HP code
Scorpious2k: Merged in Bleh's Perl/XS enhancement
Scorpious2k: Added quest commands for mob movement stop(),start(),pause(),resume() and moveto()

==05/28/2004
Doodman/Bleh: Move NPCTypes out of shared mem in to zone specific STL maps.
Doodman/Bleh: Removed NPCTypes.o from makefile in EMuShareMem
Doodman/Bleh: Fixed null pointer dereference in selling

==5/15/2004
Doodman: Upped MMF_MAX_NPCTYPE_ID to 400k to support tcsmyworlds db
Doodman: Fixed EQNetwork.cpp to be C++ standard compliant, -not- MS compliant

==5/11/2004
Image: Better netcode, rawr.
Scorpious2k: Added AC to mobs - be sure to check MobACupdate.sql
Scorpious2k: Changed AC so it can now be controlled with serverOp variables ACreduction, ACrandom & ACfail
Scorpious2k: Added check so items with req level can't be auto equipped if player not >= req level
Scorpious2k: Added generic (theme = 0) LDoN point processing

==5/6/2004
Image: Fixed tradeskill places like smiths

==4/28/2004
Image: EQNetwork changes to get packets to send in order
Image: Fixed zones getting bugged (unable to attack, see others, etc.)

==4/23/2004
LethalEncounter: Emu works with the latest patch now.  Sony did some crazy crap and added 4608 bytes to player profile :/

==4/20/2004
Image: Lifetap now works on PVP
Image: Fixed the stacks of snare/root/speed, snare breaks speed spells (SOW,JBoots,etc.), root breaks snare, root breaks speed spells also.

==4/17/2004
LethalEncounter:  Fixed merchants that were broken in the last patch.
Image:  Inventory item combining added to decrease the traffic sent on zoning.

==4/16/2004
LethalEncounter:  Fixed item struct that was changed in the last patch, items now work again.

==4/15/2004
LethalEncounter:  Fixed Player Profile that was changed in the last patch, you can now login correctly.

==4/08/2004
Scorpious2k & Tark: Fixed incompatability problem with Perl and combined packets

==4/02/2004
Image: Improvements made on the combination code.

==3/29/2004
Image: Combined packets now work to full extent.  Set app priority to 6 if you don't want it combined, all packets should no longer be deflated,encrypted unless priority 6.
Scorpious2k: Fixed mob movement

==3/28/2004
Scorpious2k: Added quest command signal() and EVENT_SIGNAL
Scorpious2k: Made mobs face player for EVENT_SAY and EVENT_ITEM
Scorpious2k: Added smogo's $hasitem for perl quests
Scorpious2k: Added selfcast() command to perl quests

==3/23/2004
Scorpious2k: Added AC. Probably needs major adjusting of values to match live, but its a start.

==3/22/2004
image: Group inviting is fixed.

==3/21/2004
solar: corrected an issue with channeling skill/regaining concentration
solar: changed spell resist so that only detrimental spells are resist checked.
	will have to flag beneficial flags that need resist checking later.

==3/20/2004
solar: spell resists implemented
solar: added/fixed up some spell effects.  notable ones are the stackable
	hastes like melody of ervaj
solar: added new version of Wiz's CheckLos routine
solar: fixed a problem with detrimental buffs (root, mez) not working in pvp

==3/15/2004
solar: door updates, find sql file in release dir - doorupdate-03-15-04.sql

==3/13/2004
solar: fixed zone to zone movement occasionally not working

==3/10/2004
solar: spells that are group only should only work on the group now.

==3/07/2004
solar: moving coin around should work properly now

==3/06/2004
solar: looted stackable items should distribute properly now.

==3/05/2004
solar: player armor will appear the proper color now
solar: LoY Dye works.  You need a vial of prismatic dye for each slot you
	want to change the color of.
solar: looting differentiates between left and right clicks.  left clicking
	will put the item on your cursor as expected, and right clicking will
	auto equip it.
solar: containers can now be auto equip looted

==3/02/2004
solar: implemented AE location spells. ex: rain of lava, sentinel.  small
	issue with this still; the caster continues to execute the casting
	animation for the duration of the spell.

==3/01/2004
solar: started implementing AE rain type spells, still some work left to do.
	There are 2 new files for a Beacon class that you have to add to
	the build.

==2/29/2004
solar: revised and corrected a ton of spell effect stuff
solar: corrected an hp regen issue, but need to get the proper calculations
	for regen rates.  until corrected, clients will see their hp regen
	and then immediately change to what the server thinks it should be
solar: probably broke something

==2/28/2004
solar: spells will now consume reagents properly
solar: lifts work again
solar: corrected a mistake that caused spells to not finish scribing properly
solar: fixed some memory leak issues regarding hp updates

==2/25/2004
Scorpious2k: Added vesuvias changes for 5.5 - luclin appearence should work now

==2/22/2004
solar: spells should be in working order again, more work to be done on this.

==2/20/2004
solar: merged vesuvias' appearance (face, beard etc) and zone change
	 changes from the old code.

==2/19/2004
kathgar:  Fixed, SE_Fear, SE_SpinStun, SE_Charm for fixed duration spells and not double checking breaking
	  Range check on Archery
	  Skill checks on Hide and Sneak
	  Fixed exp deaths in PvP by DoTs cast by clients, spells cast by clients no longer in zone, and client pets
	    Added member bool client to Buff_Struct to aid in above fix
	  Fixed solar's changelog entry where he spelled my name wrong
	  No EQLive fixes in this change
solar: fixed a bug that was causing people to be set as gm when they shouldn't	  

==2/15/2004
solar: characters being created are checked for validity now.  thanks to
	kathgar for the tables.

==2/14/2004
Zaphod: Added Door ZonePoint information.

==2/13/2004
solar: Doors should work now
solar: adventure merchant stuff fully working (check me)
solar: petition interface stuff believed to be working but not fully tested
LethalEncounter: (entered by solar) fixed item opcode, items fully working

==2/12/2004
solar: Opcodes updated from Zaphod's list, also a few others.  All the ops
	that are tabbed in are unconfirmed, and I marked unused ones also.

==2/10/2004
Image: NewSource directory created for 0.5.5 (EQLive Compatability Developement)
Image: Few opcodes updated, also implicitlen updated.

==2/8/2004
solar: fixed a world crash regarding deleting an empty character slot

==2/7/2004
solar: AE spells working properly now
solar: wrote all new buff duration formulas
solar: buffs being applied will properly displace multiple buffs if needed
solar: bard spells should keep casting while sitting now
solar: mobs should now have a proper casting animation when they cast

==2/6/2004
solar: some buff stacking changes, misc spell stuff

==2/5/2004
solar: more spell work, bards should be in a working state, but not done.

==2/3/2004
Image: Divine Aura now works cross zone.
Image: Invisibility now works cross zone.
Image: Added a zone(""); command to quest (Zones them to the specified short zone name)
Image: Added selfcast("spellid"); command to quest (Makes client cast spells on themself, good for self only spells)
Image: Tons of my personal GW stuff changed, you can't see bwuhahahhah
Image: Fixed platinum duping
Image: Levitate now works cross zone (others see you levitate and not warping)

==2/2/2004
Scorpious2k: added quest global variables (requires DB change see quest_globals.txt in EQEmu Release))
Scorpious2k: fixed faction command in parser

==2/2/2004
solar: worked on buff stacking and some misc spell stuff.

==2/1/2004
solar: group spell fixes
solar: implemented /targetgroupbuff

==1/31/2004
solar: revised the StringID based messaging.

==1/30/2004
solar: Merged in Wiz's CheckLos() mob method
solar: Spell casting fixes.
solar: Channeling skill should work very similar to live now.  If you end
	your casting where you started you have a chance to finish casting.
solar: Line of sight is checked for spells.

==1/29/2004
LethalEncounter: Fixed an issue with HT and LoH not repopping, apparently fatigue in player profile was moved into the timer hours slot.
solar: Updated death.  You shouldn't receive an extra message about being
	punched when you die to a spell anymore.

==1/28/2004
solar: fixed an item dupe bug.

==1/26/2004
solar: various fixes to spells, more coming.

==1/25/2004
LethalEncounter: Fixed some issues with the guilds.
LethalEncounter: No Rent items will now be deleted if your offline for more than 30 minutes.

==1/24/2004
LethalEncounter: The guild management tool has been updated and works again.
LethalEncounter: Guilds will now work almost 100% like live, only a few of the #guild commands are left over, mainly for gm management.
kathgar: Added #revoke and #oocmute
LethalEncounter: Fixed some resist issues with some spells.
LethalEncounter: Fixed item charges from merchants.
LethalEncounter: Fixed expansion issues like not being able to use Adventure merchants.
solar: bodytypes should be working correctly from the db now.  Also added it
	to #spawn and #npcstats.  Pets are all summoned, except necro which
	are summoned and undead.  Apply the bodytype_update.sql in release
	to flag your mobs.
solar: /surname command corrects capitalization and rejects non alpha now.
solar: #name fixed - renames player target
solar: made some fixes to kathgar's revoke patch - it now works as intended.

==1/23/2004
solar: LD clients should now be kicked when the LD timer is up, even if engaged.
solar: Buffs should be working correctly after zoning now.
solar: #gassign fixes

==1/22/2004
solar: Corpses are now sent to clients zoning in.

==1/21/2004
Trumpcard: Merged in mongrels fix for undead/invis. Use update sql provided in release to update.
solar: Buff fading should work for slots besides the first one now.  This will
	fix the 'mez bug' that was due to the icon not being stripped.

==1/20/2004=
solar: sense heading skill will now improve as you move around

==1/19/2004=
Scorpious2k: fixed faction command for quests 
LethalEncounter: Fixed a problem with queued cursor items.
solar: fixes to #gassign

==1/18/2004=
LethalEncounter: Added item and spell bonuses to the mana regen formulas, they will now help.
LethalEncounter: Fixed a bug that was killing players even when they had hitpoints remaining.
LethalEncounter: Added server side filters
LethalEncounter: Added a new command (#setstat) that allows you to set a characters stats.
LethalEncounter: Added a new quest command that allows you to modify a characters stats.
LethalEncounter: Added the ability for a player to have more than one item on their cursor at once.  They will be queued like on live.
Scorpious2k: added random name generator for char create
Scorpious2k: changed order of parameters in flag console command to allow for spaces in name
kathgar:  Added FLAG_COMBINED and FLAG_IMPLICIT support, define COMBINED to try it
solar: fixed #mana
solar: fixed mana disappearing when you're interrupted mid cast
solar: applied kathgar's PetCommand crash fix
solar: fixed a pvp damage crash
solar: fixed channeling skill rolling over back to 1
solar: bumped PVP spell damage to 2/3 from 1/2 of normal

==1/17/2004==
Image: Memleaks for LDTimer, stamina_timer, CreateHPPacket have been fixed.
Image: World server now boots people with status < 0.
solar: Reworked melee hit/miss calculations to work better

==1/16/2004==
solar: Mez spells break properly on players now
solar: added a #stun command, takes a duration from 1 to 65535
solar: Fixed mana disappearing when a spell like cannibalize or necro
	subversion is cast.
solar: Fixed incorrect conditional that was causing ALL damage done TO a
	client to be halved.  Now only client to client damage is halved.
solar: Fixed a bug with the spell cast timer bar disappearing prematurely
	and the spell gems readying themselves while a spell was still being
	cast.
solar: Spells should interrupt properly when you duck, or are otherwise
	interrupted while casting.

==1/15/2004==
solar: HP should regen properly now

==1/14/2004==
solar: Divine Aura spells should now work

==1/10/2004==
LethalEncounter: Added ability for groups to zone.
LethalEncounter: Added the ability to use snares and roots in pvp.
LethalEncounter: Fixed mob movement to be more like live and to work correctly.
LethalEncounter: Added the tracking skill.
LethalEncounter: You will now get hit for max damage when you are sitting and an npc attacks.
LethalEncounter: Fixed loot messages.
LethalEncounter: Fixed loot so right click autoequips correctly now.

==1/4/04==
MYRA: changed to new opcode for follow 
MYRA: changed to new opcode for taunt 
MYRA: use new (5.x) Status labels in who for telnet connection 
MYRA: Added code to depop at end of grid for wander type 4 
MYRA: Added wander type 4 (single run) 
MYRA: fixed eval in ExportVar per Eglin 
MYRA: corrected spelling for var $uguildrank for event_timer (was $uguildrang) 
MYRA: added vars $status & $cumflag per Eglin 
MYRA: added vars $mobid & $mlevel per Eglin 
MYRA: added missing commands + itemlink to perl 
MYRA: added EVAL & KEEPERR to eval per Eglin's recommendation 
MYRA: restore missing commands for qst type files & add itemlink 
MYRA: fixed comma bug for me command 
MYRA: fixed comma bug for echo command 
MYRA: fixed comma bug for say command 
MYRA: fixed comma bug for emote command 
MYRA: fixed comma bug for shout command 
MYRA: added itemlink(ItemNumber) command 


==1/2/04==
LethalEncounter: Added further support for eqstr_us.txt, this should cut down on lag.
Image: Fixed client lockup related to spells. aka 'spell sticking'.

==1/1/04==
LethalEncounter: Updated spell structure to new spells_us.txt format. NOTE: You must have the latest eqlive spells_us.txt in your EQEmu directory.

==12/21/03 through 1/1/04==
Image/LethalEncounter/kathgar/devn00b/Shawn319:

Updated/added several opcodes to match eqlive.

Fixed spell interrupt casting.

Fixed NPC and player HP updates; should be pretty accurate now and cause less packet loss.

Fixed major crash bug with player death.

Fixed crash bugs related to Throwing weapons, Archery, Critical hits, Kick, Assassination and Beastlord pets.

Added more spells to the 'restricted list' of #cast.

Fixed flaw in #flag code. Only status 200+ should be able to set an accounts flag now.

Fixed crash bug with #time.

Pets now face the same heading as their owner.

Players no longer land critcal hits below 1 (no more 0 or negative hits).

Server no longer counts item stats in the ammo slot (as it should).

Fixed bug with eventlog that would cause certain entries to return a MySQL syntax error.


==12/21/03==
LethalEncounter: Ive been busy the last few days updating all the opcodes and structs for the recent patch.  Nearly everything works again please post any remaining unknown opcodes to the development forum.

==12/16/03==
Image: Fixed #zsave and added #zunderworld so you can set the zcoord for underworld.
==12/15/03==
Image: Took out an HP update in NPC::Damage() reduces HP updates big time and kills network traffic.
Image: All HP Updates are done only to targets now, TODO: Queue group clients with HP updates (once they work again)
==12/14/03==
LethalEncounter: Fixed a bug in tradeskills that was clearing the container before it was telling the client to.
LethalEncounter: Fixed the opcode for mend.
LethalEncounter: Fixed the guild trainer messages.
LethalEncounter: Fixed char create so it creates the character with a new aa struct.
LethalEncounter: Important fix for mob movement via waypoints and such.  Mobs now move nearly exactly like live and it uses 20 times less bandwidth than before.

==12/13/03==
LethalEncounter: Fixed Environmental Damage
LethalEncounter: Added support for a new database variable called startzone.
	To use this, add a record called startzone to the variables table and make the value the zone shortname you want players to start in. This will force all players to start in that zone.
LethalEncounter: Fixed a bug that Shawn found where /zone wouldnt work correctly in zones with similiar names.

==12/12/03==
Shawn319: (Bud9weiser) Fixed start_zones bug. Players should now start in correct location as long as db is up to date.
LethalEncounter: Item tint fix.
LethalEncounter: Tradeskill items being deleted without correct recipe fix.
LethalEncounter: Problem with the ' character inserting into the bug table fixed.

==12/11/03==
LethalEncounter: Added Archery in for pvp.
LethalEncounter: Fixed a throw bug.
LethalEncounter: Fixed char select colors not matching your colors in game.

==12/10/03==
LethalEncounter: Fixed the weapon delay bug.  Special thanks to haecz for bring this to our attention.
LethalEncounter: Fixed dup money bug.  Special thanks to afrospy also for bring this to our attention.
LethalEncounter: Fixed Bazaar Traders, they should work correctly.

==12/09/03==
LethalEncounter: Fixes for item tints and dyes.
LethalEncounter: Fixed NPC textures finally.

==12/08/03==
LethalEncounter: Fixed Horses/Drogmors.

==12/07/03==
LethalEncounter: Fixed a bug with pets causing lag.
LethalEncounter: Fixed a crash bug/1017 bug related to login in, people on slow/lagged connections should be able to login fairly
consistently now.

==12/02/03==
LethalEncounter: Trumpcard and I completely rewrote the linked lists to improve lag, they are about 4 times more efficient now.
LethalEncounter: Fixed a small bug with zone points. BE SURE YOUR USING THE MOST UP-TO-DATE TABLE!!

==11/30/03==
LethalEncounter: Fixed various loot bugs, including the duplicate lore item, blah blah blah bug..
LethalEncounter: Fixed #zonestatus and /servers to be on multiple lines
LethalEncounter: Fixed /who all guild tags to display the right guild
LethalEncounter: Added the ability to send multi-lined emotes with the <BR> newline.
LethalEncounter: Fixed the bug that gave the message: "Multiplier == 0 in Client::CalcBaseHP"

==11/29/03==
Image: Fixed last names for clients (When a new client zoned in, didn't send lastname).

==11/28/03==
LethalEncounter: Added a default instance for pets that arent created via legit spells.
LethalEncounter: Fixed the spell scribe issues.

==11/25/03==
LethalEncounter: Added a new table called ground_spawns.  This will allow you to spawn items randomly throughout the zone. Use this for only random locations, use the object table for static ones.
LethalEncounter: Added Timers for ground spawns so they will respawn based on the time you set.

==11/24/03==
Image: Fixed zoning and deaths so you no longer drop from the server.
Image: Properly enabled LDoN on EQEmu.
Image: Basic Adventure Merchant code implemented, throwing it to the STL guys to properly optimize.
LethalEncounter: Fixed Tradeskill objects.  If the objects show up as bags, thats a db issue

==11/23/03==
Trumpcard:  Several zone performance enhancements, as well as changes to decrease combat lag.
LethalEncounter: Reworked pets, they should now work properly.

==11/21/03==
LethalEncounter: Merchants wont trade with people while they are fighting now.
LethalEncounter: Players can no longer attack while invulnerable.
LethalEncounter: Fixed an AA bug that gave the player 199 aa points.

==11/18/03==
LethalEncounter: Lotsa cool fixes like crash fixes and guild fixes and cool stuff like that

==11/17/03==
LethalEncounter: Finally got /who all done and *hopefully* free of bugs.
LethalEncounter: Fixed a crash bug with guilds and added some of the Guildmanagement features.

==11/16/03==
Trumpcard: Several deallocate and mem leak errors corrected.
solar: Fixed bug with mobs assisting entities they shouldn't.  Often this
	show itself with other mobs helping the player when the player
	attacked one.
LethalEncounter: Added in the GuildManagement tool. You will need 2 new columns in your character_ table for this.
LethalEncounter: Fixed a couple crash bugs with guilds and spells.

==11/15/03==
solar: Fixed a bug in commands where if you didn't define an accesslevel for a command
	in the addon.ini it would default to accesslevel 0 instead of the hardcoded default.
solar: Modified #help command to search for a partial command specified as argument.
solar: HP wasn't being updated to client properly and would fall out of sync

==11/14/03==
LethalEncounter: Fixed a bug in doors that would cause triggered doors to go into an endless loop and crash.

==11/13/03==
kathgar: Fixed a crash when calling ZSList::FindByZoneID() when sending an invalid zone number.  
         Stack was corrupt in the backtrace, so I am not sure what called it in this way.
LethalEncounter: Fixed animation bug with attack.
LethalEncounter: Fixed Tradeskills (again)
LethalEncounter: Character Select will now show your equipment (Existing characters will need to swap the items)
LethalEncounter: NPCs will now equip weapons and items from the db.
LethalEncounter: You can now give weapons and items to NPCs to equip.

==11/12/03==
LethalEncounter: Fixed skills, we had the struct one int32 off.
LethalEncounter: Fixed GM Trainers, they should now work as intended.

==11/11/03==
Doodman: Fixed zone crash in CheckCloseArrgo() during assist checking based on
flawed if logic.

==11/11/03==
LethalEncounter: Fixed Stamina issues.

==11/10/03==
LethalEncounter: Fixed Quests.
LethalEncounter: A quest fix that makes them use far less memory, up to 25 MB per computer

==11/09/03==
LethalEncounter: Fixed zoning, zone_points should now work correctly, but make sure you have the latest ones in zone_points!
LethalEncounter: Fixed problem with spells not scribing.
LethalEncounter: Fixed zoning bug where you zoned back into the same zone, but it looked like you were in the new zone.

==11/06/03==
Image: Guildwars code and fixed a bug in MobAI for NPCs assisting clients, clients do not use
IsEngaged(), so it always returned false, now it uses AutoAttackEnabled() in its place for clients.
Image: Reversed the AICheckCloseSpells if statements, now sanity checks before distance check, uses less CPU usage.

==11/05/03==
LethalEncounter: Updated all of the opcodes that were changed in the patch today. 
LethalEncounter: Refined AA's some, added table to hold the timers for AA's so users can exploit them. Look in db.sql for the table.


==11/04/03==
LethalEncounter: Added in the basic structure for AA's and got some of them working.

==11/03/03==
LethalEncounter: Fixed factions.
LethalEncounter: Fixed issues with mobs of different factions or no faction assisting.

==10/29/03 to 11/02/03==
LethalEncounter: Fixed X, Y coords.
LethalEncounter: Added in groups.
LethalEncounter: Added in trades.
LethalEncounter: Fixed various animations.
LethalEncounter: Fixed client movement.
LethalEncounter: Fixed NPC movement.
LethalEncounter: Fixed forage.
LethalEncounter: Fixed Attack.
LethalEncounter: Fixed GM summon.
LethalEncounter: Fixed GM goto.
LethalEncounter: Fixed spells.
LethalEncounter: Fixed lifts.
LethalEncounter: Fixed automatic weather changes.  Change the default in the zone table to suit your needs. 1: normal 2: Rainy most of the time 3: Snowing most of the time
LethalEncounter: Fixed lotsa other important stuff that I cant remember :)

==10/29/03==
devn00b: Yet again removed Faulty pet code. LEAVE THEM ALONE

==10/17/03==
Image: Zone points code put in, need some testing done on it please!

==10/15/03==
Image: More optimization to the aggro code and an infinite for loop fixed.

==10/14/03==
kathgar:  Removed deprecated guildwars code
          Added #ifdefs for IPC code, no more IsInteractive checks wasting cycles
          Fixed a memleak in NPC with attacked_timer

merth: Updated zone objects:
	* Uses new item architecture
	* Fully supports imported data from packet collector
	* Objects dropped to ground persist zone sessions

==10/13/03==
Image: Optimizations to Aggro code, ~10% more efficient according to Trumpcard.

==10/11/03==
Trumpcard: Lots of performance improvements to combat code/AI code.  Streamlined several calls,  and found and removed unneeded calls
	   in MobAI that were causing serious bottlenecks.  Went through and caught a few memory leaks, and converted
	   many deletes to safe deletes.

==10/10/03==
LethalEncounter: Somewhere around this date I added in bazaar traders and cool features like that.

==10/8/03==
Trumpcard:  Starting items are now in.  LE also fixed the combat damage struct and mob hp bar updates.

==10/8/03==
scruffy:  Inverted the XY coordinates system to work like the EQLive system. Run invertxy.sql to update existing databases.

==10/6/03==
kathgar:  Added opcodes for things such as the LFG tool from SEQ, replaced some instances of static opcode use

==10/5/03==
devn00b: Removed Faulty pet code, replaced with working code.

==09/24/03==
Image: Added the functions for the GuildWars point system.

==8/10/03==
devn00b: Moved pets from hardcoded to DB based. need to source pets.sql

============
